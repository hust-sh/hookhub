INFO:werkzeug: * Running on http://0.0.0.0:3002/ (Press CTRL+C to quit)
INFO:root:
[jira
<^>
{
  "comment": {
    "body": "add a comment in story",
    "updateAuthor": {
      "displayName": "\u8d1d\u4fca\u9f99",
      "name": "beijunlong",
      "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
      "avatarUrls": {
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
      },
      "emailAddress": "beijunlong@bytedance.com",
      "key": "beijunlong",
      "active": "True",
      "timeZone": "PRC"
    },
    "created": "2017-11-28T20:19:17.695+0800",
    "self": "https://jira.bytedance.com/rest/api/2/issue/113608/comment/58158",
    "author": {
      "displayName": "\u8d1d\u4fca\u9f99",
      "name": "beijunlong",
      "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
      "avatarUrls": {
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
      },
      "emailAddress": "beijunlong@bytedance.com",
      "key": "beijunlong",
      "active": "True",
      "timeZone": "PRC"
    },
    "updated": "2017-11-28T20:19:17.695+0800",
    "id": "58158"
  },
  "timestamp": 1511871557701,
  "issue": {
    "fields": {
      "comment": {
        "total": 2,
        "startAt": 0,
        "comments": [
          {
            "body": "21334",
            "updateAuthor": {
              "displayName": "\u8d1d\u4fca\u9f99",
              "name": "beijunlong",
              "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
              "avatarUrls": {
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
              },
              "emailAddress": "beijunlong@bytedance.com",
              "key": "beijunlong",
              "active": "True",
              "timeZone": "PRC"
            },
            "created": "2017-10-11T16:03:55.000+0800",
            "self": "https://jira.bytedance.com/rest/api/2/issue/113608/comment/51846",
            "author": {
              "displayName": "\u8d1d\u4fca\u9f99",
              "name": "beijunlong",
              "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
              "avatarUrls": {
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
              },
              "emailAddress": "beijunlong@bytedance.com",
              "key": "beijunlong",
              "active": "True",
              "timeZone": "PRC"
            },
            "updated": "2017-10-11T16:03:55.000+0800",
            "id": "51846"
          },
          {
            "body": "add a comment in story",
            "updateAuthor": {
              "displayName": "\u8d1d\u4fca\u9f99",
              "name": "beijunlong",
              "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
              "avatarUrls": {
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
              },
              "emailAddress": "beijunlong@bytedance.com",
              "key": "beijunlong",
              "active": "True",
              "timeZone": "PRC"
            },
            "created": "2017-11-28T20:19:17.000+0800",
            "self": "https://jira.bytedance.com/rest/api/2/issue/113608/comment/58158",
            "author": {
              "displayName": "\u8d1d\u4fca\u9f99",
              "name": "beijunlong",
              "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
              "avatarUrls": {
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
              },
              "emailAddress": "beijunlong@bytedance.com",
              "key": "beijunlong",
              "active": "True",
              "timeZone": "PRC"
            },
            "updated": "2017-11-28T20:19:17.000+0800",
            "id": "58158"
          }
        ],
        "maxResults": 2
      },
      "environment": "None",
      "creator": {
        "displayName": "\u8d1d\u4fca\u9f99",
        "name": "beijunlong",
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "avatarUrls": {
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
        },
        "emailAddress": "beijunlong@bytedance.com",
        "key": "beijunlong",
        "active": "True",
        "timeZone": "PRC"
      },
      "aggregatetimeestimate": "None",
      "labels": [],
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-1/watchers",
        "watchCount": 2,
        "isWatching": "True"
      },
      "assignee": {
        "displayName": "\u8d1d\u4fca\u9f99",
        "name": "beijunlong",
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "avatarUrls": {
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
        },
        "emailAddress": "beijunlong@bytedance.com",
        "key": "beijunlong",
        "active": "True",
        "timeZone": "PRC"
      },
      "lastViewed": "2017-11-28T20:19:00.310+0800",
      "customfield_10500": "None",
      "issuelinks": [],
      "customfield_10402": "None",
      "customfield_10403": "None",
      "customfield_10400": "None",
      "customfield_10401": "None",
      "customfield_10000": "None",
      "customfield_10407": "None",
      "customfield_10405": "None",
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "avatarUrls": {
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400",
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400"
        },
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test"
      },
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10004": "9223372036854775807",
      "customfield_10002": "None",
      "fixVersions": [],
      "priority": {
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "timespent": "None",
      "attachment": [],
      "progress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": "None",
      "duedate": "2017-10-09",
      "status": {
        "statusCategory": {
          "name": "In Progress",
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/4",
          "id": 4,
          "key": "indeterminate",
          "colorName": "yellow"
        },
        "description": "This status is managed internally by JIRA Software",
        "self": "https://jira.bytedance.com/rest/api/2/status/10317",
        "iconUrl": "https://jira.bytedance.com/",
        "id": "10317",
        "name": "hold"
      },
      "updated": "2017-11-28T20:18:55.000+0800",
      "customfield_10200": "0|hzzzer:i",
      "subtasks": [],
      "description": "\u63cf\u8ff0\u63cf\u8ff0",
      "reporter": {
        "displayName": "\u8d1d\u4fca\u9f99",
        "name": "beijunlong",
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "avatarUrls": {
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
        },
        "emailAddress": "beijunlong@bytedance.com",
        "key": "beijunlong",
        "active": "True",
        "timeZone": "PRC"
      },
      "summary": "\u4e3b\u754c\u9762\u6539\u7248~~",
      "votes": {
        "hasVoted": "False",
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-1/votes",
        "votes": 0
      },
      "worklog": {
        "worklogs": [],
        "total": 0,
        "startAt": 0,
        "maxResults": 20
      },
      "customfield_10105": "None",
      "customfield_10100": "None",
      "customfield_10006": "None",
      "aggregatetimeoriginalestimate": "None",
      "customfield_10413": "None",
      "customfield_10005": [
        "com.atlassian.greenhopper.service.sprint.Sprint@7811f09d[id=546,rapidViewId=335,state=FUTURE,name=\u6d4b\u8bd5\u8fed\u4ee31,startDate=<null>,endDate=<null>,completeDate=<null>,sequence=547]"
      ],
      "timeoriginalestimate": "None",
      "customfield_10417": "2017-10-09T10:40:00.000+0800",
      "customfield_10416": "None",
      "customfield_10301": "None",
      "customfield_10300": "None",
      "created": "2017-10-11T15:45:13.000+0800",
      "versions": [],
      "resolutiondate": "None",
      "workratio": -1,
      "aggregatetimespent": "None",
      "timetracking": {},
      "components": [],
      "issuetype": {
        "name": "Story",
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10001",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11115&avatarType=issuetype",
        "subtask": "False",
        "avatarId": 11115,
        "id": "10001",
        "description": "gh.issue.story.desc"
      },
      "resolution": "None",
      "timeestimate": "None"
    },
    "self": "https://jira.bytedance.com/rest/api/2/issue/113608",
    "id": "113608",
    "key": "BT-1"
  },
  "webhookEvent": "jira:issue_updated",
  "user": {
    "displayName": "\u8d1d\u4fca\u9f99",
    "name": "beijunlong",
    "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
    "avatarUrls": {
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
      "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
    },
    "emailAddress": "beijunlong@bytedance.com",
    "key": "beijunlong",
    "active": "True",
    "timeZone": "PRC"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '贝俊龙 在Story 【主界面改版~~】中添加了一条新评论', 'text': '[点击查看详情](https://jira.bytedance.com/browse/BT-1)'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 43009, 'errmsg': 'post参数需要json类型'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [29/Nov/2017 11:28:23] "POST /webhook/jira HTTP/1.0" 200 -
INFO:werkzeug: * Running on http://0.0.0.0:3002/ (Press CTRL+C to quit)
INFO:root:
[jira
<^>
{
  "comment": {
    "body": "add a comment in story",
    "updateAuthor": {
      "displayName": "\u8d1d\u4fca\u9f99",
      "name": "beijunlong",
      "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
      "avatarUrls": {
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
      },
      "emailAddress": "beijunlong@bytedance.com",
      "key": "beijunlong",
      "active": "True",
      "timeZone": "PRC"
    },
    "created": "2017-11-28T20:19:17.695+0800",
    "self": "https://jira.bytedance.com/rest/api/2/issue/113608/comment/58158",
    "author": {
      "displayName": "\u8d1d\u4fca\u9f99",
      "name": "beijunlong",
      "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
      "avatarUrls": {
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
      },
      "emailAddress": "beijunlong@bytedance.com",
      "key": "beijunlong",
      "active": "True",
      "timeZone": "PRC"
    },
    "updated": "2017-11-28T20:19:17.695+0800",
    "id": "58158"
  },
  "timestamp": 1511871557701,
  "issue": {
    "fields": {
      "comment": {
        "total": 2,
        "startAt": 0,
        "comments": [
          {
            "body": "21334",
            "updateAuthor": {
              "displayName": "\u8d1d\u4fca\u9f99",
              "name": "beijunlong",
              "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
              "avatarUrls": {
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
              },
              "emailAddress": "beijunlong@bytedance.com",
              "key": "beijunlong",
              "active": "True",
              "timeZone": "PRC"
            },
            "created": "2017-10-11T16:03:55.000+0800",
            "self": "https://jira.bytedance.com/rest/api/2/issue/113608/comment/51846",
            "author": {
              "displayName": "\u8d1d\u4fca\u9f99",
              "name": "beijunlong",
              "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
              "avatarUrls": {
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
              },
              "emailAddress": "beijunlong@bytedance.com",
              "key": "beijunlong",
              "active": "True",
              "timeZone": "PRC"
            },
            "updated": "2017-10-11T16:03:55.000+0800",
            "id": "51846"
          },
          {
            "body": "add a comment in story",
            "updateAuthor": {
              "displayName": "\u8d1d\u4fca\u9f99",
              "name": "beijunlong",
              "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
              "avatarUrls": {
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
              },
              "emailAddress": "beijunlong@bytedance.com",
              "key": "beijunlong",
              "active": "True",
              "timeZone": "PRC"
            },
            "created": "2017-11-28T20:19:17.000+0800",
            "self": "https://jira.bytedance.com/rest/api/2/issue/113608/comment/58158",
            "author": {
              "displayName": "\u8d1d\u4fca\u9f99",
              "name": "beijunlong",
              "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
              "avatarUrls": {
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
              },
              "emailAddress": "beijunlong@bytedance.com",
              "key": "beijunlong",
              "active": "True",
              "timeZone": "PRC"
            },
            "updated": "2017-11-28T20:19:17.000+0800",
            "id": "58158"
          }
        ],
        "maxResults": 2
      },
      "environment": "None",
      "creator": {
        "displayName": "\u8d1d\u4fca\u9f99",
        "name": "beijunlong",
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "avatarUrls": {
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
        },
        "emailAddress": "beijunlong@bytedance.com",
        "key": "beijunlong",
        "active": "True",
        "timeZone": "PRC"
      },
      "aggregatetimeestimate": "None",
      "labels": [],
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-1/watchers",
        "watchCount": 2,
        "isWatching": "True"
      },
      "assignee": {
        "displayName": "\u8d1d\u4fca\u9f99",
        "name": "beijunlong",
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "avatarUrls": {
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
        },
        "emailAddress": "beijunlong@bytedance.com",
        "key": "beijunlong",
        "active": "True",
        "timeZone": "PRC"
      },
      "lastViewed": "2017-11-28T20:19:00.310+0800",
      "customfield_10500": "None",
      "issuelinks": [],
      "customfield_10402": "None",
      "customfield_10403": "None",
      "customfield_10400": "None",
      "customfield_10401": "None",
      "customfield_10000": "None",
      "customfield_10407": "None",
      "customfield_10405": "None",
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "avatarUrls": {
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400",
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400"
        },
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test"
      },
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10004": "9223372036854775807",
      "customfield_10002": "None",
      "fixVersions": [],
      "priority": {
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "timespent": "None",
      "attachment": [],
      "progress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": "None",
      "duedate": "2017-10-09",
      "status": {
        "statusCategory": {
          "name": "In Progress",
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/4",
          "id": 4,
          "key": "indeterminate",
          "colorName": "yellow"
        },
        "description": "This status is managed internally by JIRA Software",
        "self": "https://jira.bytedance.com/rest/api/2/status/10317",
        "iconUrl": "https://jira.bytedance.com/",
        "id": "10317",
        "name": "hold"
      },
      "updated": "2017-11-28T20:18:55.000+0800",
      "customfield_10200": "0|hzzzer:i",
      "subtasks": [],
      "description": "\u63cf\u8ff0\u63cf\u8ff0",
      "reporter": {
        "displayName": "\u8d1d\u4fca\u9f99",
        "name": "beijunlong",
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "avatarUrls": {
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
        },
        "emailAddress": "beijunlong@bytedance.com",
        "key": "beijunlong",
        "active": "True",
        "timeZone": "PRC"
      },
      "summary": "\u4e3b\u754c\u9762\u6539\u7248~~",
      "votes": {
        "hasVoted": "False",
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-1/votes",
        "votes": 0
      },
      "worklog": {
        "worklogs": [],
        "total": 0,
        "startAt": 0,
        "maxResults": 20
      },
      "customfield_10105": "None",
      "customfield_10100": "None",
      "customfield_10006": "None",
      "aggregatetimeoriginalestimate": "None",
      "customfield_10413": "None",
      "customfield_10005": [
        "com.atlassian.greenhopper.service.sprint.Sprint@7811f09d[id=546,rapidViewId=335,state=FUTURE,name=\u6d4b\u8bd5\u8fed\u4ee31,startDate=<null>,endDate=<null>,completeDate=<null>,sequence=547]"
      ],
      "timeoriginalestimate": "None",
      "customfield_10417": "2017-10-09T10:40:00.000+0800",
      "customfield_10416": "None",
      "customfield_10301": "None",
      "customfield_10300": "None",
      "created": "2017-10-11T15:45:13.000+0800",
      "versions": [],
      "resolutiondate": "None",
      "workratio": -1,
      "aggregatetimespent": "None",
      "timetracking": {},
      "components": [],
      "issuetype": {
        "name": "Story",
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10001",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11115&avatarType=issuetype",
        "subtask": "False",
        "avatarId": 11115,
        "id": "10001",
        "description": "gh.issue.story.desc"
      },
      "resolution": "None",
      "timeestimate": "None"
    },
    "self": "https://jira.bytedance.com/rest/api/2/issue/113608",
    "id": "113608",
    "key": "BT-1"
  },
  "webhookEvent": "jira:issue_updated",
  "user": {
    "displayName": "\u8d1d\u4fca\u9f99",
    "name": "beijunlong",
    "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
    "avatarUrls": {
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
      "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
    },
    "emailAddress": "beijunlong@bytedance.com",
    "key": "beijunlong",
    "active": "True",
    "timeZone": "PRC"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '贝俊龙 在Story 【主界面改版~~】中添加了一条新评论', 'text': '[点击查看详情](https://jira.bytedance.com/browse/BT-1)'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 43009, 'errmsg': 'post参数需要json类型'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [29/Nov/2017 11:30:57] "POST /webhook/jira HTTP/1.0" 200 -
INFO:werkzeug: * Running on http://0.0.0.0:3002/ (Press CTRL+C to quit)
INFO:root:
[jira
<^>
{
  "comment": {
    "body": "add a comment in story",
    "updateAuthor": {
      "displayName": "\u8d1d\u4fca\u9f99",
      "name": "beijunlong",
      "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
      "avatarUrls": {
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
      },
      "emailAddress": "beijunlong@bytedance.com",
      "key": "beijunlong",
      "active": "True",
      "timeZone": "PRC"
    },
    "created": "2017-11-28T20:19:17.695+0800",
    "self": "https://jira.bytedance.com/rest/api/2/issue/113608/comment/58158",
    "author": {
      "displayName": "\u8d1d\u4fca\u9f99",
      "name": "beijunlong",
      "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
      "avatarUrls": {
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
      },
      "emailAddress": "beijunlong@bytedance.com",
      "key": "beijunlong",
      "active": "True",
      "timeZone": "PRC"
    },
    "updated": "2017-11-28T20:19:17.695+0800",
    "id": "58158"
  },
  "timestamp": 1511871557701,
  "issue": {
    "fields": {
      "comment": {
        "total": 2,
        "startAt": 0,
        "comments": [
          {
            "body": "21334",
            "updateAuthor": {
              "displayName": "\u8d1d\u4fca\u9f99",
              "name": "beijunlong",
              "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
              "avatarUrls": {
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
              },
              "emailAddress": "beijunlong@bytedance.com",
              "key": "beijunlong",
              "active": "True",
              "timeZone": "PRC"
            },
            "created": "2017-10-11T16:03:55.000+0800",
            "self": "https://jira.bytedance.com/rest/api/2/issue/113608/comment/51846",
            "author": {
              "displayName": "\u8d1d\u4fca\u9f99",
              "name": "beijunlong",
              "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
              "avatarUrls": {
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
              },
              "emailAddress": "beijunlong@bytedance.com",
              "key": "beijunlong",
              "active": "True",
              "timeZone": "PRC"
            },
            "updated": "2017-10-11T16:03:55.000+0800",
            "id": "51846"
          },
          {
            "body": "add a comment in story",
            "updateAuthor": {
              "displayName": "\u8d1d\u4fca\u9f99",
              "name": "beijunlong",
              "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
              "avatarUrls": {
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
              },
              "emailAddress": "beijunlong@bytedance.com",
              "key": "beijunlong",
              "active": "True",
              "timeZone": "PRC"
            },
            "created": "2017-11-28T20:19:17.000+0800",
            "self": "https://jira.bytedance.com/rest/api/2/issue/113608/comment/58158",
            "author": {
              "displayName": "\u8d1d\u4fca\u9f99",
              "name": "beijunlong",
              "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
              "avatarUrls": {
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
              },
              "emailAddress": "beijunlong@bytedance.com",
              "key": "beijunlong",
              "active": "True",
              "timeZone": "PRC"
            },
            "updated": "2017-11-28T20:19:17.000+0800",
            "id": "58158"
          }
        ],
        "maxResults": 2
      },
      "environment": "None",
      "creator": {
        "displayName": "\u8d1d\u4fca\u9f99",
        "name": "beijunlong",
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "avatarUrls": {
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
        },
        "emailAddress": "beijunlong@bytedance.com",
        "key": "beijunlong",
        "active": "True",
        "timeZone": "PRC"
      },
      "aggregatetimeestimate": "None",
      "labels": [],
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-1/watchers",
        "watchCount": 2,
        "isWatching": "True"
      },
      "assignee": {
        "displayName": "\u8d1d\u4fca\u9f99",
        "name": "beijunlong",
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "avatarUrls": {
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
        },
        "emailAddress": "beijunlong@bytedance.com",
        "key": "beijunlong",
        "active": "True",
        "timeZone": "PRC"
      },
      "lastViewed": "2017-11-28T20:19:00.310+0800",
      "customfield_10500": "None",
      "issuelinks": [],
      "customfield_10402": "None",
      "customfield_10403": "None",
      "customfield_10400": "None",
      "customfield_10401": "None",
      "customfield_10000": "None",
      "customfield_10407": "None",
      "customfield_10405": "None",
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "avatarUrls": {
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400",
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400"
        },
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test"
      },
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10004": "9223372036854775807",
      "customfield_10002": "None",
      "fixVersions": [],
      "priority": {
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "timespent": "None",
      "attachment": [],
      "progress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": "None",
      "duedate": "2017-10-09",
      "status": {
        "statusCategory": {
          "name": "In Progress",
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/4",
          "id": 4,
          "key": "indeterminate",
          "colorName": "yellow"
        },
        "description": "This status is managed internally by JIRA Software",
        "self": "https://jira.bytedance.com/rest/api/2/status/10317",
        "iconUrl": "https://jira.bytedance.com/",
        "id": "10317",
        "name": "hold"
      },
      "updated": "2017-11-28T20:18:55.000+0800",
      "customfield_10200": "0|hzzzer:i",
      "subtasks": [],
      "description": "\u63cf\u8ff0\u63cf\u8ff0",
      "reporter": {
        "displayName": "\u8d1d\u4fca\u9f99",
        "name": "beijunlong",
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "avatarUrls": {
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
        },
        "emailAddress": "beijunlong@bytedance.com",
        "key": "beijunlong",
        "active": "True",
        "timeZone": "PRC"
      },
      "summary": "\u4e3b\u754c\u9762\u6539\u7248~~",
      "votes": {
        "hasVoted": "False",
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-1/votes",
        "votes": 0
      },
      "worklog": {
        "worklogs": [],
        "total": 0,
        "startAt": 0,
        "maxResults": 20
      },
      "customfield_10105": "None",
      "customfield_10100": "None",
      "customfield_10006": "None",
      "aggregatetimeoriginalestimate": "None",
      "customfield_10413": "None",
      "customfield_10005": [
        "com.atlassian.greenhopper.service.sprint.Sprint@7811f09d[id=546,rapidViewId=335,state=FUTURE,name=\u6d4b\u8bd5\u8fed\u4ee31,startDate=<null>,endDate=<null>,completeDate=<null>,sequence=547]"
      ],
      "timeoriginalestimate": "None",
      "customfield_10417": "2017-10-09T10:40:00.000+0800",
      "customfield_10416": "None",
      "customfield_10301": "None",
      "customfield_10300": "None",
      "created": "2017-10-11T15:45:13.000+0800",
      "versions": [],
      "resolutiondate": "None",
      "workratio": -1,
      "aggregatetimespent": "None",
      "timetracking": {},
      "components": [],
      "issuetype": {
        "name": "Story",
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10001",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11115&avatarType=issuetype",
        "subtask": "False",
        "avatarId": 11115,
        "id": "10001",
        "description": "gh.issue.story.desc"
      },
      "resolution": "None",
      "timeestimate": "None"
    },
    "self": "https://jira.bytedance.com/rest/api/2/issue/113608",
    "id": "113608",
    "key": "BT-1"
  },
  "webhookEvent": "jira:issue_updated",
  "user": {
    "displayName": "\u8d1d\u4fca\u9f99",
    "name": "beijunlong",
    "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
    "avatarUrls": {
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
      "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
    },
    "emailAddress": "beijunlong@bytedance.com",
    "key": "beijunlong",
    "active": "True",
    "timeZone": "PRC"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '贝俊龙 在Story 【主界面改版~~】中添加了一条新评论', 'text': '[点击查看详情](https://jira.bytedance.com/browse/BT-1)'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 0, 'errmsg': 'ok'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [29/Nov/2017 11:32:44] "POST /webhook/jira HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1511955200428,
  "webhookEvent": "worklog_created",
  "worklog": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127173/worklog/13820",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=fanlinlin.320",
      "name": "fanlinlin.320",
      "key": "fanlinlin.320",
      "emailAddress": "fanlinlin.320@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "fanlinlin.320",
      "active": true,
      "timeZone": "PRC"
    },
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=fanlinlin.320",
      "name": "fanlinlin.320",
      "key": "fanlinlin.320",
      "emailAddress": "fanlinlin.320@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "fanlinlin.320",
      "active": true,
      "timeZone": "PRC"
    },
    "comment": "\u914d\u5408\u5fae\u5934\u6761\u8fd0\u8425\u6d3b\u52a8\uff0c\u7ed9\u4e00\u6279\u5ba2\u6237\u81ea\u52a8\u5f00\u901a\u79fb\u52a8\u7aef\u53f7\u5916\u8d26\u53f7\uff0c\u5de5\u5177\u5df2\u5f00\u53d1\u5b8c\u6bd5\uff0c\u76ee\u524d\u7b2c\u4e00\u6279\u5ba2\u6237\u5df2\u7ecf\u5f00\u901a\u5b8c\u6bd5",
    "created": "2017-11-29T19:33:20.428+0800",
    "updated": "2017-11-29T19:33:20.428+0800",
    "started": "2017-11-29T19:31:00.000+0800",
    "timeSpent": "7m",
    "timeSpentSeconds": 420,
    "id": "13820",
    "issueId": "127173"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': ''}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param text is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [29/Nov/2017 11:33:21] "POST /webhook/jira?user_id=fanlinlin.320&user_key=fanlinlin.320 HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1511955230000,
  "webhookEvent": "worklog_updated",
  "worklog": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127173/worklog/13820",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=fanlinlin.320",
      "name": "fanlinlin.320",
      "key": "fanlinlin.320",
      "emailAddress": "fanlinlin.320@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "fanlinlin.320",
      "active": true,
      "timeZone": "PRC"
    },
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=fanlinlin.320",
      "name": "fanlinlin.320",
      "key": "fanlinlin.320",
      "emailAddress": "fanlinlin.320@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "fanlinlin.320",
      "active": true,
      "timeZone": "PRC"
    },
    "comment": "\u914d\u5408\u5fae\u5934\u6761\u8fd0\u8425\u6d3b\u52a8\uff0c\u7ed9\u4e00\u6279\u5ba2\u6237\u81ea\u52a8\u5f00\u901a\u79fb\u52a8\u7aef\u53f7\u5916\u8d26\u53f7\uff0c\u5de5\u5177\u5df2\u5f00\u53d1\u5b8c\u6bd5\uff0c\u76ee\u524d\u7b2c\u4e00\u6279\u5ba2\u6237\u5df2\u7ecf\u5f00\u901a\u5b8c\u6bd5",
    "created": "2017-11-29T19:33:20.000+0800",
    "updated": "2017-11-29T19:33:50.000+0800",
    "started": "2017-11-29T19:31:00.000+0800",
    "timeSpent": "7h",
    "timeSpentSeconds": 25200,
    "id": "13820",
    "issueId": "127173"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': ''}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param text is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [29/Nov/2017 11:33:50] "POST /webhook/jira?user_id=fanlinlin.320&user_key=fanlinlin.320 HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1511955233676,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/125764/comment/58406",
    "id": "58406",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=songli.02",
      "name": "songli.02",
      "key": "songli.02",
      "emailAddress": "songli.02@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=songli.02&avatarId=11230",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=songli.02&avatarId=11230",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=songli.02&avatarId=11230",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=songli.02&avatarId=11230"
      },
      "displayName": "\u5b8b\u7acb",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010\u63d0\u6d4b\u529f\u80fd\u3011 \r\n\u53d1\u9001\u7ad9\u5185\u4fe1\u7ed9\u5934\u6761\u5bfc\u6d41\r\n\u3010\u5206\u652f\u3011 \r\nfeature/2.9_\u7ad9\u5185\u4fe1\u5934\u6761\u5bfc\u6d41\r\n\u3010\u7ec6\u8282\u63cf\u8ff0&\u98ce\u9669\u63d0\u793a\u3011 \r\n\u7ad9\u5185\u4fe1\u53d1\u9001\u7cfb\u7edf\u6d88\u606f\uff0c\u6d4b\u8bd5scheme\uff1a\r\nsslocal://ttactive?ios_url=https%3a%2f%2fitunes.apple.com%2fcn%2fapp%2fid529092160&app_name=%e4%bb%8a%e6%97%a5%e5%a4%b4%e6%9d%a1&ios_scheme=%5b%22ttnewsinhousesso%22%2c%22ttnewssso%22%5d",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=songli.02",
      "name": "songli.02",
      "key": "songli.02",
      "emailAddress": "songli.02@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=songli.02&avatarId=11230",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=songli.02&avatarId=11230",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=songli.02&avatarId=11230",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=songli.02&avatarId=11230"
      },
      "displayName": "\u5b8b\u7acb",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-29T19:33:53.676+0800",
    "updated": "2017-11-29T19:33:53.676+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 142, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 211, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [29/Nov/2017 11:33:53] "POST /webhook/jira?user_id=songli.02&user_key=songli.02 HTTP/1.0" 500 -
INFO:werkzeug: * Running on http://0.0.0.0:3002/ (Press CTRL+C to quit)
INFO:root:
[jira
<^>
{
  "comment": {
    "body": "add a comment in story",
    "updateAuthor": {
      "displayName": "\u8d1d\u4fca\u9f99",
      "name": "beijunlong",
      "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
      "avatarUrls": {
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
      },
      "emailAddress": "beijunlong@bytedance.com",
      "key": "beijunlong",
      "active": "True",
      "timeZone": "PRC"
    },
    "created": "2017-11-28T20:19:17.695+0800",
    "self": "https://jira.bytedance.com/rest/api/2/issue/113608/comment/58158",
    "author": {
      "displayName": "\u8d1d\u4fca\u9f99",
      "name": "beijunlong",
      "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
      "avatarUrls": {
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
      },
      "emailAddress": "beijunlong@bytedance.com",
      "key": "beijunlong",
      "active": "True",
      "timeZone": "PRC"
    },
    "updated": "2017-11-28T20:19:17.695+0800",
    "id": "58158"
  },
  "timestamp": 1511871557701,
  "issue": {
    "fields": {
      "comment": {
        "total": 2,
        "startAt": 0,
        "comments": [
          {
            "body": "21334",
            "updateAuthor": {
              "displayName": "\u8d1d\u4fca\u9f99",
              "name": "beijunlong",
              "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
              "avatarUrls": {
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
              },
              "emailAddress": "beijunlong@bytedance.com",
              "key": "beijunlong",
              "active": "True",
              "timeZone": "PRC"
            },
            "created": "2017-10-11T16:03:55.000+0800",
            "self": "https://jira.bytedance.com/rest/api/2/issue/113608/comment/51846",
            "author": {
              "displayName": "\u8d1d\u4fca\u9f99",
              "name": "beijunlong",
              "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
              "avatarUrls": {
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
              },
              "emailAddress": "beijunlong@bytedance.com",
              "key": "beijunlong",
              "active": "True",
              "timeZone": "PRC"
            },
            "updated": "2017-10-11T16:03:55.000+0800",
            "id": "51846"
          },
          {
            "body": "add a comment in story",
            "updateAuthor": {
              "displayName": "\u8d1d\u4fca\u9f99",
              "name": "beijunlong",
              "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
              "avatarUrls": {
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
              },
              "emailAddress": "beijunlong@bytedance.com",
              "key": "beijunlong",
              "active": "True",
              "timeZone": "PRC"
            },
            "created": "2017-11-28T20:19:17.000+0800",
            "self": "https://jira.bytedance.com/rest/api/2/issue/113608/comment/58158",
            "author": {
              "displayName": "\u8d1d\u4fca\u9f99",
              "name": "beijunlong",
              "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
              "avatarUrls": {
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
              },
              "emailAddress": "beijunlong@bytedance.com",
              "key": "beijunlong",
              "active": "True",
              "timeZone": "PRC"
            },
            "updated": "2017-11-28T20:19:17.000+0800",
            "id": "58158"
          }
        ],
        "maxResults": 2
      },
      "environment": "None",
      "creator": {
        "displayName": "\u8d1d\u4fca\u9f99",
        "name": "beijunlong",
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "avatarUrls": {
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
        },
        "emailAddress": "beijunlong@bytedance.com",
        "key": "beijunlong",
        "active": "True",
        "timeZone": "PRC"
      },
      "aggregatetimeestimate": "None",
      "labels": [],
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-1/watchers",
        "watchCount": 2,
        "isWatching": "True"
      },
      "assignee": {
        "displayName": "\u8d1d\u4fca\u9f99",
        "name": "beijunlong",
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "avatarUrls": {
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
        },
        "emailAddress": "beijunlong@bytedance.com",
        "key": "beijunlong",
        "active": "True",
        "timeZone": "PRC"
      },
      "lastViewed": "2017-11-28T20:19:00.310+0800",
      "customfield_10500": "None",
      "issuelinks": [],
      "customfield_10402": "None",
      "customfield_10403": "None",
      "customfield_10400": "None",
      "customfield_10401": "None",
      "customfield_10000": "None",
      "customfield_10407": "None",
      "customfield_10405": "None",
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "avatarUrls": {
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400",
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400"
        },
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test"
      },
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10004": "9223372036854775807",
      "customfield_10002": "None",
      "fixVersions": [],
      "priority": {
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "timespent": "None",
      "attachment": [],
      "progress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": "None",
      "duedate": "2017-10-09",
      "status": {
        "statusCategory": {
          "name": "In Progress",
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/4",
          "id": 4,
          "key": "indeterminate",
          "colorName": "yellow"
        },
        "description": "This status is managed internally by JIRA Software",
        "self": "https://jira.bytedance.com/rest/api/2/status/10317",
        "iconUrl": "https://jira.bytedance.com/",
        "id": "10317",
        "name": "hold"
      },
      "updated": "2017-11-28T20:18:55.000+0800",
      "customfield_10200": "0|hzzzer:i",
      "subtasks": [],
      "description": "\u63cf\u8ff0\u63cf\u8ff0",
      "reporter": {
        "displayName": "\u8d1d\u4fca\u9f99",
        "name": "beijunlong",
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "avatarUrls": {
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
        },
        "emailAddress": "beijunlong@bytedance.com",
        "key": "beijunlong",
        "active": "True",
        "timeZone": "PRC"
      },
      "summary": "\u4e3b\u754c\u9762\u6539\u7248~~",
      "votes": {
        "hasVoted": "False",
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-1/votes",
        "votes": 0
      },
      "worklog": {
        "worklogs": [],
        "total": 0,
        "startAt": 0,
        "maxResults": 20
      },
      "customfield_10105": "None",
      "customfield_10100": "None",
      "customfield_10006": "None",
      "aggregatetimeoriginalestimate": "None",
      "customfield_10413": "None",
      "customfield_10005": [
        "com.atlassian.greenhopper.service.sprint.Sprint@7811f09d[id=546,rapidViewId=335,state=FUTURE,name=\u6d4b\u8bd5\u8fed\u4ee31,startDate=<null>,endDate=<null>,completeDate=<null>,sequence=547]"
      ],
      "timeoriginalestimate": "None",
      "customfield_10417": "2017-10-09T10:40:00.000+0800",
      "customfield_10416": "None",
      "customfield_10301": "None",
      "customfield_10300": "None",
      "created": "2017-10-11T15:45:13.000+0800",
      "versions": [],
      "resolutiondate": "None",
      "workratio": -1,
      "aggregatetimespent": "None",
      "timetracking": {},
      "components": [],
      "issuetype": {
        "name": "Story",
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10001",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11115&avatarType=issuetype",
        "subtask": "False",
        "avatarId": 11115,
        "id": "10001",
        "description": "gh.issue.story.desc"
      },
      "resolution": "None",
      "timeestimate": "None"
    },
    "self": "https://jira.bytedance.com/rest/api/2/issue/113608",
    "id": "113608",
    "key": "BT-1"
  },
  "webhookEvent": "jira:issue_updated",
  "user": {
    "displayName": "\u8d1d\u4fca\u9f99",
    "name": "beijunlong",
    "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
    "avatarUrls": {
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
      "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
    },
    "emailAddress": "beijunlong@bytedance.com",
    "key": "beijunlong",
    "active": "True",
    "timeZone": "PRC"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '贝俊龙 在Story 【主界面改版~~】中添加了一条新评论', 'text': '##贝俊龙 在Story 【主界面改版~~】中添加了一条新评论##\n[点击查看详情](https://jira.bytedance.com/browse/BT-1)'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 0, 'errmsg': 'ok'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [29/Nov/2017 11:36:06] "POST /webhook/jira HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1511955428660,
  "webhookEvent": "comment_updated",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/125764/comment/58406",
    "id": "58406",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=songli.02",
      "name": "songli.02",
      "key": "songli.02",
      "emailAddress": "songli.02@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=songli.02&avatarId=11230",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=songli.02&avatarId=11230",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=songli.02&avatarId=11230",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=songli.02&avatarId=11230"
      },
      "displayName": "\u5b8b\u7acb",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010\u63d0\u6d4b\u529f\u80fd\u3011 \r\n\u53d1\u9001\u7ad9\u5185\u4fe1\u7ed9\u5934\u6761\u5bfc\u6d41\r\n\u3010\u5206\u652f\u3011 \r\nfeature/2.9_\u7ad9\u5185\u4fe1\u5934\u6761\u5bfc\u6d41\r\n\u3010\u7ec6\u8282\u63cf\u8ff0&\u98ce\u9669\u63d0\u793a\u3011 \r\n\u7ad9\u5185\u4fe1\u53d1\u9001\u7cfb\u7edf\u6d88\u606f\uff0c\u6d4b\u8bd5scheme\uff1a\r\nsslocal://ttactive?ios_url=https%3a%2f%2fitunes.apple.com%2fcn%2fapp%2fid529092160&app_name=%e4%bb%8a%e6%97%a5%e5%a4%b4%e6%9d%a1&ios_scheme=%5b%22ttnewsinhousesso%22%2c%22ttnewssso%22%5d\r\n- \u4e3b\u8981\u6d4b\u672a\u5b89\u88c5\u5934\u6761\u548c\u5934\u6761App\u7248\u672c\u4f4e(\u5f53\u524d\u7ebf\u4e0a\u7248)\u7684\u60c5\u51b5\r\n- \u5934\u6761App\u6d4b\u8bd5\u5206\u652f\uff1anewsbeta_inAppMsgGuidance_in_bytedanceApps\uff0c\u4e0b\u8f7d\u5934\u6761\u8fd9\u4e2a\u5206\u652f\u7684\u4ee3\u7801\u5305\u53ef\u4ee5\u6d4b\u6b63\u5e38\u8df3\u8f6c\u5934\u6761App\u5e76\u7ed1\u5b9a\u7528\u6237\u7684\u529f\u80fd",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=songli.02",
      "name": "songli.02",
      "key": "songli.02",
      "emailAddress": "songli.02@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=songli.02&avatarId=11230",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=songli.02&avatarId=11230",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=songli.02&avatarId=11230",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=songli.02&avatarId=11230"
      },
      "displayName": "\u5b8b\u7acb",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-29T19:33:53.000+0800",
    "updated": "2017-11-29T19:37:08.660+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####\n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [29/Nov/2017 11:37:08] "POST /webhook/jira?user_id=songli.02&user_key=songli.02 HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "comment": {
    "body": "add a comment in story",
    "updateAuthor": {
      "displayName": "\u8d1d\u4fca\u9f99",
      "name": "beijunlong",
      "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
      "avatarUrls": {
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
      },
      "emailAddress": "beijunlong@bytedance.com",
      "key": "beijunlong",
      "active": "True",
      "timeZone": "PRC"
    },
    "created": "2017-11-28T20:19:17.695+0800",
    "self": "https://jira.bytedance.com/rest/api/2/issue/113608/comment/58158",
    "author": {
      "displayName": "\u8d1d\u4fca\u9f99",
      "name": "beijunlong",
      "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
      "avatarUrls": {
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
      },
      "emailAddress": "beijunlong@bytedance.com",
      "key": "beijunlong",
      "active": "True",
      "timeZone": "PRC"
    },
    "updated": "2017-11-28T20:19:17.695+0800",
    "id": "58158"
  },
  "timestamp": 1511871557701,
  "issue": {
    "fields": {
      "comment": {
        "total": 2,
        "startAt": 0,
        "comments": [
          {
            "body": "21334",
            "updateAuthor": {
              "displayName": "\u8d1d\u4fca\u9f99",
              "name": "beijunlong",
              "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
              "avatarUrls": {
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
              },
              "emailAddress": "beijunlong@bytedance.com",
              "key": "beijunlong",
              "active": "True",
              "timeZone": "PRC"
            },
            "created": "2017-10-11T16:03:55.000+0800",
            "self": "https://jira.bytedance.com/rest/api/2/issue/113608/comment/51846",
            "author": {
              "displayName": "\u8d1d\u4fca\u9f99",
              "name": "beijunlong",
              "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
              "avatarUrls": {
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
              },
              "emailAddress": "beijunlong@bytedance.com",
              "key": "beijunlong",
              "active": "True",
              "timeZone": "PRC"
            },
            "updated": "2017-10-11T16:03:55.000+0800",
            "id": "51846"
          },
          {
            "body": "add a comment in story",
            "updateAuthor": {
              "displayName": "\u8d1d\u4fca\u9f99",
              "name": "beijunlong",
              "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
              "avatarUrls": {
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
              },
              "emailAddress": "beijunlong@bytedance.com",
              "key": "beijunlong",
              "active": "True",
              "timeZone": "PRC"
            },
            "created": "2017-11-28T20:19:17.000+0800",
            "self": "https://jira.bytedance.com/rest/api/2/issue/113608/comment/58158",
            "author": {
              "displayName": "\u8d1d\u4fca\u9f99",
              "name": "beijunlong",
              "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
              "avatarUrls": {
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
              },
              "emailAddress": "beijunlong@bytedance.com",
              "key": "beijunlong",
              "active": "True",
              "timeZone": "PRC"
            },
            "updated": "2017-11-28T20:19:17.000+0800",
            "id": "58158"
          }
        ],
        "maxResults": 2
      },
      "environment": "None",
      "creator": {
        "displayName": "\u8d1d\u4fca\u9f99",
        "name": "beijunlong",
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "avatarUrls": {
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
        },
        "emailAddress": "beijunlong@bytedance.com",
        "key": "beijunlong",
        "active": "True",
        "timeZone": "PRC"
      },
      "aggregatetimeestimate": "None",
      "labels": [],
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-1/watchers",
        "watchCount": 2,
        "isWatching": "True"
      },
      "assignee": {
        "displayName": "\u8d1d\u4fca\u9f99",
        "name": "beijunlong",
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "avatarUrls": {
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
        },
        "emailAddress": "beijunlong@bytedance.com",
        "key": "beijunlong",
        "active": "True",
        "timeZone": "PRC"
      },
      "lastViewed": "2017-11-28T20:19:00.310+0800",
      "customfield_10500": "None",
      "issuelinks": [],
      "customfield_10402": "None",
      "customfield_10403": "None",
      "customfield_10400": "None",
      "customfield_10401": "None",
      "customfield_10000": "None",
      "customfield_10407": "None",
      "customfield_10405": "None",
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "avatarUrls": {
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400",
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400"
        },
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test"
      },
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10004": "9223372036854775807",
      "customfield_10002": "None",
      "fixVersions": [],
      "priority": {
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "timespent": "None",
      "attachment": [],
      "progress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": "None",
      "duedate": "2017-10-09",
      "status": {
        "statusCategory": {
          "name": "In Progress",
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/4",
          "id": 4,
          "key": "indeterminate",
          "colorName": "yellow"
        },
        "description": "This status is managed internally by JIRA Software",
        "self": "https://jira.bytedance.com/rest/api/2/status/10317",
        "iconUrl": "https://jira.bytedance.com/",
        "id": "10317",
        "name": "hold"
      },
      "updated": "2017-11-28T20:18:55.000+0800",
      "customfield_10200": "0|hzzzer:i",
      "subtasks": [],
      "description": "\u63cf\u8ff0\u63cf\u8ff0",
      "reporter": {
        "displayName": "\u8d1d\u4fca\u9f99",
        "name": "beijunlong",
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "avatarUrls": {
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
        },
        "emailAddress": "beijunlong@bytedance.com",
        "key": "beijunlong",
        "active": "True",
        "timeZone": "PRC"
      },
      "summary": "\u4e3b\u754c\u9762\u6539\u7248~~",
      "votes": {
        "hasVoted": "False",
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-1/votes",
        "votes": 0
      },
      "worklog": {
        "worklogs": [],
        "total": 0,
        "startAt": 0,
        "maxResults": 20
      },
      "customfield_10105": "None",
      "customfield_10100": "None",
      "customfield_10006": "None",
      "aggregatetimeoriginalestimate": "None",
      "customfield_10413": "None",
      "customfield_10005": [
        "com.atlassian.greenhopper.service.sprint.Sprint@7811f09d[id=546,rapidViewId=335,state=FUTURE,name=\u6d4b\u8bd5\u8fed\u4ee31,startDate=<null>,endDate=<null>,completeDate=<null>,sequence=547]"
      ],
      "timeoriginalestimate": "None",
      "customfield_10417": "2017-10-09T10:40:00.000+0800",
      "customfield_10416": "None",
      "customfield_10301": "None",
      "customfield_10300": "None",
      "created": "2017-10-11T15:45:13.000+0800",
      "versions": [],
      "resolutiondate": "None",
      "workratio": -1,
      "aggregatetimespent": "None",
      "timetracking": {},
      "components": [],
      "issuetype": {
        "name": "Story",
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10001",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11115&avatarType=issuetype",
        "subtask": "False",
        "avatarId": 11115,
        "id": "10001",
        "description": "gh.issue.story.desc"
      },
      "resolution": "None",
      "timeestimate": "None"
    },
    "self": "https://jira.bytedance.com/rest/api/2/issue/113608",
    "id": "113608",
    "key": "BT-1"
  },
  "webhookEvent": "jira:issue_updated",
  "user": {
    "displayName": "\u8d1d\u4fca\u9f99",
    "name": "beijunlong",
    "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
    "avatarUrls": {
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
      "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
    },
    "emailAddress": "beijunlong@bytedance.com",
    "key": "beijunlong",
    "active": "True",
    "timeZone": "PRC"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '贝俊龙 在Story 【主界面改版~~】中添加了一条新评论', 'text': '##贝俊龙 在Story 【主界面改版~~】中添加了一条新评论##\n[点击查看详情](https://jira.bytedance.com/browse/BT-1)'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 0, 'errmsg': 'ok'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [29/Nov/2017 11:38:00] "POST /webhook/jira HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1511955652248,
  "webhookEvent": "comment_updated",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/125782/comment/58094",
    "id": "58094",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=xusheng",
      "name": "xusheng",
      "key": "xusheng",
      "emailAddress": "xusheng@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5f90\u751f",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010\u63d0\u6d4b\u529f\u80fd\u3011\r\nCamera\u4f18\u5316\r\n\u3010\u7ec6\u8282\u63cf\u8ff0\u3011\r\n\u4e3b\u8981\u6d4b\u8bd5\u4e0b\u62cd\u6444\u9875\u9884\u89c8\u4ee5\u53ca\u62cd\u6444\u6709\u65e0\u5f02\u5e38\u5373\u53ef\r\n\u3010\u63d0\u6d4b\u5206\u652f\u3011\r\ncamera_update\r\n\r\ndoing by zhoushenglei",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=zhoushenglei",
      "name": "zhoushenglei",
      "key": "zhoushenglei",
      "emailAddress": "zhoushenglei@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "zhoushenglei",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-28T17:04:54.000+0800",
    "updated": "2017-11-29T19:40:52.248+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####\n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [29/Nov/2017 11:40:52] "POST /webhook/jira?user_id=zhoushenglei&user_key=zhoushenglei HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1511956388769,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127732/comment/58408",
    "id": "58408",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=xiejianmin",
      "name": "xiejianmin",
      "key": "xiejianmin",
      "emailAddress": "xiejianmin@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u8c22\u5251\u654f",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u7b97\u6cd5\u4fa7\u6240\u5728\u7684\u673a\u5668\u90e8\u7f72\u4e86\u5176\u5b83\u670d\u52a1\uff0c\u5bfc\u81f4\u8ba1\u7b97\u8d44\u6e90\u4e0d\u8db3\uff0c\u54cd\u5e94\u65f6\u95f4\u53d8\u957f\u3002\u73b0\u5728\u6ca1\u6709\u597d\u7684\u8fc1\u79fb\u65b9\u6848",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=xiejianmin",
      "name": "xiejianmin",
      "key": "xiejianmin",
      "emailAddress": "xiejianmin@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u8c22\u5251\u654f",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-29T19:53:08.769+0800",
    "updated": "2017-11-29T19:53:08.769+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [29/Nov/2017 11:53:08] "POST /webhook/jira?user_id=xiejianmin&user_key=xiejianmin HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1511958591711,
  "webhookEvent": "comment_updated",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/125762/comment/58203",
    "id": "58203",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=pengzipei",
      "name": "pengzipei",
      "key": "pengzipei",
      "emailAddress": "pengzipei@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5f6d\u5b50\u6c9b",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010\u63d0\u6d4b\u529f\u80fd\u3011 \u90ed\u6c5f\u6d9b done\r\n\u9690\u79c1\u589e\u52a0\u7981\u6b62\u975e\u5173\u6ce8\u6211\u7684\u4eba\u8bc4\u8bba\r\n\u3010\u5206\u652f\u3011 \r\nlive_2.9_fobidden_comment\r\n\u3010\u7ec6\u8282\u63cf\u8ff0&\u98ce\u9669\u63d0\u793a\u3011 \r\n\u9690\u79c1\u9875\u9762\u589e\u52a0\u989d\u5916\u7684\u8bbe\u7f6e\u6309\u94ae\u3002\u4f5c\u8005\u5f00\u542f\u3010\u4ec5\u5173\u6ce8\u6211\u7684\u4eba\u3011\u6216\u3010\u4ec5\u6211\u5173\u6ce8\u7684\u4eba\u3011\u65f6\uff0c\u4ec5\u6ee1\u8db3\u6761\u4ef6\u7684\u7528\u6237\u624d\u53ef\u4ee5\u8bc4\u8bba\uff0c\u5bf9\u4e8e\u4e0d\u6ee1\u8db3\u6761\u4ef6\u7684\u7528\u6237\uff0c\u5c55\u793a\u4e0d\u6ee1\u8db3\u6761\u4ef6\u7684\u63d0\u793a\u8bed\r\n\u7528\u6237\u5728\u4e00\u7ea7\u8bc4\u8bba\u548c\u4e8c\u7ea7\u8bc4\u8bba\uff0c\u957f\u6309\u5bf9\u5e94\u8bc4\u8bba\u5c55\u793a\u4e0d\u540c\u7684\u5f39\u7a97",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=guojiangtao",
      "name": "guojiangtao",
      "key": "guojiangtao",
      "emailAddress": "guojiangtao@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11141",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11141",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11141",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11141"
      },
      "displayName": "guojiangtao",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-28T21:38:47.000+0800",
    "updated": "2017-11-29T20:29:51.711+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####\n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [29/Nov/2017 12:29:51] "POST /webhook/jira?user_id=guojiangtao&user_key=guojiangtao HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1511958690529,
  "webhookEvent": "comment_updated",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/125762/comment/58205",
    "id": "58205",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=pengzipei",
      "name": "pengzipei",
      "key": "pengzipei",
      "emailAddress": "pengzipei@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5f6d\u5b50\u6c9b",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010\u63d0\u6d4b\u529f\u80fd\u3011\u90ed\u6c5f\u6d9b doing\r\n\u89c6\u9891Feed-\u63a8\u8350\u7406\u7531&&\u540c\u57cePOI\r\n\u3010\u5206\u652f\u3011\r\nlive_2.9_feed_card_recommend\r\n\u3010\u7ec6\u8282\u63cf\u8ff0&\u98ce\u9669\u63d0\u793a\u3011\r\n\u63a8\u8350\u7406\u7531\uff1a\r\n\u89c6\u9891Feed\u4e0bMedia\u5b57\u6bb5\u4e2dRecommendReason\u5b57\u6bb5\uff0ctype\u4e3a1\u65f6\u4e3a\u540c\u57ce\u5185\u5bb9\uff0c\u6b64\u65f6\u5728feed\u5361\u7247\u5de6\u4e0a\u89d2\u5c55\u793a\u540c\u57ce\u7684icon\u53cacity\u5b57\u6bb5\uff1b\u4e3a2\u65f6\u5728feed\u5361\u7247\u5de6\u4e0a\u89d2\u5c55\u793a\u597d\u53cbicon\u53ca \u597d\u53cbAB\uff0cA\u4e3a friend_name\u5b57\u6bb5\uff08\u53ef\u80fd\u4e3a\u7a7a\uff09\uff0cB\u4e3areason\u5b57\u6bb5\r\n\r\n\u540c\u57cePOI\r\n\u540c\u57cefeed\u4e0bmedia\u5b57\u6bb5\u4e2dposition\u5b57\u6bb5\u5b58\u5728\u65f6\u5c55\u793a\u548c\u63a8\u8350\u7406\u7531\u7c7b\u4f3c\u7684UI\r\n\r\n\u5f53\u5b57\u6570\u8fbe\u5230\u4e00\u5b9a\u9650\u5236\u5c06\u8d85\u51fa\u5c4f\u5e55\u65f6\uff08\u5ba2\u6237\u7aefUI\u5224\u65ad\uff09\uff0c\u622a\u65ad\u5b57\u7b26\u4e32\u7528...\u4ee3\u66ff\u5c55\u793a\u3002\u5982\u679c\u662f\u63a8\u8350\u7406\u7531\uff0c\u53ea\u622a\u65adfriend_name\u5b57\u6bb5",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=guojiangtao",
      "name": "guojiangtao",
      "key": "guojiangtao",
      "emailAddress": "guojiangtao@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11141",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11141",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11141",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11141"
      },
      "displayName": "guojiangtao",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-28T21:47:42.000+0800",
    "updated": "2017-11-29T20:31:30.529+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####\n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [29/Nov/2017 12:31:30] "POST /webhook/jira?user_id=guojiangtao&user_key=guojiangtao HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1511958923057,
  "webhookEvent": "comment_updated",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/125764/comment/58280",
    "id": "58280",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=zhangrenfeng",
      "name": "zhangrenfeng",
      "key": "zhangrenfeng",
      "emailAddress": "zhangrenfeng@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5f20\u4ec1\u5cf0",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010\u63d0\u6d4b\u529f\u80fd\u3011 \u90ed\u6c5f\u6d9b doing\r\n  1. \u9690\u79c1\u589e\u52a0\u7981\u6b62\u975e\u5173\u6ce8\u6211\u7684\u4eba\u8bc4\u8bba\r\n  2. App\u8c03\u8d77\u4e0a\u62a5\u89c4\u8303\r\n  3. Profile\u9875\u6587\u6848\u4f18\u5316\r\n  4. \u89c6\u9891feed\u9700\u6c42: \u63a8\u8350\u7406\u7531\r\n  5. \u53cd\u4f5c\u5f0aAPI\u52a0\u5bc6\r\n\r\n\u3010\u5206\u652f\u3011 \r\n  feature/2.9_zhangrenfeng\r\n\r\n\u3010\u7ec6\u8282\u63cf\u8ff0&\u98ce\u9669\u63d0\u793a\u3011 \r\n  1. \u9690\u79c1\u589e\u52a0\u7981\u6b62\u975e\u5173\u6ce8\u6211\u7684\u4eba\u8bc4\u8bba IDL: https://code.byted.org/hotsoon/idl/blob/master/src/data/user.proto \u5b57\u6bb5: allow_unfollower_comment\r\n  2. App\u8c03\u8d77\u4e0a\u62a5\u89c4\u8303: \u57cb\u70b9\u533a\u5206\u70b9\u51fbicon\u542f\u52a8\u548c\u4ecewidget\u542f\u52a8\r\n  3. Profile\u9875\u6587\u6848\u4f18\u5316, \u8be5\u6587\u6848\u5b8c\u5168\u7531\u540e\u7aef\u63a7\u5236, \u786e\u4fdd\u540e\u7aef\u4e0b\u53d1\u7684\u6570\u636e\u6b63\u786e\r\n  4. \u89c6\u9891feed\u9700\u6c42\u4e4b\u63a8\u8350\u7406\u7531 IDL: https://code.byted.org/hotsoon/idl/merge_requests/312/diffs \u5b57\u6bb5: recommend_reason\r\n  5. \u53cd\u4f5c\u5f0aAPI\u52a0\u5bc6, \u8fdb\u884c\u5b9e\u540d\u8ba4\u8bc1\uff0c\u63d0\u4ea4\u7ed3\u7b97\u4e2a\u4eba\u4fe1\u606f\u65f6\u5bf9\u5176\u4e2d\u7684\u654f\u611f\u5b57\u6bb5(\u5982:\u59d3\u540d\uff0c\u8eab\u4efd\u8bc1\u53f7, \u94f6\u884c\u5361\u53f7\uff0c\u624b\u673a\u53f7\u7b49)\u52a0\u5bc6, \u7528\u6237\u5982\u679c\u5df2\u7ecf\u8ba4\u8bc1\u5219\u5728\u8bf7\u6c42\u4e2a\u4eba\u7ed3\u7b97\u4fe1\u606f\u65f6, \u9700\u8981\u5bf9\u8fd4\u56de\u7684\u5b57\u6bb5\u8fdb\u884c\u89e3\u5bc6, \u8bf7\u786e\u4fdd\u4e0a\u8ff0\u7f51\u7edc\u8bf7\u6c42\u64cd\u4f5c\u6b63\u5e38.",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=guojiangtao",
      "name": "guojiangtao",
      "key": "guojiangtao",
      "emailAddress": "guojiangtao@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11141",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11141",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11141",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11141"
      },
      "displayName": "guojiangtao",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-29T13:16:31.000+0800",
    "updated": "2017-11-29T20:35:23.057+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####\n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [29/Nov/2017 12:35:23] "POST /webhook/jira?user_id=guojiangtao&user_key=guojiangtao HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1511959417038,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127553/comment/58412",
    "id": "58412",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=changzhiqiang",
      "name": "changzhiqiang",
      "key": "changzhiqiang",
      "emailAddress": "changzhiqiang@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=changzhiqiang&avatarId=11416",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=changzhiqiang&avatarId=11416",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=changzhiqiang&avatarId=11416",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=changzhiqiang&avatarId=11416"
      },
      "displayName": "\u5e38\u5fd7\u5f3a",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u53cb\u76df\u7684service\u91cc\u9762\u6ca1\u6709create\u5b8c\u6210",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=changzhiqiang",
      "name": "changzhiqiang",
      "key": "changzhiqiang",
      "emailAddress": "changzhiqiang@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=changzhiqiang&avatarId=11416",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=changzhiqiang&avatarId=11416",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=changzhiqiang&avatarId=11416",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=changzhiqiang&avatarId=11416"
      },
      "displayName": "\u5e38\u5fd7\u5f3a",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-29T20:43:37.038+0800",
    "updated": "2017-11-29T20:43:37.038+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [29/Nov/2017 12:43:37] "POST /webhook/jira?user_id=changzhiqiang&user_key=changzhiqiang HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1511959437811,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127855/comment/58413",
    "id": "58413",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=weizili",
      "name": "weizili",
      "key": "weizili",
      "emailAddress": "weizili@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "weizili",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u786e\u8ba4",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=weizili",
      "name": "weizili",
      "key": "weizili",
      "emailAddress": "weizili@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "weizili",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-29T20:43:57.811+0800",
    "updated": "2017-11-29T20:43:57.811+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [29/Nov/2017 12:43:57] "POST /webhook/jira?user_id=weizili&user_key=weizili HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1511959774545,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/125764/comment/58414",
    "id": "58414",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=liudongdong",
      "name": "liudongdong",
      "key": "liudongdong",
      "emailAddress": "liudongdong@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=liudongdong&avatarId=11324",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=liudongdong&avatarId=11324",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=liudongdong&avatarId=11324",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=liudongdong&avatarId=11324"
      },
      "displayName": "\u5218\u4e1c\u4e1c",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010\u63d0\u6d4b\u529f\u80fd\u3011\r\n1. \u89c6\u9891Feed\uff0ccell\u5361\u7247AB\r\n2. Feed\uff0ccell\u5c01\u9762\u7b97\u8272\r\n3. \u540c\u57ceFeed\uff0c\u663e\u793a\u5730\u7406\u4f4d\u7f6ePOI\u540d\u79f0\r\n\r\n\u3010\u5206\u652f\u3011 \r\nfeature/2.9.0_feed_dd\r\n\r\n\u3010\u7ec6\u8282\u63cf\u8ff0&\u98ce\u9669\u63d0\u793a\u3011 \r\n1. \u89c6\u9891Feed\uff0ccell\u5361\u7247AB\r\n    \u53ea\u5728\u89c6\u9891Feed\u751f\u6548\uff0c\u5305\u542b\uff1a\u5e7f\u544a&\u89c6\u9891\r\n\r\n    \u89c6\u9891\uff1a\u89c6\u9891item\u589e\u52a0\u5b57\u6bb5cell_style\uff0c\u8868\u793a\u6837\u5f0fAB\r\n    \u5e7f\u544a\uff1a\u89c6\u9891item\u589e\u52a0\u5b57\u6bb5cell_style\uff0c\u8868\u793a\u6837\u5f0fAB\r\n    cell_style\u6574\u578b\u503c\uff1a0\u4ee3\u8868\u7ebf\u4e0a\u6837\u5f0f\u30011\u4ee3\u8868zeplin\u7a3f\u5b50\"feed_AB_01_01\"\u6837\u5f0f\u30012\u4ee3\u8868zeplin\u7a3f\u5b50\"feed_AB_01_02\"\u6837\u5f0f\u30013\u4ee3\u8868zeplin\u7a3f\u5b50\"feed_AB_02_01\"\u6837\u5f0f\r\n\r\n2. Feed\uff0ccell\u5c01\u9762\u7b97\u8272\r\n    \u5728\u89c6\u9891Feed\u3001\u540c\u57ceFeed\u3001\u5173\u6ce8Feed\u3001\u4e2a\u4ebaprofile\u3001\u4ed6\u4ebaprofile\u751f\u6548\uff0c\u5305\u542b\uff1a\u89c6\u9891\u3001\u5e7f\u544a\u3001\u6d3b\u52a8\u3001\u76f4\u64ad\r\n    \u989c\u8272\u503c\u7531\u540e\u53f0\u8ba1\u7b97\u8fd4\u56de\u63a7\u5236\r\n\r\n    \u89c6\u9891\uff1a\u89c6\u9891item\u589e\u52a0\u5b57\u6bb5video.cover.avg_color\u8868\u793a\u989c\u8272\u503c\r\n    \u5e7f\u544a\uff1a\u989c\u8272\u503c\u672c\u5730\u5199\u6b7b\"CCCCCC\"\r\n    \u6d3b\u52a8\uff1a\u6d3b\u52a8item\u589e\u52a0\u5b57\u6bb5avg_color\u8868\u793a\u989c\u8272\u503c\r\n    \u76f4\u64ad\uff1a\u76f4\u64aditem\u589e\u52a0cover.avg_color\u8868\u793a\u989c\u8272\u503c\r\n\r\n3. \u540c\u57ceFeed\uff0c\u663e\u793a\u5730\u7406\u4f4d\u7f6ePOI\u540d\u79f0\r\n    \u53ea\u5728\u540c\u57ceFeed\u751f\u6548\uff0c\u5305\u542b\uff1a\u89c6\u9891\r\n    \u89c6\u9891item\u589e\u52a0\u5b57\u6bb5\uff1aposition\uff0c\u8868\u793a\u5730\u7406\u4f4d\u7f6e\u4fe1\u606f\r\n\r\n4. \u63a5\u53e3\u6682\u65f6\u672a\u4e0a\u7ebf\uff0c\u8bf7\u54a8\u8be2 @\u6768\u6d9b \r\n    https://code.byted.org/hotsoon/idl/merge_requests/312/diffs",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=liudongdong",
      "name": "liudongdong",
      "key": "liudongdong",
      "emailAddress": "liudongdong@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=liudongdong&avatarId=11324",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=liudongdong&avatarId=11324",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=liudongdong&avatarId=11324",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=liudongdong&avatarId=11324"
      },
      "displayName": "\u5218\u4e1c\u4e1c",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-29T20:49:34.545+0800",
    "updated": "2017-11-29T20:49:34.545+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [29/Nov/2017 12:49:34] "POST /webhook/jira?user_id=liudongdong&user_key=liudongdong HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1511962057342,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/125764/comment/58418",
    "id": "58418",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=liuqing.90",
      "name": "liuqing.90",
      "key": "liuqing.90",
      "emailAddress": "liuqing.90@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5218\u9752",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010\u63d0\u6d4b\u529f\u80fd\u3011 \r\n\u5e95tab refresh\r\n\u3010\u5206\u652f\u3011 \r\nfeature/2.9.0_refresh\r\n\u3010\u7ec6\u8282\u63cf\u8ff0&\u98ce\u9669\u63d0\u793a\u3011 \r\n\u7531settings\u4e2d\u7684refresh_icon_num\u51b3\u5b9a\uff0c\u5982\u679c<0\u5219\u4f7f\u7528\u9ed8\u8ba4\u7684\uff0c=0\u663e\u793aicon\u4e0d\u663e\u793a\u6570\u5b57\uff0c>0\u663e\u793aicon\u4e14\u663e\u793a\u6570\u5b57\u3002",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=liuqing.90",
      "name": "liuqing.90",
      "key": "liuqing.90",
      "emailAddress": "liuqing.90@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5218\u9752",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-29T21:27:37.342+0800",
    "updated": "2017-11-29T21:27:37.342+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [29/Nov/2017 13:27:37] "POST /webhook/jira?user_id=liuqing.90&user_key=liuqing.90 HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1511962088486,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/125783/comment/58419",
    "id": "58419",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=wanghuisong",
      "name": "wanghuisong",
      "key": "wanghuisong",
      "emailAddress": "wanghuisong@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u738b\u6167\u677e",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010\u63d0\u6d4b\u529f\u80fd\u3011 \r\n\u8fbe\u4eba\u7535\u5546\u529f\u80fd\r\n\u3010\u5206\u652f\u3011 \r\nlive_2.9.0_commercial_tunion\r\n\u3010\u7ec6\u8282\u63cf\u8ff0&\u98ce\u9669\u63d0\u793a\u3011 \r\n\u65b0\u589e\u4e86\u8fbe\u4eba\u7535\u5546\u529f\u80fd\u3002\u9700\u8981\u6d4b\u8bd5\u4f5c\u4e3a \u201c\u8fbe\u4eba\u201d \u548c \u201c\u666e\u901a\u89c6\u9891\u89c2\u770b\u8005\u201c \u5728 \u201d\u672a\u5b9e\u540d\u8ba4\u8bc1\u201c\uff0c \u201d\u5b9e\u540d\u8ba4\u8bc1\u4e2d\u201c\uff0c \u201d\u5b9e\u540d\u8ba4\u8bc1\u6210\u529f\u201c\uff0c \u201d\u5b9e\u540d\u8ba4\u8bc1\u5931\u8d25\u201c \u60c5\u51b5\u4e0b\u67e5\u770b\uff0c\u7ba1\u7406\u5546\u54c1\u7684\u529f\u80fd",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=wanghuisong",
      "name": "wanghuisong",
      "key": "wanghuisong",
      "emailAddress": "wanghuisong@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u738b\u6167\u677e",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-29T21:28:08.486+0800",
    "updated": "2017-11-29T21:28:08.486+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [29/Nov/2017 13:28:08] "POST /webhook/jira?user_id=wanghuisong&user_key=wanghuisong HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1511962565208,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/125762/comment/58420",
    "id": "58420",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=wangshuai.lean",
      "name": "wangshuai.lean",
      "key": "wangshuai.lean",
      "emailAddress": "wangshuai.lean@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u738b\u5e05",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010\u63d0\u6d4b\u529f\u80fd\u3011 \r\n\u79c1\u4fe1\u89c6\u9891\u5206\u4eab\r\n\u3010\u5206\u652f\u3011 \r\nlive_2.9.0_chatshare\r\n\u3010\u7ec6\u8282\u63cf\u8ff0\u3011 \r\n\u6ce8\u610f\u4f5c\u8005\u770b\u81ea\u5df1\u7684\u89c6\u9891\u5206\u4eab\u548c\u8bbf\u5ba2\u770b\u522b\u4eba\u7684\u89c6\u9891\u5206\u4eab\u5728\u767b\u5f55\u4e14\u4e2dAB\u65f6\u662f\u5426\u90fd\u6709\u53d1\u9001\u7ed9\u597d\u53cb\r\n\u5728\u672a\u767b\u5f55\u662f\u5426\u90fd\u662f\u6ca1\u6709\r\n\u79c1\u4fe1\u7684\u57fa\u672cAB\u5165\u53e3\u53ca\u5176\u4ed6\u57fa\u672c\u529f\u80fd\u662f\u5426\u6b63\u5e38\r\n\u79c1\u4fe1\u9047\u5230\u4e0d\u8ba4\u8bc6\u7684\u6d88\u606f\u7c7b\u578b \u662f\u5426\u4f1a\u63d0\u793a\u5347\u7ea7\u65b0\u7248\u672c",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=wangshuai.lean",
      "name": "wangshuai.lean",
      "key": "wangshuai.lean",
      "emailAddress": "wangshuai.lean@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u738b\u5e05",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-29T21:36:05.208+0800",
    "updated": "2017-11-29T21:36:05.208+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [29/Nov/2017 13:36:05] "POST /webhook/jira?user_id=wangshuai.lean&user_key=wangshuai.lean HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1511962893777,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/125784/comment/58421",
    "id": "58421",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=pangcheng",
      "name": "pangcheng",
      "key": "pangcheng",
      "emailAddress": "pangcheng@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11135",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11135",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11135",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11135"
      },
      "displayName": "\u5e9e\u94d6",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\r\n\u3010\u63d0\u6d4b\u529f\u80fd\u3011 \r\n\u8fbe\u4eba\u7535\u5546\r\n\u3010\u5206\u652f\u3011 \r\n/feature/2.9.0_e-commerce\r\n\u3010\u7ec6\u8282\u63cf\u8ff0&\u98ce\u9669\u63d0\u793a\u3011 \r\n1\u3001settings\u63a7\u5236\u5b57\u6bb5enable_show_commerce_goods\uff1a\u7528\u6237\u662f\u5426\u5c55\u73b0\u5546\u54c1\uff0cshow_after_n_play\uff1a\u7b2c\u51e0\u6b21\u5f00\u59cb\u52a8\u753b\uff0cshow_after_n_sec\uff1a\u67d0\u6b21\u7684\u7b2c\u51e0\u79d2\uff0cshow_sec\uff1a\u6c14\u6ce1\u5c55\u73b0\u65f6\u95f4\u3002commerce_open_taobao_type\uff1a\u8df3\u6dd8\u5b9d\u7684\u65b9\u5f0f\uff081:app\uff0c2:web\uff09\uff0ccommerce_goods_detail_button_text\uff1a\u5546\u54c1\u5361\u7247\u5927\u6309\u94ae\u6587\u6848\u3002\r\n2\u3001user\u63a7\u5236\u5b57\u6bb5enable_show_commerce_sale\u662f\u5426\u80fd\u552e\u5356\u5546\u54c1\r\n3\u3001\u89c6\u9891item\u63a7\u5236\u5b57\u6bb5has_goods\uff1a\u8be5\u89c6\u9891\u662f\u5426\u6709\u5546\u54c1\uff0cedit_goods_url\uff1a\u7f16\u8f91\u5546\u54c1\u9875\u7684url\u3002\r\n4\u3001\u83b7\u53d6\u8be5\u89c6\u9891\u7684\u5546\u54c1\u63a5\u53e3\uff1a/hotsoon/commerce/item_goods_info/\uff0c\u83b7\u53d6\u7528\u6237\u534f\u8bae\u72b6\u6001\u63a5\u53e3\uff1a/hotsoon/user/settings/allow/\uff08\u8fd4\u56de\u5bf9\u5e94key\u7684\u503c\u4e3a1\u8868\u793a\u5df2\u540c\u610f\uff09\uff0c\u66f4\u65b0\u534f\u8bae\u72b6\u6001\u63a5\u53e3\uff1a/hotsoon/user/settings/_update_allow/\u3002\r\n5\u3001H5\u4f7f\u7528\u7684\u63a5\u53e3\uff0c\u7ed1\u5b9a\u5546\u54c1\u548c\u89c6\u9891\uff1a/hotsoon/commerce/item_goods_bind/\uff0c\u83b7\u53d6\u7528\u6237\u7684\u540e\u53f0\u5546\u54c1\uff1a/hotsoon/commerce/user_goods_info/\uff0c\r\n6\u3001\u5b9e\u540d\u8ba4\u8bc1\u662f\u5426\u901a\u8fc7\u5b57\u6bb5user\u91cc\u7684verify_status\r\n7\u3001\u4e0b\u9762\u624d\u662f\u91cd\u70b9\r\n8\u3001\u9700\u8981\u91cd\u70b9\u6d4b\u8bd5\u4e0a\u4e0b\u6ed1\u52a8\u540e\uff0c\u65b0\u7684\u9875\u9762\u5546\u54c1\u52a8\u6548\uff0c\u6570\u636e\u6b63\u5e38\u3002\r\n9\u3001\u505a\u52a8\u753b\u6216\u8005\u70b9\u51fb\u65f6\u624d\u4f1a\u62c9\u53d6\u5546\u54c1\u4fe1\u606f\uff0c\u4e0d\u4f1a\u62c9\u53d6\u591a\u6b21\u3002\r\n10\u3001\u5546\u54c1\u5361\u7247\u652f\u6301\u52a0\u8f7d\u4e2d\u548c\u52a0\u8f7d\u5931\u8d25\u7684\u72b6\u6001\uff0c\u70b9\u51fb\u65f6\u5982\u679c\u6ca1\u6709\u6570\u636e\u663e\u793a\u52a0\u8f7d\u4e2d\u72b6\u6001\u3002\r\n12\u3001\u7f16\u8f91\u5546\u54c1\u540e\uff0c\u5982\u679c\u6709\u5546\u54c1\u4f1a\u5237\u65b0\u5546\u54c1\u4fe1\u606f\u3002\r\n13\u3001\u5546\u54c1\u5361\u7247\u51fa\u73b0\u65f6\uff0c\u4e0d\u51fa\u5206\u4eab\u5f3a\u5f15\u5bfc\uff0c\u4f46\u662f\u548c\u522b\u7684\u5f15\u5bfc\u6ca1\u6709\u4e92\u65a5\u3002\r\n14\u3001\u8df3\u8f6c\u5230\u5546\u54c1\u8be6\u60c5\u9875\u6216\u6dd8\u5b9d\u6536\u8d77\u6216\u5546\u54c1\u7f16\u8f91\u9875\u4f1a\u6536\u8d77\u5361\u7247\u3002\r\n15\u3001\u8df3\u8f6c\u5230\u6dd8\u5b9d\u5728\u6dd8\u5b9d\u91cc\u4f1a\u6709\u4e00\u4e2a\u70b9\u51fb\u80fd\u8fd4\u56de\u706b\u5c71\u7684\u7bad\u5934\u3002\r\n16\u3001\u5b9e\u540d\u8ba4\u8bc1\u6210\u529f\u70b9\u51fb\u7ba1\u7406\u5546\u54c1\u540e\u518d\u8fd4\u56de\u5e94\u8be5\u76f4\u63a5\u56de\u5230\u8be6\u60c5\u9875\u3002\r\n17\u3001\u5b9e\u540d\u8ba4\u8bc1\u597d\u50cfiOS\u5df2\u7ecf\u4e0d\u652f\u6301\u829d\u9ebb\u8ba4\u8bc1\u4e86\uff0c\u4e0a\u6b21\u4edd\u7476\u8bf4\u4e0b\u6389\u4e86\u3002\r\n18\u3001\u6dd8\u5b9d\u6388\u6743\u8fc7\u540e\uff0cH5\u77ed\u65f6\u95f4\u5185\u4e0d\u9700\u8981\u518d\u6b21\u767b\u5f55\u3002\r\n",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=pangcheng",
      "name": "pangcheng",
      "key": "pangcheng",
      "emailAddress": "pangcheng@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11135",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11135",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11135",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11135"
      },
      "displayName": "\u5e9e\u94d6",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-29T21:41:33.777+0800",
    "updated": "2017-11-29T21:41:33.777+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [29/Nov/2017 13:41:33] "POST /webhook/jira?user_id=pangcheng&user_key=pangcheng HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1511962985468,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/125762/comment/58422",
    "id": "58422",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=pengzipei",
      "name": "pengzipei",
      "key": "pengzipei",
      "emailAddress": "pengzipei@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5f6d\u5b50\u6c9b",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010\u63d0\u6d4b\u529f\u80fd\u3011\r\n\u89c6\u9891Feed-\u5c01\u9762\u6539\u8272\r\n\u3010\u5206\u652f\u3011\r\nlive_2.9_feed_cover_color\r\n\u3010\u7ec6\u8282\u63cf\u8ff0\u3011\r\n\u5361\u7247\uff1a\u89c6\u9891\u3001\u5e7f\u544a\u3001\u6d3b\u52a8\u3001\u76f4\u64ad\u90fd\u9700\u8981\u8ba1\u7b97\u8272\u503c\r\n\u573a\u666f\uff1a\u89c6\u9891Feed\u3001\u5173\u6ce8Feed\u3001\u540c\u57ceFeed\u3001\u4e2a\u4ebaprofile\u3001\u4ed6\u4ebaprofile\uff1b\u76f4\u64adfeed\u4e0d\u4e0a\u7ebf\r\n\u5e7f\u544a\u5361\u7247\u53ca\u5176\u4ed6\u5361\u7247avgColor\u4e0d\u5b58\u5728\u7684\u65f6\u5019\uff0c\u56fa\u5b9a\u4e3a\u989c\u8272\uff1a\u7070\u8272 CCCCCC",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=pengzipei",
      "name": "pengzipei",
      "key": "pengzipei",
      "emailAddress": "pengzipei@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5f6d\u5b50\u6c9b",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-29T21:43:05.468+0800",
    "updated": "2017-11-29T21:43:05.468+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [29/Nov/2017 13:43:05] "POST /webhook/jira?user_id=pengzipei&user_key=pengzipei HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1511964138170,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/125762/comment/58423",
    "id": "58423",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=pengzipei",
      "name": "pengzipei",
      "key": "pengzipei",
      "emailAddress": "pengzipei@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5f6d\u5b50\u6c9b",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010\u63d0\u6d4b\u529f\u80fd\u3011\r\n\u89c6\u9891feed-refresh\u529f\u80fd\r\n\u3010\u5206\u652f\u3011\r\nlive_2.9_feed_refresh\r\n\u3010\u7ec6\u8282\u63cf\u8ff0&\u98ce\u9669\u63d0\u793a\u3011\r\nsetting\u63a5\u53e3\u4e0brefresh_icon_num\u5b57\u6bb5\u5224\u65ad\u662f\u5426\u5c55\u793a\uff0c<0\u4e3a\u4e0d\u5c55\u793a\uff0c=0\u4ec5\u5c55\u793a\u5237\u65b0\u6309\u94ae\uff0c>0\u65f6\u5c55\u793a\u5237\u65b0\u6570\u5b57\r\n\u5f53\u7528\u6237\u5728\u4e3b\u9875\u65f6\uff0c\u5c55\u793a\u5237\u65b0\u6309\u94ae\uff0c\u4e3b\u9875\u53d8\u4e3a\u3010\u5237\u65b0\u3011\r\n\u7528\u6237\u5728\u4e3b\u9875\u8d85\u8fc710\u79d2\u6ca1\u6709\u4efb\u4f55\u6ed1\u52a8\uff0c\u5c55\u793a\u5237\u65b0\u6570\u5b57\r\n\u5237\u65b0\u65f6\u5237\u65b0icon\u6709\u52a8\u753b\uff0c\u5237\u65b0\u5b8c\u6210\u65f6\u52a8\u753b\u7ed3\u675f\uff0c\u7ea2\u70b9\u6d88\u5931\r\n",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=pengzipei",
      "name": "pengzipei",
      "key": "pengzipei",
      "emailAddress": "pengzipei@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5f6d\u5b50\u6c9b",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-29T22:02:18.170+0800",
    "updated": "2017-11-29T22:02:18.170+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [29/Nov/2017 14:02:18] "POST /webhook/jira?user_id=pengzipei&user_key=pengzipei HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1511965624582,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127557/comment/58424",
    "id": "58424",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=wangzhong",
      "name": "wangzhong",
      "key": "wangzhong",
      "emailAddress": "wangzhong@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11147",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11147",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11147",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11147"
      },
      "displayName": "\u738b\u91cd",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u5df2\u57281.2.10 beta1\u4fee\u590d",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=wangzhong",
      "name": "wangzhong",
      "key": "wangzhong",
      "emailAddress": "wangzhong@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11147",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11147",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11147",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11147"
      },
      "displayName": "\u738b\u91cd",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-29T22:27:04.582+0800",
    "updated": "2017-11-29T22:27:04.582+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [29/Nov/2017 14:27:04] "POST /webhook/jira?user_id=wangzhong&user_key=wangzhong HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1511977708307,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127434/comment/58427",
    "id": "58427",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=jiwei",
      "name": "jiwei",
      "key": "jiwei",
      "emailAddress": "jiwei@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u7eaa\u73ae",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u6b63\u5e38\u73b0\u8c61\u3002\u53d1\u5e03\u7684\u5c0f\u89c6\u9891\u4f1a\u4fdd\u5b58\u5728\u672c\u5730\u6570\u636e\u5e93\uff1b\u8fdb\u5165\u5c0f\u89c6\u9891tab\u65f6\u4f1aload\u672c\u5730\u6570\u636e\uff1b\u5982\u679cload\u4e0d\u5230\u5219\u76f4\u63a5\u8bf7\u6c42\u7f51\u7edc\u6570\u636e\u3002\u7b2c\u4e00\u6b21\u8fdb\u5165\u65f6\u8fd8\u6ca1\u6709\u672c\u5730\u6570\u636e\uff0c\u5982\u679c\u53d1\u5e03\u4e86\u5c0f\u89c6\u9891\uff0c\u90a3\u4e48\u786e\u5b9e\u4f1aload\u5230\u8fd9\u4e00\u4e2a\u5c0f\u89c6\u9891\u7684\u6570\u636e\u5e76\u5c55\u793a\u51fa\u6765\uff1b\u4e4b\u540eload\u5230\u65b0\u7684\u6570\u636e\u4ece\u800c\u66f4\u65b0\u5217\u8868\u3002\u53ef\u4ee5\u8003\u8651\u4f5c\u4e3a\u4f53\u9a8c\u4f18\u5316\u8ddf\u8fdb\u3002",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=jiwei",
      "name": "jiwei",
      "key": "jiwei",
      "emailAddress": "jiwei@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u7eaa\u73ae",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T01:48:28.307+0800",
    "updated": "2017-11-30T01:48:28.307+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [29/Nov/2017 17:48:28] "POST /webhook/jira?user_id=jiwei&user_key=jiwei HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512007916450,
  "webhookEvent": "worklog_created",
  "worklog": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127077/worklog/13821",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=fanlinlin.320",
      "name": "fanlinlin.320",
      "key": "fanlinlin.320",
      "emailAddress": "fanlinlin.320@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "fanlinlin.320",
      "active": true,
      "timeZone": "PRC"
    },
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=fanlinlin.320",
      "name": "fanlinlin.320",
      "key": "fanlinlin.320",
      "emailAddress": "fanlinlin.320@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "fanlinlin.320",
      "active": true,
      "timeZone": "PRC"
    },
    "comment": "\u524d\u540e\u7aef\u8054\u8c03\u5b8c\u6bd5\uff0c\u5df2\u7ecf\u63d0\u6d4b",
    "created": "2017-11-30T10:11:56.450+0800",
    "updated": "2017-11-30T10:11:56.450+0800",
    "started": "2017-11-27T10:09:00.000+0800",
    "timeSpent": "4m",
    "timeSpentSeconds": 240,
    "id": "13821",
    "issueId": "127077"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####\n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 02:11:56] "POST /webhook/jira?user_id=fanlinlin.320&user_key=fanlinlin.320 HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512007930787,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127835/comment/58428",
    "id": "58428",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=fulianjie",
      "name": "fulianjie",
      "key": "fulianjie",
      "emailAddress": "fulianjie@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=fulianjie&avatarId=11469",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=fulianjie&avatarId=11469",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=fulianjie&avatarId=11469",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=fulianjie&avatarId=11469"
      },
      "displayName": "\u4ed8\u8fde\u6770",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u7ebf\u4e0a\u76840.1\u7248\u672c\uff0c\u6ca1\u6709\u505a\u5fc3\u8df3\u903b\u8f91\r\n\r\n\u5f53\u957f\u94fe\u5f02\u5e38\u540e\uff0c\u95ee\u9898client\u6ca1\u6709\u505a\u4fee\u6539\u89e6\u53d1\u4e3b\u52a8commit\u7684\u8bdd\uff0c\u65e0\u6cd5\u6536\u5230\u8fdc\u7aef\u7684revision\r\n\r\n11.30\u4eca\u5929\u4f1a\u505a0.2optimize\u4e0a\u7ebf\uff0c\u4f1a\u6709\u5fc3\u8df3\u7684\u8865\u507f\uff0c\u5c06\u4fee\u590d\u8fd9\u4e2a\u95ee\u9898\r\n",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=fulianjie",
      "name": "fulianjie",
      "key": "fulianjie",
      "emailAddress": "fulianjie@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=fulianjie&avatarId=11469",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=fulianjie&avatarId=11469",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=fulianjie&avatarId=11469",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=fulianjie&avatarId=11469"
      },
      "displayName": "\u4ed8\u8fde\u6770",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T10:12:10.787+0800",
    "updated": "2017-11-30T10:12:10.787+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 02:12:10] "POST /webhook/jira?user_id=fulianjie&user_key=fulianjie HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512007951000,
  "webhookEvent": "worklog_updated",
  "worklog": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127077/worklog/13821",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=fanlinlin.320",
      "name": "fanlinlin.320",
      "key": "fanlinlin.320",
      "emailAddress": "fanlinlin.320@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "fanlinlin.320",
      "active": true,
      "timeZone": "PRC"
    },
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=fanlinlin.320",
      "name": "fanlinlin.320",
      "key": "fanlinlin.320",
      "emailAddress": "fanlinlin.320@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "fanlinlin.320",
      "active": true,
      "timeZone": "PRC"
    },
    "comment": "\u524d\u540e\u7aef\u8054\u8c03\u5b8c\u6bd5\uff0c\u5df2\u7ecf\u63d0\u6d4b",
    "created": "2017-11-30T10:11:56.000+0800",
    "updated": "2017-11-30T10:12:31.000+0800",
    "started": "2017-11-27T10:09:00.000+0800",
    "timeSpent": "4h",
    "timeSpentSeconds": 14400,
    "id": "13821",
    "issueId": "127077"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####\n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 02:12:31] "POST /webhook/jira?user_id=fanlinlin.320&user_key=fanlinlin.320 HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512008114796,
  "webhookEvent": "worklog_created",
  "worklog": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/119132/worklog/13822",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=fanlinlin.320",
      "name": "fanlinlin.320",
      "key": "fanlinlin.320",
      "emailAddress": "fanlinlin.320@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "fanlinlin.320",
      "active": true,
      "timeZone": "PRC"
    },
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=fanlinlin.320",
      "name": "fanlinlin.320",
      "key": "fanlinlin.320",
      "emailAddress": "fanlinlin.320@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "fanlinlin.320",
      "active": true,
      "timeZone": "PRC"
    },
    "comment": "mp\u548c\u79fb\u52a8\u7aef\u5747\u5f00\u53d1\u8054\u8c03\u5b8c\u6bd5\uff0c\u5df2\u63d0\u6d4b",
    "created": "2017-11-30T10:15:14.796+0800",
    "updated": "2017-11-30T10:15:14.796+0800",
    "started": "2017-11-27T10:13:00.000+0800",
    "timeSpent": "2d",
    "timeSpentSeconds": 57600,
    "id": "13822",
    "issueId": "119132"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####\n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 02:15:14] "POST /webhook/jira?user_id=fanlinlin.320&user_key=fanlinlin.320 HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512008208000,
  "webhookEvent": "worklog_updated",
  "worklog": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127077/worklog/13821",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=fanlinlin.320",
      "name": "fanlinlin.320",
      "key": "fanlinlin.320",
      "emailAddress": "fanlinlin.320@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "fanlinlin.320",
      "active": true,
      "timeZone": "PRC"
    },
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=fanlinlin.320",
      "name": "fanlinlin.320",
      "key": "fanlinlin.320",
      "emailAddress": "fanlinlin.320@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "fanlinlin.320",
      "active": true,
      "timeZone": "PRC"
    },
    "comment": "\u524d\u540e\u7aef\u8054\u8c03\u5b8c\u6bd5\uff0c\u5df2\u7ecf\u63d0\u6d4b",
    "created": "2017-11-30T10:11:56.000+0800",
    "updated": "2017-11-30T10:16:48.000+0800",
    "started": "2017-11-27T10:09:00.000+0800",
    "timeSpent": "1d 4h",
    "timeSpentSeconds": 43200,
    "id": "13821",
    "issueId": "127077"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####\n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 02:16:48] "POST /webhook/jira?user_id=fanlinlin.320&user_key=fanlinlin.320 HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512008235000,
  "webhookEvent": "worklog_updated",
  "worklog": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127077/worklog/13821",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=fanlinlin.320",
      "name": "fanlinlin.320",
      "key": "fanlinlin.320",
      "emailAddress": "fanlinlin.320@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "fanlinlin.320",
      "active": true,
      "timeZone": "PRC"
    },
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=fanlinlin.320",
      "name": "fanlinlin.320",
      "key": "fanlinlin.320",
      "emailAddress": "fanlinlin.320@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "fanlinlin.320",
      "active": true,
      "timeZone": "PRC"
    },
    "comment": "\u524d\u540e\u7aef\u5f00\u53d1\u8054\u8c03\u5b8c\u6bd5\uff0c\u5df2\u7ecf\u63d0\u6d4b",
    "created": "2017-11-30T10:11:56.000+0800",
    "updated": "2017-11-30T10:17:15.000+0800",
    "started": "2017-11-27T10:09:00.000+0800",
    "timeSpent": "2d",
    "timeSpentSeconds": 57600,
    "id": "13821",
    "issueId": "127077"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####\n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 02:17:16] "POST /webhook/jira?user_id=fanlinlin.320&user_key=fanlinlin.320 HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512008478351,
  "webhookEvent": "worklog_created",
  "worklog": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/121471/worklog/13823",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=fanlinlin.320",
      "name": "fanlinlin.320",
      "key": "fanlinlin.320",
      "emailAddress": "fanlinlin.320@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "fanlinlin.320",
      "active": true,
      "timeZone": "PRC"
    },
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=fanlinlin.320",
      "name": "fanlinlin.320",
      "key": "fanlinlin.320",
      "emailAddress": "fanlinlin.320@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "fanlinlin.320",
      "active": true,
      "timeZone": "PRC"
    },
    "comment": "1\u3001tce\u670d\u52a1\u5df2\u7ecf\u642d\u5efa\u5b8c\u6bd5\r\n2\u3001\u540e\u7aef\u63a5\u53e3\u5f00\u53d1\u4e2d\uff0c\u76ee\u524d\u5b8c\u621050%\u5de6\u53f3",
    "created": "2017-11-30T10:21:18.351+0800",
    "updated": "2017-11-30T10:21:18.351+0800",
    "started": "2017-11-28T10:17:00.000+0800",
    "timeSpent": "2d",
    "timeSpentSeconds": 57600,
    "id": "13823",
    "issueId": "121471"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####\n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 02:21:18] "POST /webhook/jira?user_id=fanlinlin.320&user_key=fanlinlin.320 HTTP/1.0" 200 -
INFO:werkzeug: * Running on http://0.0.0.0:3002/ (Press CTRL+C to quit)
INFO:root:
[jira
<^>
{
  "comment": {
    "body": "add a comment in story",
    "updateAuthor": {
      "displayName": "\u8d1d\u4fca\u9f99",
      "name": "beijunlong",
      "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
      "avatarUrls": {
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
      },
      "emailAddress": "beijunlong@bytedance.com",
      "key": "beijunlong",
      "active": "True",
      "timeZone": "PRC"
    },
    "created": "2017-11-28T20:19:17.695+0800",
    "self": "https://jira.bytedance.com/rest/api/2/issue/113608/comment/58158",
    "author": {
      "displayName": "\u8d1d\u4fca\u9f99",
      "name": "beijunlong",
      "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
      "avatarUrls": {
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
      },
      "emailAddress": "beijunlong@bytedance.com",
      "key": "beijunlong",
      "active": "True",
      "timeZone": "PRC"
    },
    "updated": "2017-11-28T20:19:17.695+0800",
    "id": "58158"
  },
  "timestamp": 1511871557701,
  "issue": {
    "fields": {
      "comment": {
        "total": 2,
        "startAt": 0,
        "comments": [
          {
            "body": "21334",
            "updateAuthor": {
              "displayName": "\u8d1d\u4fca\u9f99",
              "name": "beijunlong",
              "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
              "avatarUrls": {
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
              },
              "emailAddress": "beijunlong@bytedance.com",
              "key": "beijunlong",
              "active": "True",
              "timeZone": "PRC"
            },
            "created": "2017-10-11T16:03:55.000+0800",
            "self": "https://jira.bytedance.com/rest/api/2/issue/113608/comment/51846",
            "author": {
              "displayName": "\u8d1d\u4fca\u9f99",
              "name": "beijunlong",
              "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
              "avatarUrls": {
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
              },
              "emailAddress": "beijunlong@bytedance.com",
              "key": "beijunlong",
              "active": "True",
              "timeZone": "PRC"
            },
            "updated": "2017-10-11T16:03:55.000+0800",
            "id": "51846"
          },
          {
            "body": "add a comment in story",
            "updateAuthor": {
              "displayName": "\u8d1d\u4fca\u9f99",
              "name": "beijunlong",
              "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
              "avatarUrls": {
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
              },
              "emailAddress": "beijunlong@bytedance.com",
              "key": "beijunlong",
              "active": "True",
              "timeZone": "PRC"
            },
            "created": "2017-11-28T20:19:17.000+0800",
            "self": "https://jira.bytedance.com/rest/api/2/issue/113608/comment/58158",
            "author": {
              "displayName": "\u8d1d\u4fca\u9f99",
              "name": "beijunlong",
              "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
              "avatarUrls": {
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
              },
              "emailAddress": "beijunlong@bytedance.com",
              "key": "beijunlong",
              "active": "True",
              "timeZone": "PRC"
            },
            "updated": "2017-11-28T20:19:17.000+0800",
            "id": "58158"
          }
        ],
        "maxResults": 2
      },
      "environment": "None",
      "creator": {
        "displayName": "\u8d1d\u4fca\u9f99",
        "name": "beijunlong",
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "avatarUrls": {
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
        },
        "emailAddress": "beijunlong@bytedance.com",
        "key": "beijunlong",
        "active": "True",
        "timeZone": "PRC"
      },
      "aggregatetimeestimate": "None",
      "labels": [],
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-1/watchers",
        "watchCount": 2,
        "isWatching": "True"
      },
      "assignee": {
        "displayName": "\u8d1d\u4fca\u9f99",
        "name": "beijunlong",
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "avatarUrls": {
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
        },
        "emailAddress": "beijunlong@bytedance.com",
        "key": "beijunlong",
        "active": "True",
        "timeZone": "PRC"
      },
      "lastViewed": "2017-11-28T20:19:00.310+0800",
      "customfield_10500": "None",
      "issuelinks": [],
      "customfield_10402": "None",
      "customfield_10403": "None",
      "customfield_10400": "None",
      "customfield_10401": "None",
      "customfield_10000": "None",
      "customfield_10407": "None",
      "customfield_10405": "None",
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "avatarUrls": {
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400",
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400"
        },
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test"
      },
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10004": "9223372036854775807",
      "customfield_10002": "None",
      "fixVersions": [],
      "priority": {
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "timespent": "None",
      "attachment": [],
      "progress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": "None",
      "duedate": "2017-10-09",
      "status": {
        "statusCategory": {
          "name": "In Progress",
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/4",
          "id": 4,
          "key": "indeterminate",
          "colorName": "yellow"
        },
        "description": "This status is managed internally by JIRA Software",
        "self": "https://jira.bytedance.com/rest/api/2/status/10317",
        "iconUrl": "https://jira.bytedance.com/",
        "id": "10317",
        "name": "hold"
      },
      "updated": "2017-11-28T20:18:55.000+0800",
      "customfield_10200": "0|hzzzer:i",
      "subtasks": [],
      "description": "\u63cf\u8ff0\u63cf\u8ff0",
      "reporter": {
        "displayName": "\u8d1d\u4fca\u9f99",
        "name": "beijunlong",
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "avatarUrls": {
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
        },
        "emailAddress": "beijunlong@bytedance.com",
        "key": "beijunlong",
        "active": "True",
        "timeZone": "PRC"
      },
      "summary": "\u4e3b\u754c\u9762\u6539\u7248~~",
      "votes": {
        "hasVoted": "False",
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-1/votes",
        "votes": 0
      },
      "worklog": {
        "worklogs": [],
        "total": 0,
        "startAt": 0,
        "maxResults": 20
      },
      "customfield_10105": "None",
      "customfield_10100": "None",
      "customfield_10006": "None",
      "aggregatetimeoriginalestimate": "None",
      "customfield_10413": "None",
      "customfield_10005": [
        "com.atlassian.greenhopper.service.sprint.Sprint@7811f09d[id=546,rapidViewId=335,state=FUTURE,name=\u6d4b\u8bd5\u8fed\u4ee31,startDate=<null>,endDate=<null>,completeDate=<null>,sequence=547]"
      ],
      "timeoriginalestimate": "None",
      "customfield_10417": "2017-10-09T10:40:00.000+0800",
      "customfield_10416": "None",
      "customfield_10301": "None",
      "customfield_10300": "None",
      "created": "2017-10-11T15:45:13.000+0800",
      "versions": [],
      "resolutiondate": "None",
      "workratio": -1,
      "aggregatetimespent": "None",
      "timetracking": {},
      "components": [],
      "issuetype": {
        "name": "Story",
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10001",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11115&avatarType=issuetype",
        "subtask": "False",
        "avatarId": 11115,
        "id": "10001",
        "description": "gh.issue.story.desc"
      },
      "resolution": "None",
      "timeestimate": "None"
    },
    "self": "https://jira.bytedance.com/rest/api/2/issue/113608",
    "id": "113608",
    "key": "BT-1"
  },
  "webhookEvent": "jira:issue_updated",
  "user": {
    "displayName": "\u8d1d\u4fca\u9f99",
    "name": "beijunlong",
    "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
    "avatarUrls": {
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
      "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
    },
    "emailAddress": "beijunlong@bytedance.com",
    "key": "beijunlong",
    "active": "True",
    "timeZone": "PRC"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '贝俊龙 在Story 【主界面改版~~】中添加了一条新评论', 'text': '## 贝俊龙 在Story 【主界面改版~~】中添加了一条新评论 \n[点击查看详情](https://jira.bytedance.com/browse/BT-1)'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 0, 'errmsg': 'ok'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 02:22:23] "POST /webhook/jira HTTP/1.0" 200 -
INFO:werkzeug: * Running on http://0.0.0.0:3002/ (Press CTRL+C to quit)
INFO:root:
[jira
<^>
{
  "comment": {
    "body": "add a comment in story",
    "updateAuthor": {
      "displayName": "\u8d1d\u4fca\u9f99",
      "name": "beijunlong",
      "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
      "avatarUrls": {
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
      },
      "emailAddress": "beijunlong@bytedance.com",
      "key": "beijunlong",
      "active": "True",
      "timeZone": "PRC"
    },
    "created": "2017-11-28T20:19:17.695+0800",
    "self": "https://jira.bytedance.com/rest/api/2/issue/113608/comment/58158",
    "author": {
      "displayName": "\u8d1d\u4fca\u9f99",
      "name": "beijunlong",
      "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
      "avatarUrls": {
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
      },
      "emailAddress": "beijunlong@bytedance.com",
      "key": "beijunlong",
      "active": "True",
      "timeZone": "PRC"
    },
    "updated": "2017-11-28T20:19:17.695+0800",
    "id": "58158"
  },
  "timestamp": 1511871557701,
  "issue": {
    "fields": {
      "comment": {
        "total": 2,
        "startAt": 0,
        "comments": [
          {
            "body": "21334",
            "updateAuthor": {
              "displayName": "\u8d1d\u4fca\u9f99",
              "name": "beijunlong",
              "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
              "avatarUrls": {
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
              },
              "emailAddress": "beijunlong@bytedance.com",
              "key": "beijunlong",
              "active": "True",
              "timeZone": "PRC"
            },
            "created": "2017-10-11T16:03:55.000+0800",
            "self": "https://jira.bytedance.com/rest/api/2/issue/113608/comment/51846",
            "author": {
              "displayName": "\u8d1d\u4fca\u9f99",
              "name": "beijunlong",
              "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
              "avatarUrls": {
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
              },
              "emailAddress": "beijunlong@bytedance.com",
              "key": "beijunlong",
              "active": "True",
              "timeZone": "PRC"
            },
            "updated": "2017-10-11T16:03:55.000+0800",
            "id": "51846"
          },
          {
            "body": "add a comment in story",
            "updateAuthor": {
              "displayName": "\u8d1d\u4fca\u9f99",
              "name": "beijunlong",
              "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
              "avatarUrls": {
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
              },
              "emailAddress": "beijunlong@bytedance.com",
              "key": "beijunlong",
              "active": "True",
              "timeZone": "PRC"
            },
            "created": "2017-11-28T20:19:17.000+0800",
            "self": "https://jira.bytedance.com/rest/api/2/issue/113608/comment/58158",
            "author": {
              "displayName": "\u8d1d\u4fca\u9f99",
              "name": "beijunlong",
              "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
              "avatarUrls": {
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
              },
              "emailAddress": "beijunlong@bytedance.com",
              "key": "beijunlong",
              "active": "True",
              "timeZone": "PRC"
            },
            "updated": "2017-11-28T20:19:17.000+0800",
            "id": "58158"
          }
        ],
        "maxResults": 2
      },
      "environment": "None",
      "creator": {
        "displayName": "\u8d1d\u4fca\u9f99",
        "name": "beijunlong",
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "avatarUrls": {
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
        },
        "emailAddress": "beijunlong@bytedance.com",
        "key": "beijunlong",
        "active": "True",
        "timeZone": "PRC"
      },
      "aggregatetimeestimate": "None",
      "labels": [],
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-1/watchers",
        "watchCount": 2,
        "isWatching": "True"
      },
      "assignee": {
        "displayName": "\u8d1d\u4fca\u9f99",
        "name": "beijunlong",
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "avatarUrls": {
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
        },
        "emailAddress": "beijunlong@bytedance.com",
        "key": "beijunlong",
        "active": "True",
        "timeZone": "PRC"
      },
      "lastViewed": "2017-11-28T20:19:00.310+0800",
      "customfield_10500": "None",
      "issuelinks": [],
      "customfield_10402": "None",
      "customfield_10403": "None",
      "customfield_10400": "None",
      "customfield_10401": "None",
      "customfield_10000": "None",
      "customfield_10407": "None",
      "customfield_10405": "None",
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "avatarUrls": {
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400",
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400"
        },
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test"
      },
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10004": "9223372036854775807",
      "customfield_10002": "None",
      "fixVersions": [],
      "priority": {
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "timespent": "None",
      "attachment": [],
      "progress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": "None",
      "duedate": "2017-10-09",
      "status": {
        "statusCategory": {
          "name": "In Progress",
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/4",
          "id": 4,
          "key": "indeterminate",
          "colorName": "yellow"
        },
        "description": "This status is managed internally by JIRA Software",
        "self": "https://jira.bytedance.com/rest/api/2/status/10317",
        "iconUrl": "https://jira.bytedance.com/",
        "id": "10317",
        "name": "hold"
      },
      "updated": "2017-11-28T20:18:55.000+0800",
      "customfield_10200": "0|hzzzer:i",
      "subtasks": [],
      "description": "\u63cf\u8ff0\u63cf\u8ff0",
      "reporter": {
        "displayName": "\u8d1d\u4fca\u9f99",
        "name": "beijunlong",
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "avatarUrls": {
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
        },
        "emailAddress": "beijunlong@bytedance.com",
        "key": "beijunlong",
        "active": "True",
        "timeZone": "PRC"
      },
      "summary": "\u4e3b\u754c\u9762\u6539\u7248~~",
      "votes": {
        "hasVoted": "False",
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-1/votes",
        "votes": 0
      },
      "worklog": {
        "worklogs": [],
        "total": 0,
        "startAt": 0,
        "maxResults": 20
      },
      "customfield_10105": "None",
      "customfield_10100": "None",
      "customfield_10006": "None",
      "aggregatetimeoriginalestimate": "None",
      "customfield_10413": "None",
      "customfield_10005": [
        "com.atlassian.greenhopper.service.sprint.Sprint@7811f09d[id=546,rapidViewId=335,state=FUTURE,name=\u6d4b\u8bd5\u8fed\u4ee31,startDate=<null>,endDate=<null>,completeDate=<null>,sequence=547]"
      ],
      "timeoriginalestimate": "None",
      "customfield_10417": "2017-10-09T10:40:00.000+0800",
      "customfield_10416": "None",
      "customfield_10301": "None",
      "customfield_10300": "None",
      "created": "2017-10-11T15:45:13.000+0800",
      "versions": [],
      "resolutiondate": "None",
      "workratio": -1,
      "aggregatetimespent": "None",
      "timetracking": {},
      "components": [],
      "issuetype": {
        "name": "Story",
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10001",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11115&avatarType=issuetype",
        "subtask": "False",
        "avatarId": 11115,
        "id": "10001",
        "description": "gh.issue.story.desc"
      },
      "resolution": "None",
      "timeestimate": "None"
    },
    "self": "https://jira.bytedance.com/rest/api/2/issue/113608",
    "id": "113608",
    "key": "BT-1"
  },
  "webhookEvent": "jira:issue_updated",
  "user": {
    "displayName": "\u8d1d\u4fca\u9f99",
    "name": "beijunlong",
    "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
    "avatarUrls": {
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519",
      "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519"
    },
    "emailAddress": "beijunlong@bytedance.com",
    "key": "beijunlong",
    "active": "True",
    "timeZone": "PRC"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '贝俊龙 在Story 【主界面改版~~】中添加了一条新评论', 'text': '#### 贝俊龙 在Story 【主界面改版~~】中添加了一条新评论 \n[点击查看详情](https://jira.bytedance.com/browse/BT-1)'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 0, 'errmsg': 'ok'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 02:24:27] "POST /webhook/jira HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512008706385,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127186/comment/58429",
    "id": "58429",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=fulianjie",
      "name": "fulianjie",
      "key": "fulianjie",
      "emailAddress": "fulianjie@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=fulianjie&avatarId=11469",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=fulianjie&avatarId=11469",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=fulianjie&avatarId=11469",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=fulianjie&avatarId=11469"
      },
      "displayName": "\u4ed8\u8fde\u6770",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u5df2\u4ea4\u4ed8\u4e0a\u7ebf\r\n\r\ndoc\uff1a https://docs.bytedance.net/doc/w1rgMfx75x8KMPBF49S3Kd",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=fulianjie",
      "name": "fulianjie",
      "key": "fulianjie",
      "emailAddress": "fulianjie@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=fulianjie&avatarId=11469",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=fulianjie&avatarId=11469",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=fulianjie&avatarId=11469",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=fulianjie&avatarId=11469"
      },
      "displayName": "\u4ed8\u8fde\u6770",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T10:25:06.385+0800",
    "updated": "2017-11-30T10:25:06.385+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 02:25:06] "POST /webhook/jira?user_id=fulianjie&user_key=fulianjie HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512008785891,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/116170/comment/58430",
    "id": "58430",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=malingyi",
      "name": "malingyi",
      "key": "malingyi",
      "emailAddress": "malingyi@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=malingyi&avatarId=11461",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=malingyi&avatarId=11461",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=malingyi&avatarId=11461",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=malingyi&avatarId=11461"
      },
      "displayName": "malingyi",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u76ee\u524d\u4ea4\u4e92\u6d41\u7a0b\u4fee\u6539\uff0c\u8fdb\u5165\u5f55\u5236\u9875\u5df2\u7ecf\u6709\u5168\u90e8\u6743\u9650\u4e86\uff0c\u4e0d\u4f1a\u518d\u6709\u5f39\u7a97\uff0c\u4e5f\u5c31\u5e76\u4e0d\u4f1a\u6709\u8fd9\u4e2a\u95ee\u9898\u4e86\u3002",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=malingyi",
      "name": "malingyi",
      "key": "malingyi",
      "emailAddress": "malingyi@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=malingyi&avatarId=11461",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=malingyi&avatarId=11461",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=malingyi&avatarId=11461",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=malingyi&avatarId=11461"
      },
      "displayName": "malingyi",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T10:26:25.891+0800",
    "updated": "2017-11-30T10:26:25.891+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 02:26:25] "POST /webhook/jira?user_id=malingyi&user_key=malingyi HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512008902413,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
    "name": "beijunlong",
    "key": "beijunlong",
    "emailAddress": "beijunlong@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
    },
    "displayName": "\u8d1d\u4fca\u9f99",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "113624",
    "self": "https://jira.bytedance.com/rest/api/2/issue/113624",
    "key": "BT-3",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10001",
        "id": "10001",
        "description": "gh.issue.story.desc",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11115&avatarType=issuetype",
        "name": "Story",
        "subtask": false,
        "avatarId": 11115
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": null,
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": null,
      "workratio": -1,
      "lastViewed": "2017-11-30T10:28:22.407+0800",
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-3/watchers",
        "watchCount": 2,
        "isWatching": true
      },
      "created": "2017-10-11T16:13:53.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": null,
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T10:28:22.412+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10102",
        "description": "",
        "iconUrl": "https://jira.bytedance.com/images/icons/subtask.gif",
        "name": "Backlog",
        "id": "10102",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "\u963f\u6253\u53d1\u90a3\u8def\u4e0a\u770b\u5230\u4f60\u75af\u4e86\uff1b\u5361\u4e0a\u7684\u53d1\u65af\u8482\u82ac",
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "\u6d4b\u8bd5\u4e00\u4e2a\u5de5\u4f5c\u6d41",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [
        {
          "id": "113854",
          "key": "BT-8",
          "self": "https://jira.bytedance.com/rest/api/2/issue/113854",
          "fields": {
            "summary": "123123123123",
            "status": {
              "self": "https://jira.bytedance.com/rest/api/2/status/10317",
              "description": "This status is managed internally by JIRA Software",
              "iconUrl": "https://jira.bytedance.com/",
              "name": "hold",
              "id": "10317",
              "statusCategory": {
                "self": "https://jira.bytedance.com/rest/api/2/statuscategory/4",
                "id": 4,
                "key": "indeterminate",
                "colorName": "yellow",
                "name": "In Progress"
              }
            },
            "priority": {
              "self": "https://jira.bytedance.com/rest/api/2/priority/3",
              "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
              "name": "\u91cd\u8981",
              "id": "3"
            },
            "issuetype": {
              "self": "https://jira.bytedance.com/rest/api/2/issuetype/10103",
              "id": "10103",
              "description": "\u95ee\u9898\u7684\u5b50\u4efb\u52a1",
              "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11116&avatarType=issuetype",
              "name": "\u5b50\u4efb\u52a1",
              "subtask": true,
              "avatarId": 11116
            }
          }
        }
      ],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|hzzzer:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": null,
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 0,
        "total": 0,
        "comments": []
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-3/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "changelog": {
    "id": "370535",
    "items": [
      {
        "field": "status",
        "fieldtype": "jira",
        "from": "10103",
        "fromString": "Todo",
        "to": "10102",
        "toString": "Backlog"
      }
    ]
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '贝俊龙更新了Story【测试一个工作流】的状态', 'text': '#### 贝俊龙更新了Story【测试一个工作流】的状态 \n由【Todo】变为了【Backlog】\n[点击查看详情](https://jira.bytedance.com/browse/BT-3)'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 0, 'errmsg': 'ok'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 02:28:22] "POST /webhook/jira?user_id=beijunlong&user_key=beijunlong HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512008904047,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
    "name": "beijunlong",
    "key": "beijunlong",
    "emailAddress": "beijunlong@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
    },
    "displayName": "\u8d1d\u4fca\u9f99",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "113624",
    "self": "https://jira.bytedance.com/rest/api/2/issue/113624",
    "key": "BT-3",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10001",
        "id": "10001",
        "description": "gh.issue.story.desc",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11115&avatarType=issuetype",
        "name": "Story",
        "subtask": false,
        "avatarId": 11115
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": null,
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": null,
      "workratio": -1,
      "lastViewed": "2017-11-30T10:28:24.040+0800",
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-3/watchers",
        "watchCount": 2,
        "isWatching": true
      },
      "created": "2017-10-11T16:13:53.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": null,
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T10:28:24.046+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10345",
        "description": "This status is managed internally by JIRA Software",
        "iconUrl": "https://jira.bytedance.com/",
        "name": "Doing",
        "id": "10345",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/4",
          "id": 4,
          "key": "indeterminate",
          "colorName": "yellow",
          "name": "In Progress"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "\u963f\u6253\u53d1\u90a3\u8def\u4e0a\u770b\u5230\u4f60\u75af\u4e86\uff1b\u5361\u4e0a\u7684\u53d1\u65af\u8482\u82ac",
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "\u6d4b\u8bd5\u4e00\u4e2a\u5de5\u4f5c\u6d41",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [
        {
          "id": "113854",
          "key": "BT-8",
          "self": "https://jira.bytedance.com/rest/api/2/issue/113854",
          "fields": {
            "summary": "123123123123",
            "status": {
              "self": "https://jira.bytedance.com/rest/api/2/status/10317",
              "description": "This status is managed internally by JIRA Software",
              "iconUrl": "https://jira.bytedance.com/",
              "name": "hold",
              "id": "10317",
              "statusCategory": {
                "self": "https://jira.bytedance.com/rest/api/2/statuscategory/4",
                "id": 4,
                "key": "indeterminate",
                "colorName": "yellow",
                "name": "In Progress"
              }
            },
            "priority": {
              "self": "https://jira.bytedance.com/rest/api/2/priority/3",
              "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
              "name": "\u91cd\u8981",
              "id": "3"
            },
            "issuetype": {
              "self": "https://jira.bytedance.com/rest/api/2/issuetype/10103",
              "id": "10103",
              "description": "\u95ee\u9898\u7684\u5b50\u4efb\u52a1",
              "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11116&avatarType=issuetype",
              "name": "\u5b50\u4efb\u52a1",
              "subtask": true,
              "avatarId": 11116
            }
          }
        }
      ],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|hzzzer:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": null,
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 0,
        "total": 0,
        "comments": []
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-3/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "changelog": {
    "id": "370536",
    "items": [
      {
        "field": "status",
        "fieldtype": "jira",
        "from": "10102",
        "fromString": "Backlog",
        "to": "10345",
        "toString": "Doing"
      }
    ]
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '贝俊龙更新了Story【测试一个工作流】的状态', 'text': '#### 贝俊龙更新了Story【测试一个工作流】的状态 \n由【Backlog】变为了【Doing】\n[点击查看详情](https://jira.bytedance.com/browse/BT-3)'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 0, 'errmsg': 'ok'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 02:28:24] "POST /webhook/jira?user_id=beijunlong&user_key=beijunlong HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512008906526,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
    "name": "beijunlong",
    "key": "beijunlong",
    "emailAddress": "beijunlong@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
    },
    "displayName": "\u8d1d\u4fca\u9f99",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "116137",
    "self": "https://jira.bytedance.com/rest/api/2/issue/116137",
    "key": "BT-23",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10102",
        "id": "10102",
        "description": "\u9700\u8981\u5b8c\u6210\u7684\u4efb\u52a1\u3002",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11118&avatarType=issuetype",
        "name": "\u4efb\u52a1",
        "subtask": false,
        "avatarId": 11118
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": null,
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": null,
      "workratio": -1,
      "lastViewed": "2017-11-30T10:28:26.518+0800",
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-23/watchers",
        "watchCount": 1,
        "isWatching": false
      },
      "created": "2017-10-23T11:30:00.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": null,
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T10:28:26.524+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10002",
        "description": "",
        "iconUrl": "https://jira.bytedance.com/images/icons/statuses/closed.png",
        "name": "\u5b8c\u6210",
        "id": "10002",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/3",
          "id": 3,
          "key": "done",
          "colorName": "green",
          "name": "Done"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": null,
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "create a new task",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
        "name": "suchenyu",
        "key": "suchenyu",
        "emailAddress": "suchenyu@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
        },
        "displayName": "\u82cf\u9648\u6631",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
        "name": "suchenyu",
        "key": "suchenyu",
        "emailAddress": "suchenyu@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
        },
        "displayName": "\u82cf\u9648\u6631",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0hclr:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": null,
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 0,
        "total": 0,
        "comments": []
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-23/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "changelog": {
    "id": "370537",
    "items": [
      {
        "field": "status",
        "fieldtype": "jira",
        "from": "10102",
        "fromString": "Backlog",
        "to": "10002",
        "toString": "Done"
      }
    ]
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '贝俊龙更新了任务【create a new task】的状态', 'text': '#### 贝俊龙更新了任务【create a new task】的状态 \n由【Backlog】变为了【Done】\n[点击查看详情](https://jira.bytedance.com/browse/BT-23)'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 0, 'errmsg': 'ok'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 02:28:26] "POST /webhook/jira?user_id=beijunlong&user_key=beijunlong HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512008910221,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
    "name": "beijunlong",
    "key": "beijunlong",
    "emailAddress": "beijunlong@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
    },
    "displayName": "\u8d1d\u4fca\u9f99",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "116098",
    "self": "https://jira.bytedance.com/rest/api/2/issue/116098",
    "key": "BT-20",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10104",
        "id": "10104",
        "description": "jira.translation.issuetype.bug.name.desc",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11103&avatarType=issuetype",
        "name": "\u7f3a\u9677",
        "subtask": false,
        "avatarId": 11103
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": null,
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": null,
      "workratio": -1,
      "lastViewed": "2017-11-30T10:28:30.214+0800",
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-20/watchers",
        "watchCount": 1,
        "isWatching": false
      },
      "created": "2017-10-21T14:43:47.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": null,
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T10:28:30.220+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10202",
        "description": "Won't Fix",
        "iconUrl": "https://jira.bytedance.com/images/icons/statuses/generic.png",
        "name": "Won't Fix",
        "id": "10202",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/4",
          "id": 4,
          "key": "indeterminate",
          "colorName": "yellow",
          "name": "In Progress"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "\u8fd9\u662f\u63cf\u8ff0\u5566\u5566\u5566",
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "\u8fd9\u662fbug\u4e3b\u9898",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
        "name": "suchenyu",
        "key": "suchenyu",
        "emailAddress": "suchenyu@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
        },
        "displayName": "\u82cf\u9648\u6631",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
        "name": "suchenyu",
        "key": "suchenyu",
        "emailAddress": "suchenyu@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
        },
        "displayName": "\u82cf\u9648\u6631",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0hcev:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": null,
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 0,
        "total": 0,
        "comments": []
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-20/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "changelog": {
    "id": "370538",
    "items": [
      {
        "field": "status",
        "fieldtype": "jira",
        "from": "10102",
        "fromString": "Backlog",
        "to": "10202",
        "toString": "Won't Fix"
      }
    ]
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '贝俊龙更新了缺陷【这是bug主题】的状态', 'text': "#### 贝俊龙更新了缺陷【这是bug主题】的状态 \n由【Backlog】变为了【Won't Fix】\n[点击查看详情](https://jira.bytedance.com/browse/BT-20)"}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 0, 'errmsg': 'ok'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 02:28:30] "POST /webhook/jira?user_id=beijunlong&user_key=beijunlong HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512008929016,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/114595/comment/58431",
    "id": "58431",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
      "name": "beijunlong",
      "key": "beijunlong",
      "emailAddress": "beijunlong@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
      },
      "displayName": "\u8d1d\u4fca\u9f99",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u52a0\u4e2a\u5907\u6ce8",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
      "name": "beijunlong",
      "key": "beijunlong",
      "emailAddress": "beijunlong@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
      },
      "displayName": "\u8d1d\u4fca\u9f99",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T10:28:49.016+0800",
    "updated": "2017-11-30T10:28:49.016+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 02:28:49] "POST /webhook/jira?user_id=beijunlong&user_key=beijunlong HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512008929021,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
    "name": "beijunlong",
    "key": "beijunlong",
    "emailAddress": "beijunlong@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
    },
    "displayName": "\u8d1d\u4fca\u9f99",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "114595",
    "self": "https://jira.bytedance.com/rest/api/2/issue/114595",
    "key": "BT-12",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10104",
        "id": "10104",
        "description": "jira.translation.issuetype.bug.name.desc",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11103&avatarType=issuetype",
        "name": "\u7f3a\u9677",
        "subtask": false,
        "avatarId": 11103
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": null,
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": null,
      "workratio": -1,
      "lastViewed": "2017-11-30T10:28:41.507+0800",
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-12/watchers",
        "watchCount": 2,
        "isWatching": true
      },
      "created": "2017-10-16T10:53:07.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": "2017-10-02T10:47:00.000+0800",
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-29T10:53:19.000+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10002",
        "description": "",
        "iconUrl": "https://jira.bytedance.com/images/icons/statuses/closed.png",
        "name": "\u5b8c\u6210",
        "id": "10002",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/3",
          "id": 3,
          "key": "done",
          "colorName": "green",
          "name": "Done"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "111",
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [
        {
          "self": "https://jira.bytedance.com/rest/api/2/attachment/33539",
          "id": "33539",
          "filename": "1.png",
          "author": {
            "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
            "name": "suchenyu",
            "key": "suchenyu",
            "emailAddress": "suchenyu@bytedance.com",
            "avatarUrls": {
              "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
              "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
              "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
              "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
            },
            "displayName": "\u82cf\u9648\u6631",
            "active": true,
            "timeZone": "PRC"
          },
          "created": "2017-10-18T17:44:52.000+0800",
          "size": 10784,
          "mimeType": "image/png",
          "content": "https://jira.bytedance.com/secure/attachment/33539/1.png",
          "thumbnail": "https://jira.bytedance.com/secure/thumbnail/33539/_thumb_33539.png"
        }
      ],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "asdasdasdasdasd",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0h3hr:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": null,
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 4,
        "total": 4,
        "comments": [
          {
            "self": "https://jira.bytedance.com/rest/api/2/issue/114595/comment/53057",
            "id": "53057",
            "author": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "body": "111",
            "updateAuthor": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "created": "2017-10-20T18:00:55.000+0800",
            "updated": "2017-10-20T18:00:55.000+0800"
          },
          {
            "self": "https://jira.bytedance.com/rest/api/2/issue/114595/comment/53058",
            "id": "53058",
            "author": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "body": "112",
            "updateAuthor": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "created": "2017-10-20T18:02:07.000+0800",
            "updated": "2017-10-20T18:02:07.000+0800"
          },
          {
            "self": "https://jira.bytedance.com/rest/api/2/issue/114595/comment/53059",
            "id": "53059",
            "author": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "body": "222",
            "updateAuthor": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "created": "2017-10-20T18:03:51.000+0800",
            "updated": "2017-10-20T18:03:51.000+0800"
          },
          {
            "self": "https://jira.bytedance.com/rest/api/2/issue/114595/comment/58431",
            "id": "58431",
            "author": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
              "name": "beijunlong",
              "key": "beijunlong",
              "emailAddress": "beijunlong@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
              },
              "displayName": "\u8d1d\u4fca\u9f99",
              "active": true,
              "timeZone": "PRC"
            },
            "body": "\u52a0\u4e2a\u5907\u6ce8",
            "updateAuthor": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
              "name": "beijunlong",
              "key": "beijunlong",
              "emailAddress": "beijunlong@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
              },
              "displayName": "\u8d1d\u4fca\u9f99",
              "active": true,
              "timeZone": "PRC"
            },
            "created": "2017-11-30T10:28:49.000+0800",
            "updated": "2017-11-30T10:28:49.000+0800"
          }
        ]
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-12/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/114595/comment/58431",
    "id": "58431",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
      "name": "beijunlong",
      "key": "beijunlong",
      "emailAddress": "beijunlong@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
      },
      "displayName": "\u8d1d\u4fca\u9f99",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u52a0\u4e2a\u5907\u6ce8",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
      "name": "beijunlong",
      "key": "beijunlong",
      "emailAddress": "beijunlong@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
      },
      "displayName": "\u8d1d\u4fca\u9f99",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T10:28:49.016+0800",
    "updated": "2017-11-30T10:28:49.016+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '贝俊龙 在缺陷 【asdasdasdasdasd】中添加了一条新评论', 'text': '#### 贝俊龙 在缺陷 【asdasdasdasdasd】中添加了一条新评论 \n[点击查看详情](https://jira.bytedance.com/browse/BT-12)'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 0, 'errmsg': 'ok'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 02:28:49] "POST /webhook/jira?user_id=beijunlong&user_key=beijunlong HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512009453714,
  "webhookEvent": "comment_updated",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/125762/comment/57935",
    "id": "57935",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=luozexin",
      "name": "luozexin",
      "key": "luozexin",
      "emailAddress": "luozexin@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "luozexin",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010\u63d0\u6d4b\u529f\u80fd\u3011@\u5f20\u5b81  \u2014\u2014done\r\n  \u79c1\u4fe1-\u8349\u7a3f\r\n\u3010\u5206\u652f\u3011\r\n  live_2.9.0_imsdk\r\n\u3010\u7ec6\u8282\u63cf\u8ff0\u3011\r\n  \u79c1\u4fe1\u589e\u52a0\u8349\u7a3f\u529f\u80fd",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=wanglei.02",
      "name": "wanglei.02",
      "key": "wanglei.02",
      "emailAddress": "wanglei.02",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11138",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11138",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11138",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11138"
      },
      "displayName": "\u738b\u857e",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-28T10:56:17.000+0800",
    "updated": "2017-11-30T10:37:33.714+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 02:37:33] "POST /webhook/jira?user_id=wanglei.02&user_key=wanglei.02 HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512009544080,
  "webhookEvent": "comment_updated",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/125764/comment/57426",
    "id": "57426",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=quanquan",
      "name": "quanquan",
      "key": "quanquan",
      "emailAddress": "quanquan@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=quanquan&avatarId=11218",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=quanquan&avatarId=11218",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=quanquan&avatarId=11218",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=quanquan&avatarId=11218"
      },
      "displayName": "\u6743\u6cc9",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010\u63d0\u6d4b\u529f\u80fd\u3011 --doing by yuanyuan  \u2014\u2014done\r\n\u957f\u8fde\u63a5\u91cd\u6784 & \u9274\u6743\r\n\u3010\u5206\u652f\u3011 \r\nfeature/websocket_refactor\r\n\u3010\u7ec6\u8282\u63cf\u8ff0&\u98ce\u9669\u63d0\u793a\u3011 \r\n#\u9ad8\u7ea7\u8c03\u8bd5\u589e\u52a0\u4e86\u5f00\u5173\uff0c\u53ef\u4ee5\u67e5\u770b\u957f\u8fde\u63a5\u72b6\u6001\u548c\u6536\u53d1\u6d88\u606f\r\n\r\n1.\u957f\u8fde\u63a5\u6574\u4f53\u5347\u7ea7\uff0c\u9700\u8981\u6d4b\u8bd5Message\u6536\u53d1\u662f\u5426\u6b63\u5e38\uff0c\u6d88\u606f\u7c7b\u578b\u5982\u4e0b\r\n    HTSWebSocketDiggMessage                  = 6,\r\n    HTSWebSocketGiftMessage                  = 7,\r\n    HTSWebSocketGiftGroupMessage             = 8,\r\n    HTSWebSocketSystemMessage                = 9,\r\n    HTSWebSocketChatMessage                  = 10,\r\n    HTSWebSocketControlMessage               = 11,\r\n    HTSWebSocketMemberMessage                = 12,\r\n    HTSWebSocketRoomMessage                  = 13,\r\n    HTSWebSocketSocialMessage                = 14,\r\n    HTSWebSocketScreenMessage                = 15,\r\n    HTSWebSocketNoticeListUnreadCountMessage = 16,\r\n    HTSWebSocketRoomStartMessage             = 17,\r\n    HTSWebSocketLuckymoneyMessage            = 18,\r\n    HTSWebSocketRoomNotifyMessage            = 19,\r\n    HTSWebSocketNoticeMessage                = 20,\r\n    HTSWebSocketSunDailyRankMessage          = 21,\r\n    HTSWebSocketPushMessage                  = 22,\r\n    HTSWebSocketDoodleGiftMessage            = 23,\r\n    HTSWebSocketDecorationModifyMethod       = 24,\r\n    HTSWebSocketTaskGiftSync                 = 25,\r\n    HTSWebSocketUserStatsMessage             = 26,\r\n    HTSWebSocketInRoomBannerMessage          = 27,\r\n    HTSWebSocketSpecialPushMessage           = 28,\r\n    HTSWebSocketIESChatMessage               = 29,\r\n    HTSWebSocketPushRoomAdCard               = 30,\r\n    HTSWebSocketInRoomBannerRedPoint         = 31,\r\n    HTSWebSocketLinkMicMethod                = 32,\r\n    HTSWebSocketLinkMicSignalingMethod       = 33,\r\n    HTSWebSocketNoticeCountMessage           = 34,\r\n2.\u957f\u8fde\u63a5\u9274\u6743\uff0c\u6839\u636e\u7528\u6237\u767b\u5f55\u767b\u51fa\u9700\u8981\u91cd\u8fde\r\n3.\u91cd\u70b9\u6d4b\u8bd5\u7a33\u5b9a\u6027\r\n4.\u76f4\u64ad\u95f4\u76f8\u5173\u6d88\u606f\r\n    HTSLiveWebSocketPushMessage                = 22,\r\n    HTSLiveWebSocketTaskGiftSync               = 25,\r\n    HTSLiveWebSocketUserStatsMessage           = 26,\r\n    HTSLiveWebSocketPushRoomAdCard             = 30,\r\n    HTSLiveWebSocketLinkMicMethod              = 32,\r\n    HTSLiveWebSocketLinkMicSignalingMethod     = 33,\r\n5.\u5c0f\u89c6\u9891\u6d88\u606f\r\n\u672a\u8bfb\u6d88\u606f\r\n\u79c1\u4fe1\r\n",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=wanglei.02",
      "name": "wanglei.02",
      "key": "wanglei.02",
      "emailAddress": "wanglei.02",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11138",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11138",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11138",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11138"
      },
      "displayName": "\u738b\u857e",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-24T18:41:28.000+0800",
    "updated": "2017-11-30T10:39:04.080+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 02:39:04] "POST /webhook/jira?user_id=wanglei.02&user_key=wanglei.02 HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512009579256,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127736/comment/58435",
    "id": "58435",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=fangting",
      "name": "fangting",
      "key": "fangting",
      "emailAddress": "fangting@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=fangting&avatarId=11534",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=fangting&avatarId=11534",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=fangting&avatarId=11534",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=fangting&avatarId=11534"
      },
      "displayName": "\u65b9\u5a77",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u8fd9\u4e2a\u53ea\u662f\u5176\u4ed6\u884c\u4e1a\u6682\u65f6\u6ca1\u6709\u5f00\u653e\uff0c\u4e4b\u540e\u4f1a\u6709\u53ef\u9009\u54c1\u724c\u7684\uff0c\u6682\u65f6\u4e0d\u7528\u8c03\u6574\u3002",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=fangting",
      "name": "fangting",
      "key": "fangting",
      "emailAddress": "fangting@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=fangting&avatarId=11534",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=fangting&avatarId=11534",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=fangting&avatarId=11534",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=fangting&avatarId=11534"
      },
      "displayName": "\u65b9\u5a77",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T10:39:39.256+0800",
    "updated": "2017-11-30T10:39:39.256+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 02:39:39] "POST /webhook/jira?user_id=fangting&user_key=fangting HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512009596046,
  "webhookEvent": "comment_updated",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/125764/comment/58418",
    "id": "58418",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=liuqing.90",
      "name": "liuqing.90",
      "key": "liuqing.90",
      "emailAddress": "liuqing.90@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5218\u9752",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010\u63d0\u6d4b\u529f\u80fd\u3011 \r\n\u5e95tab refresh\r\n\u3010\u5206\u652f\u3011 \r\nfeature/2.9.0_refresh\r\n\u3010\u7ec6\u8282\u63cf\u8ff0&\u98ce\u9669\u63d0\u793a\u3011 \r\n\u7531settings\u4e2d\u7684refresh_icon_num\u51b3\u5b9a\uff0c\u5982\u679c<0\u5219\u4f7f\u7528\u9ed8\u8ba4\u7684\uff0c=0\u663e\u793aicon\u4e0d\u663e\u793a\u6570\u5b57\uff0c>0\u663e\u793aicon\u4e14\u663e\u793a\u6570\u5b57\u3002\r\n\u7531\u4e8esettings\u6709\u7f13\u5b58\uff0c\u65b0\u7684\u8bbe\u7f6e\u4e0b\u6b21\u542f\u52a8\u751f\u6548",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=liuqing.90",
      "name": "liuqing.90",
      "key": "liuqing.90",
      "emailAddress": "liuqing.90@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5218\u9752",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-29T21:27:37.000+0800",
    "updated": "2017-11-30T10:39:56.046+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 02:39:56] "POST /webhook/jira?user_id=liuqing.90&user_key=liuqing.90 HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512009607185,
  "webhookEvent": "comment_updated",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/125764/comment/57580",
    "id": "57580",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=liudongdong",
      "name": "liudongdong",
      "key": "liudongdong",
      "emailAddress": "liudongdong@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=liudongdong&avatarId=11324",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=liudongdong&avatarId=11324",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=liudongdong&avatarId=11324",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=liudongdong&avatarId=11324"
      },
      "displayName": "\u5218\u4e1c\u4e1c",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010\u63d0\u6d4b\u529f\u80fd\u3011 @\u5f20\u5b81  \u2014\u2014done\r\n\u79c1\u4fe1\u4f1a\u8bdd\u4fdd\u5b58\u8349\u7a3f\uff08\u4e1a\u52a1 + SDK\uff09\r\n\r\n\u3010\u5206\u652f\u3011 \r\nfeature/2.9.0_im_sessionDraft\r\n\r\n\u3010\u7ec6\u8282\u63cf\u8ff0&\u98ce\u9669\u63d0\u793a\u3011 \r\n\u65e0",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=wanglei.02",
      "name": "wanglei.02",
      "key": "wanglei.02",
      "emailAddress": "wanglei.02",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11138",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11138",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11138",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11138"
      },
      "displayName": "\u738b\u857e",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-26T19:17:52.000+0800",
    "updated": "2017-11-30T10:40:07.185+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 02:40:07] "POST /webhook/jira?user_id=wanglei.02&user_key=wanglei.02 HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512009674615,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/126768/comment/58436",
    "id": "58436",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=fangting",
      "name": "fangting",
      "key": "fangting",
      "emailAddress": "fangting@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=fangting&avatarId=11534",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=fangting&avatarId=11534",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=fangting&avatarId=11534",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=fangting&avatarId=11534"
      },
      "displayName": "\u65b9\u5a77",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u8c03\u6574\u4e86\u8d85\u65f6\u65f6\u95f4\uff0c\u8bf7\u9a8c\u8bc1\u662f\u5426\u8fd8\u4f1a\u51fa\u73b0\u8fd9\u4e2a\u95ee\u9898\u3002",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=fangting",
      "name": "fangting",
      "key": "fangting",
      "emailAddress": "fangting@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=fangting&avatarId=11534",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=fangting&avatarId=11534",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=fangting&avatarId=11534",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=fangting&avatarId=11534"
      },
      "displayName": "\u65b9\u5a77",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T10:41:14.615+0800",
    "updated": "2017-11-30T10:41:14.615+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 02:41:14] "POST /webhook/jira?user_id=fangting&user_key=fangting HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512009746279,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/126755/comment/58438",
    "id": "58438",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=fangting",
      "name": "fangting",
      "key": "fangting",
      "emailAddress": "fangting@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=fangting&avatarId=11534",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=fangting&avatarId=11534",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=fangting&avatarId=11534",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=fangting&avatarId=11534"
      },
      "displayName": "\u65b9\u5a77",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u8fd9\u4e2a\u662f\u9700\u8981\u8c03\u6574\u7684\uff0c\u4f46\u76ee\u524d\u57fa\u7840\u54c1\u724c\u642d\u5efa\u6ca1\u6709\u5b8c\u6210\uff0c\u7b49\u5b8c\u5584\u540e\u518d\u4e00\u8d77\u6539\u3002",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=fangting",
      "name": "fangting",
      "key": "fangting",
      "emailAddress": "fangting@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=fangting&avatarId=11534",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=fangting&avatarId=11534",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=fangting&avatarId=11534",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=fangting&avatarId=11534"
      },
      "displayName": "\u65b9\u5a77",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T10:42:26.279+0800",
    "updated": "2017-11-30T10:42:26.279+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 02:42:26] "POST /webhook/jira?user_id=fangting&user_key=fangting HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512009785949,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127808/comment/58439",
    "id": "58439",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=fangting",
      "name": "fangting",
      "key": "fangting",
      "emailAddress": "fangting@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=fangting&avatarId=11534",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=fangting&avatarId=11534",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=fangting&avatarId=11534",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=fangting&avatarId=11534"
      },
      "displayName": "\u65b9\u5a77",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u53ef\u4ee5\u8c03\u6574\u3002",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=fangting",
      "name": "fangting",
      "key": "fangting",
      "emailAddress": "fangting@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=fangting&avatarId=11534",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=fangting&avatarId=11534",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=fangting&avatarId=11534",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=fangting&avatarId=11534"
      },
      "displayName": "\u65b9\u5a77",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T10:43:05.949+0800",
    "updated": "2017-11-30T10:43:05.949+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 02:43:06] "POST /webhook/jira?user_id=fangting&user_key=fangting HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512009853502,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127810/comment/58440",
    "id": "58440",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=wangpan",
      "name": "wangpan",
      "key": "wangpan",
      "emailAddress": "wangpan@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "wangpan",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u8fd9\u5757\u4e4b\u524d\u6ca1\u6709\u660e\u786e\u7684\u9700\u6c42\uff0c\u548cUI\u5bf9\u4e86\u4e0b\uff0c\u7a7a\u767d\u9875\u9762\u9884\u8ba1\u4f1a\u57284.8\u4f1a\u7edf\u4e00\u4fee\u6539\u3002\u3002",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=wangpan",
      "name": "wangpan",
      "key": "wangpan",
      "emailAddress": "wangpan@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "wangpan",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T10:44:13.502+0800",
    "updated": "2017-11-30T10:44:13.502+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 02:44:13] "POST /webhook/jira?user_id=wangpan&user_key=wangpan HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512009954275,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/123140/comment/58441",
    "id": "58441",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=wangpan",
      "name": "wangpan",
      "key": "wangpan",
      "emailAddress": "wangpan@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "wangpan",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u8fd9\u5757A/B\u6d4b\u7ed3\u679c\u5df2\u7ecf\u51fa\u6765\uff0c\u70b9\u8d5e\u6309\u94ae\u5df2\u7ecf\u4e0b\u6389\u3002\u6062\u590d\u65e0\u6309\u94ae\u90a3\u79cd\u6837\u5f0f\u3002\u3002\u540e\u9762\u4e0d\u4f1a\u5b58\u5728\u6324\u53d8\u5f62\u8fd9\u79cd\u60c5\u51b5\u3002\u3002",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=wangpan",
      "name": "wangpan",
      "key": "wangpan",
      "emailAddress": "wangpan@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "wangpan",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T10:45:54.275+0800",
    "updated": "2017-11-30T10:45:54.275+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 02:45:54] "POST /webhook/jira?user_id=wangpan&user_key=wangpan HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512010081614,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127672/comment/58442",
    "id": "58442",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=wangkunpeng",
      "name": "wangkunpeng",
      "key": "wangkunpeng",
      "emailAddress": "wangkunpeng@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u738b\u6606\u9e4f",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u76f8\u673a\u5904\u6ca1\u66ff\u6362\u5bfc\u81f4\uff0c\u6f0f\u6389\u4e86\u3002",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=wangkunpeng",
      "name": "wangkunpeng",
      "key": "wangkunpeng",
      "emailAddress": "wangkunpeng@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u738b\u6606\u9e4f",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T10:48:01.614+0800",
    "updated": "2017-11-30T10:48:01.614+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 02:48:01] "POST /webhook/jira?user_id=wangkunpeng&user_key=wangkunpeng HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512010203986,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/126481/comment/58443",
    "id": "58443",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=zhuangjingjing",
      "name": "zhuangjingjing",
      "key": "zhuangjingjing",
      "emailAddress": "zhuangjingjing@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "zhuangjingjing",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "dev_2.1\u9a8c\u8bc1\u901a\u8fc7",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=zhuangjingjing",
      "name": "zhuangjingjing",
      "key": "zhuangjingjing",
      "emailAddress": "zhuangjingjing@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "zhuangjingjing",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T10:50:03.986+0800",
    "updated": "2017-11-30T10:50:03.986+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 02:50:04] "POST /webhook/jira?user_id=zhuangjingjing&user_key=zhuangjingjing HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512010226798,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/124737/comment/58444",
    "id": "58444",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=zhuangjingjing",
      "name": "zhuangjingjing",
      "key": "zhuangjingjing",
      "emailAddress": "zhuangjingjing@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "zhuangjingjing",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u9a8c\u8bc1\u901a\u8fc7",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=zhuangjingjing",
      "name": "zhuangjingjing",
      "key": "zhuangjingjing",
      "emailAddress": "zhuangjingjing@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "zhuangjingjing",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T10:50:26.798+0800",
    "updated": "2017-11-30T10:50:26.798+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 02:50:26] "POST /webhook/jira?user_id=zhuangjingjing&user_key=zhuangjingjing HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512010310868,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/126708/comment/58445",
    "id": "58445",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
      "name": "beijunlong",
      "key": "beijunlong",
      "emailAddress": "beijunlong@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
      },
      "displayName": "\u8d1d\u4fca\u9f99",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "from jiabei\r\n\u4eca\u5929\u4e0a\u7ebf 11\u670830\u65e5",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
      "name": "beijunlong",
      "key": "beijunlong",
      "emailAddress": "beijunlong@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
      },
      "displayName": "\u8d1d\u4fca\u9f99",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T10:51:50.868+0800",
    "updated": "2017-11-30T10:51:50.868+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 02:51:50] "POST /webhook/jira?user_id=beijunlong&user_key=beijunlong HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512010336702,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/123699/comment/58446",
    "id": "58446",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=fulianjie",
      "name": "fulianjie",
      "key": "fulianjie",
      "emailAddress": "fulianjie@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=fulianjie&avatarId=11469",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=fulianjie&avatarId=11469",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=fulianjie&avatarId=11469",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=fulianjie&avatarId=11469"
      },
      "displayName": "\u4ed8\u8fde\u6770",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u4fee\u6539\u4e3astory\uff0c\u6309\u8fed\u4ee3\u6b65\u9aa4\u8fed\u4ee3",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=fulianjie",
      "name": "fulianjie",
      "key": "fulianjie",
      "emailAddress": "fulianjie@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=fulianjie&avatarId=11469",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=fulianjie&avatarId=11469",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=fulianjie&avatarId=11469",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=fulianjie&avatarId=11469"
      },
      "displayName": "\u4ed8\u8fde\u6770",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T10:52:16.702+0800",
    "updated": "2017-11-30T10:52:16.702+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 02:52:16] "POST /webhook/jira?user_id=fulianjie&user_key=fulianjie HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512010512055,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127879/comment/58447",
    "id": "58447",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=zhengshitu",
      "name": "zhengshitu",
      "key": "zhengshitu",
      "emailAddress": "zhengshitu@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u90d1\u8bc6\u9014",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u9057\u7559\u95ee\u9898\uff0c\u4e4b\u524d\u5904\u7406\u53ea\u663e\u793a\u8868\u60c5\u9762\u677f\u7684\u65f6\u5019\u6ca1\u5bf9\u9690\u85cf\u865a\u62df\u6309\u952e\u7684\u60c5\u51b5\u8fdb\u884c\u5904\u7406",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=zhengshitu",
      "name": "zhengshitu",
      "key": "zhengshitu",
      "emailAddress": "zhengshitu@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u90d1\u8bc6\u9014",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T10:55:12.055+0800",
    "updated": "2017-11-30T10:55:12.055+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 02:55:12] "POST /webhook/jira?user_id=zhengshitu&user_key=zhengshitu HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512010512507,
  "webhookEvent": "comment_updated",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/125764/comment/58280",
    "id": "58280",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=zhangrenfeng",
      "name": "zhangrenfeng",
      "key": "zhangrenfeng",
      "emailAddress": "zhangrenfeng@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5f20\u4ec1\u5cf0",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010\u63d0\u6d4b\u529f\u80fd\u3011 \r\n  1. \u9690\u79c1\u589e\u52a0\u7981\u6b62\u975e\u5173\u6ce8\u6211\u7684\u4eba\u8bc4\u8bba \u90ed\u6c5f\u6d9b doing\r\n  2. App\u8c03\u8d77\u4e0a\u62a5\u89c4\u8303\r\n  3. Profile\u9875\u6587\u6848\u4f18\u5316\r\n  4. \u89c6\u9891feed\u9700\u6c42: \u63a8\u8350\u7406\u7531\r\n  5. \u53cd\u4f5c\u5f0aAPI\u52a0\u5bc6\r\n\r\n\u3010\u5206\u652f\u3011 \r\n  feature/2.9_zhangrenfeng\r\n\r\n\u3010\u7ec6\u8282\u63cf\u8ff0&\u98ce\u9669\u63d0\u793a\u3011 \r\n  1. \u9690\u79c1\u589e\u52a0\u7981\u6b62\u975e\u5173\u6ce8\u6211\u7684\u4eba\u8bc4\u8bba IDL: https://code.byted.org/hotsoon/idl/blob/master/src/data/user.proto \u5b57\u6bb5: allow_unfollower_comment\r\n  2. App\u8c03\u8d77\u4e0a\u62a5\u89c4\u8303: \u57cb\u70b9\u533a\u5206\u70b9\u51fbicon\u542f\u52a8\u548c\u4ecewidget\u542f\u52a8\r\n  3. Profile\u9875\u6587\u6848\u4f18\u5316, \u8be5\u6587\u6848\u5b8c\u5168\u7531\u540e\u7aef\u63a7\u5236, \u786e\u4fdd\u540e\u7aef\u4e0b\u53d1\u7684\u6570\u636e\u6b63\u786e\r\n  4. \u89c6\u9891feed\u9700\u6c42\u4e4b\u63a8\u8350\u7406\u7531 IDL: https://code.byted.org/hotsoon/idl/merge_requests/312/diffs \u5b57\u6bb5: recommend_reason\r\n  5. \u53cd\u4f5c\u5f0aAPI\u52a0\u5bc6, \u8fdb\u884c\u5b9e\u540d\u8ba4\u8bc1\uff0c\u63d0\u4ea4\u7ed3\u7b97\u4e2a\u4eba\u4fe1\u606f\u65f6\u5bf9\u5176\u4e2d\u7684\u654f\u611f\u5b57\u6bb5(\u5982:\u59d3\u540d\uff0c\u8eab\u4efd\u8bc1\u53f7, \u94f6\u884c\u5361\u53f7\uff0c\u624b\u673a\u53f7\u7b49)\u52a0\u5bc6, \u7528\u6237\u5982\u679c\u5df2\u7ecf\u8ba4\u8bc1\u5219\u5728\u8bf7\u6c42\u4e2a\u4eba\u7ed3\u7b97\u4fe1\u606f\u65f6, \u9700\u8981\u5bf9\u8fd4\u56de\u7684\u5b57\u6bb5\u8fdb\u884c\u89e3\u5bc6, \u8bf7\u786e\u4fdd\u4e0a\u8ff0\u7f51\u7edc\u8bf7\u6c42\u64cd\u4f5c\u6b63\u5e38.",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=guojiangtao",
      "name": "guojiangtao",
      "key": "guojiangtao",
      "emailAddress": "guojiangtao@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11141",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11141",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11141",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11141"
      },
      "displayName": "guojiangtao",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-29T13:16:31.000+0800",
    "updated": "2017-11-30T10:55:12.507+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 02:55:12] "POST /webhook/jira?user_id=guojiangtao&user_key=guojiangtao HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512010624232,
  "webhookEvent": "comment_updated",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/125762/comment/58420",
    "id": "58420",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=wangshuai.lean",
      "name": "wangshuai.lean",
      "key": "wangshuai.lean",
      "emailAddress": "wangshuai.lean@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u738b\u5e05",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010\u63d0\u6d4b\u529f\u80fd\u3011 \r\n\u79c1\u4fe1\u89c6\u9891\u5206\u4eab---doing by \u5f20\u5b81\r\n\u3010\u5206\u652f\u3011 \r\nlive_2.9.0_chatshare\r\n\u3010\u7ec6\u8282\u63cf\u8ff0\u3011 \r\n\u6ce8\u610f\u4f5c\u8005\u770b\u81ea\u5df1\u7684\u89c6\u9891\u5206\u4eab\u548c\u8bbf\u5ba2\u770b\u522b\u4eba\u7684\u89c6\u9891\u5206\u4eab\u5728\u767b\u5f55\u4e14\u4e2dAB\u65f6\u662f\u5426\u90fd\u6709\u53d1\u9001\u7ed9\u597d\u53cb\r\n\u5728\u672a\u767b\u5f55\u662f\u5426\u90fd\u662f\u6ca1\u6709\r\n\u79c1\u4fe1\u7684\u57fa\u672cAB\u5165\u53e3\u53ca\u5176\u4ed6\u57fa\u672c\u529f\u80fd\u662f\u5426\u6b63\u5e38\r\n\u79c1\u4fe1\u9047\u5230\u4e0d\u8ba4\u8bc6\u7684\u6d88\u606f\u7c7b\u578b \u662f\u5426\u4f1a\u63d0\u793a\u5347\u7ea7\u65b0\u7248\u672c",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=houyuanyuan",
      "name": "houyuanyuan",
      "key": "houyuanyuan",
      "emailAddress": "houyuanyuan@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=houyuanyuan&avatarId=11240",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=houyuanyuan&avatarId=11240",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=houyuanyuan&avatarId=11240",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=houyuanyuan&avatarId=11240"
      },
      "displayName": "\u4faf\u5a9b\u5a9b",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-29T21:36:05.000+0800",
    "updated": "2017-11-30T10:57:04.232+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 02:57:04] "POST /webhook/jira?user_id=houyuanyuan&user_key=houyuanyuan HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512010638482,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/125762/comment/58448",
    "id": "58448",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=wangzhongjie",
      "name": "wangzhongjie",
      "key": "wangzhongjie",
      "emailAddress": "wangzhongjie@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "wangzhongjie",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010\u63d0\u6d4b\u529f\u80fd\u3011 \r\n\u7ea2\u5305\u4f18\u5316\r\n\u3010\u5206\u652f\u3011\r\nlive_2.9.0_redpacket\r\n\u3010\u7ec6\u8282\u63cf\u8ff0&\u98ce\u9669\u63d0\u793a\u3011\r\n1\u3001\u7ea2\u5305\u9886\u53d6\u4ea4\u4e92\u589e\u52a0\u5206\u4eab\uff1aABCD\u56db\u79cd\u7b56\u7565\r\n2\u3001\u7ea2\u5305\u51fa\u73b0\u65f6\u4e0d\u51fa\u5de6\u6ed1\u8fdbprofile\u9875\u7684\u65b0\u624b\u5f15\u5bfc\uff1a\u65b0\u624b\u5f15\u5bfc\u5148\u51fa\u73b0\u4e0d\u51fa\u7ea2\u5305\uff0c\u7ea2\u5305\u51fa\u73b0\uff0c\u4e0d\u51fa\u65b0\u624b\u5f15\u5bfc\r\n3\u3001\u542f\u52a84\u79cd\u5f15\u5bfcab\uff1a\u53bb\u6389\u4e86\u5176\u4ed6\u4e24\u79cd\u5f15\u5bfc\uff0c\uff081\uff09\u9996\u6b21\u542f\u52a8\u65f6\uff0cfeed\u6389\u7ea2\u5305\uff082\uff09\u5176\u4ed6\u60c5\u51b5\u5747\u5c55\u793a\u201c\u62cd\u89c6\u9891\u9886\u7ea2\u5305\u201d\u7684\u6c14\u6ce1\u5f15\u5bfc\r\n4\u3001\u70b9\u51fb\u975e\u7ea2\u5305\u533a\u57df\u652f\u6301\u6d88\u9664\u7ea2\u5305\uff1a\u8fd9\u4e2a\u53ea\u9488\u5bf9\u672a\u5f00\u5305\u7684\u7ea2\u5305\uff0c\u5176\u4ed6\u7684\u7ea2\u5305\u4f1a\u5f39\u786e\u8ba4\u5f39\u7a97\r\n5\u3001\u672a\u767b\u5f55\u6001\u5f53\u65e5\u7ea2\u5305\u5c55\u73b0\u6b21\u6570\u670d\u52a1\u7aef\u53ef\u63a7\uff1a\uff081\uff09\u5f53\u65e5\u6700\u5927\u6b21\u6570\u8ba1\u6570\uff082\uff09\r\n6\u3001\u57cb\u70b9\u6b63\u5728\u5f00\u53d1\uff0c\u7a0d\u540e\u8865\u4e0a\r\n\r\n",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=wangzhongjie",
      "name": "wangzhongjie",
      "key": "wangzhongjie",
      "emailAddress": "wangzhongjie@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "wangzhongjie",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T10:57:18.482+0800",
    "updated": "2017-11-30T10:57:18.482+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 02:57:18] "POST /webhook/jira?user_id=wangzhongjie&user_key=wangzhongjie HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512010670899,
  "webhookEvent": "comment_updated",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/125762/comment/58448",
    "id": "58448",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=wangzhongjie",
      "name": "wangzhongjie",
      "key": "wangzhongjie",
      "emailAddress": "wangzhongjie@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "wangzhongjie",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010\u63d0\u6d4b\u529f\u80fd\u3011 \r\n\u7ea2\u5305\u4f18\u5316\r\n\u3010\u5206\u652f\u3011\r\nlive_2.9.0_redpacket\r\n\u3010\u7ec6\u8282\u63cf\u8ff0&\u98ce\u9669\u63d0\u793a\u3011\r\n1\u3001\u7ea2\u5305\u9886\u53d6\u4ea4\u4e92\u589e\u52a0\u5206\u4eab\uff1aABCD\u56db\u79cd\u7b56\u7565\r\n2\u3001\u7ea2\u5305\u51fa\u73b0\u65f6\u4e0d\u51fa\u5de6\u6ed1\u8fdbprofile\u9875\u7684\u65b0\u624b\u5f15\u5bfc\uff1a\u65b0\u624b\u5f15\u5bfc\u5148\u51fa\u73b0\u4e0d\u51fa\u7ea2\u5305\uff0c\u7ea2\u5305\u51fa\u73b0\uff0c\u4e0d\u51fa\u65b0\u624b\u5f15\u5bfc\r\n3\u3001\u542f\u52a84\u79cd\u5f15\u5bfcab\uff1a\u53bb\u6389\u4e86\u5176\u4ed6\u4e24\u79cd\u5f15\u5bfc\uff0c\uff081\uff09\u9996\u6b21\u542f\u52a8\u65f6\uff0cfeed\u6389\u7ea2\u5305\uff082\uff09\u5176\u4ed6\u60c5\u51b5\u5747\u5c55\u793a\u201c\u62cd\u89c6\u9891\u9886\u7ea2\u5305\u201d\u7684\u6c14\u6ce1\u5f15\u5bfc\r\n4\u3001\u70b9\u51fb\u975e\u7ea2\u5305\u533a\u57df\u652f\u6301\u6d88\u9664\u7ea2\u5305\uff1a\u8fd9\u4e2a\u53ea\u9488\u5bf9\u672a\u5f00\u5305\u7684\u7ea2\u5305\uff0c\u5176\u4ed6\u7684\u7ea2\u5305\u4f1a\u5f39\u786e\u8ba4\u5f39\u7a97\r\n5\u3001\u672a\u767b\u5f55\u6001\u5f53\u65e5\u7ea2\u5305\u5c55\u73b0\u6b21\u6570\u670d\u52a1\u7aef\u53ef\u63a7\uff1a\uff081\uff09\u5f53\u65e5\u6700\u5927\u6b21\u6570\u8ba1\u6570\uff082\uff09\u6839\u636e\u5929\u6570\u5224\u65ad\u662f\u5426\u8fd8\u80fd\u5c55\u793a\r\n6\u3001\u57cb\u70b9\u6b63\u5728\u5f00\u53d1\uff0c\u7a0d\u540e\u8865\u4e0a\r\n\r\n",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=wangzhongjie",
      "name": "wangzhongjie",
      "key": "wangzhongjie",
      "emailAddress": "wangzhongjie@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "wangzhongjie",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T10:57:18.000+0800",
    "updated": "2017-11-30T10:57:50.899+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 02:57:51] "POST /webhook/jira?user_id=wangzhongjie&user_key=wangzhongjie HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512010687139,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/125782/comment/58449",
    "id": "58449",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=yemeng",
      "name": "yemeng",
      "key": "yemeng",
      "emailAddress": "yemeng@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "yemeng",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010\u63d0\u6d4b\u529f\u80fd\u3011 \r\n\u97f3\u4e50\u805a\u5408 \r\n\r\n\u3010\u5206\u652f\u3011 \r\n2.9_music_union \r\n\r\n\u3010\u7ec6\u8282\u63cf\u8ff0&\u98ce\u9669\u63d0\u793a\u3011 \r\n\uff081\uff09feed\u589e\u52a0song\u5b57\u6bb5\uff0c\u8be6\u60c5\u9875\u9762\u6839\u636esong\u5b57\u6bb5\u5c55\u793a\u8be6\u60c5\uff0c\u6ca1\u6709\u7684\u8bdd\u4e0d\u663e\u793a\uff1b\uff08AB\uff09\r\n\uff082\uff09song\u5b57\u6bb5\u4e2dstatue=0\u8868\u793a\u4e0b\u7ebf\uff0c\u5bf9\u4e8e\u805a\u5408\u9875\u9762\u4e2d\u70b9\u51fb\u62cd\u6444\u65f6\u4e2d\u4e0b\u7ebf\u63d0\u793a\r\n\uff083\uff09\u6839\u636esong\u4e2dshareTitle/shareUrl/shareDescri\u5c55\u793a\u5206\u4eab\uff0curl\u4e3a\u7a7a\u4e0d\u663e\u793a\u5206\u4eab\u56fe\u6807\uff0c\u76ee\u524d\u4e00\u76f4\u4e3a\u7a7a\r\n\uff084\uff09\u6839\u636e/hotsoon/song/{song_id}/items/?type={hot/new}\u63a5\u53e3\u8fd4\u56de\u4fe1\u606f\u5c55\u793a\u70ed\u95e8\u548c\u6700\u65b0\r\n\r\n\u9700\u6c42\u6587\u6863\uff1ahttps://wiki.bytedance.net/pages/viewpage.action?pageId=142747781\r\n\u8be5\u529f\u80fd\u6709\u57cb\u70b9\u9700\u6c42\uff0867\uff5e73\uff09\uff1ahttps://docs.google.com/spreadsheets/d/1nTMTUOWRnWlCKFF7onzAiQcqWnJtQi52BGLcp5Ih9VM/edit#gid=0 ",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=yemeng",
      "name": "yemeng",
      "key": "yemeng",
      "emailAddress": "yemeng@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "yemeng",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T10:58:07.139+0800",
    "updated": "2017-11-30T10:58:07.139+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 02:58:07] "POST /webhook/jira?user_id=yemeng&user_key=yemeng HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512010693495,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127485/comment/58450",
    "id": "58450",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=liuchengchuan",
      "name": "liuchengchuan",
      "key": "liuchengchuan",
      "emailAddress": "liuchengchuan@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=liuchengchuan&avatarId=11211",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=liuchengchuan&avatarId=11211",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=liuchengchuan&avatarId=11211",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=liuchengchuan&avatarId=11211"
      },
      "displayName": "\u5218\u627f\u5ddd",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "[~liyang.poll]\r\n\u8fd9\u4e2a\u7684\u95ee\u9898\u63cf\u8ff0\uff0c\u5177\u4f53\u4e00\u70b9\u5e94\u8be5\u662f\uff0c\u524d\u7aef\u6ca1\u6709\u5bf9\u540e\u7aef\u5b57\u6bb5\u8fdb\u884c\u6620\u5c04\uff1f\u6216\u8005\u662f\u6ca1\u6709\u8fc7model\uff1f",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=liuchengchuan",
      "name": "liuchengchuan",
      "key": "liuchengchuan",
      "emailAddress": "liuchengchuan@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=liuchengchuan&avatarId=11211",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=liuchengchuan&avatarId=11211",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=liuchengchuan&avatarId=11211",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=liuchengchuan&avatarId=11211"
      },
      "displayName": "\u5218\u627f\u5ddd",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T10:58:13.495+0800",
    "updated": "2017-11-30T10:58:13.495+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 02:58:13] "POST /webhook/jira?user_id=liuchengchuan&user_key=liuchengchuan HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512010783904,
  "webhookEvent": "comment_updated",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/125762/comment/58423",
    "id": "58423",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=pengzipei",
      "name": "pengzipei",
      "key": "pengzipei",
      "emailAddress": "pengzipei@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5f6d\u5b50\u6c9b",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010\u63d0\u6d4b\u529f\u80fd\u3011  doing by [~wanglei.02]\r\n\u89c6\u9891feed-refresh\u529f\u80fd\r\n\u3010\u5206\u652f\u3011\r\nlive_2.9_feed_refresh\r\n\u3010\u7ec6\u8282\u63cf\u8ff0&\u98ce\u9669\u63d0\u793a\u3011\r\nsetting\u63a5\u53e3\u4e0brefresh_icon_num\u5b57\u6bb5\u5224\u65ad\u662f\u5426\u5c55\u793a\uff0c<0\u4e3a\u4e0d\u5c55\u793a\uff0c=0\u4ec5\u5c55\u793a\u5237\u65b0\u6309\u94ae\uff0c>0\u65f6\u5c55\u793a\u5237\u65b0\u6570\u5b57\r\n\u5f53\u7528\u6237\u5728\u4e3b\u9875\u65f6\uff0c\u5c55\u793a\u5237\u65b0\u6309\u94ae\uff0c\u4e3b\u9875\u53d8\u4e3a\u3010\u5237\u65b0\u3011\r\n\u7528\u6237\u5728\u4e3b\u9875\u8d85\u8fc710\u79d2\u6ca1\u6709\u4efb\u4f55\u6ed1\u52a8\uff0c\u5c55\u793a\u5237\u65b0\u6570\u5b57\r\n\u5237\u65b0\u65f6\u5237\u65b0icon\u6709\u52a8\u753b\uff0c\u5237\u65b0\u5b8c\u6210\u65f6\u52a8\u753b\u7ed3\u675f\uff0c\u7ea2\u70b9\u6d88\u5931\r\n",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=wanglei.02",
      "name": "wanglei.02",
      "key": "wanglei.02",
      "emailAddress": "wanglei.02",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11138",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11138",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11138",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11138"
      },
      "displayName": "\u738b\u857e",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-29T22:02:18.000+0800",
    "updated": "2017-11-30T10:59:43.904+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 02:59:44] "POST /webhook/jira?user_id=wanglei.02&user_key=wanglei.02 HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512010811861,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/121614/comment/58451",
    "id": "58451",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=lihaining",
      "name": "lihaining",
      "key": "lihaining",
      "emailAddress": "lihaining@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11141",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11141",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11141",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11141"
      },
      "displayName": "\u674e\u6d77\u5b81",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u5df2\u7ecf\u5168\u90e8\u5207\u6362\u5b8c\u6210",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=lihaining",
      "name": "lihaining",
      "key": "lihaining",
      "emailAddress": "lihaining@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11141",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11141",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11141",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11141"
      },
      "displayName": "\u674e\u6d77\u5b81",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T11:00:11.861+0800",
    "updated": "2017-11-30T11:00:11.861+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 03:00:11] "POST /webhook/jira?user_id=lihaining&user_key=lihaining HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512010943935,
  "webhookEvent": "comment_updated",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/125764/comment/58418",
    "id": "58418",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=liuqing.90",
      "name": "liuqing.90",
      "key": "liuqing.90",
      "emailAddress": "liuqing.90@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5218\u9752",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010\u63d0\u6d4b\u529f\u80fd\u3011 doing by [~wanglei.02]\r\n\u5e95tab refresh\r\n\u3010\u5206\u652f\u3011 \r\nfeature/2.9.0_refresh\r\n\u3010\u7ec6\u8282\u63cf\u8ff0&\u98ce\u9669\u63d0\u793a\u3011 \r\n\u7531settings\u4e2d\u7684refresh_icon_num\u51b3\u5b9a\uff0c\u5982\u679c<0\u5219\u4f7f\u7528\u9ed8\u8ba4\u7684\uff0c=0\u663e\u793aicon\u4e0d\u663e\u793a\u6570\u5b57\uff0c>0\u663e\u793aicon\u4e14\u663e\u793a\u6570\u5b57\u3002\r\n\u7531\u4e8esettings\u6709\u7f13\u5b58\uff0c\u65b0\u7684\u8bbe\u7f6e\u4e0b\u6b21\u542f\u52a8\u751f\u6548",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=wanglei.02",
      "name": "wanglei.02",
      "key": "wanglei.02",
      "emailAddress": "wanglei.02",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11138",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11138",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11138",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11138"
      },
      "displayName": "\u738b\u857e",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-29T21:27:37.000+0800",
    "updated": "2017-11-30T11:02:23.935+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 03:02:24] "POST /webhook/jira?user_id=wanglei.02&user_key=wanglei.02 HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512011759600,
  "webhookEvent": "comment_updated",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127154/comment/57985",
    "id": "57985",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=xuyingyi",
      "name": "xuyingyi",
      "key": "xuyingyi",
      "emailAddress": "xuyingyi@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=xuyingyi&avatarId=11514",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=xuyingyi&avatarId=11514",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=xuyingyi&avatarId=11514",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=xuyingyi&avatarId=11514"
      },
      "displayName": "\u5f90\u9896\u9038",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010\u63d0\u6d4b\u529f\u80fd\u3011 \r\n\u4e0a\u4e0b\u6ed1\u52a8\u76f4\u64ad\u95f4\u4e8c\u671f - \u6ed1\u52a8\u5207\u6362\u540c\u57ce\u76f4\u64ad\u95f4\r\n\u3010\u63d0\u6d4b\u5206\u652f\u3011 \r\norigin/dev_live_swipe_rooms_v2\r\n\u3010\u7ec6\u8282\u63cf\u8ff0 & \u98ce\u9669\u63d0\u793a\u3011 \r\n1. \u540c\u57ce\u4e0b\u7684\u76f4\u64ad\u80fd\u5426\u6ed1\u52a8\u3001\u52a0\u8f7d\u66f4\u591a\u3001\u9000\u51fa\u540e\u5b9a\u4f4d\u5230\u76f4\u64ad\u95f4\uff1b \r\n\u3010\u63a5\u53e3 & \u5b57\u6bb5\u3011 \r\n1. A/B \u5b57\u6bb5\u540d\uff1aswipe_room_switch\uff0c\u6309\u4f4d\u4ece\u4f4e\u4f4d\u5230\u9ad8\u4f4d\u5206\u522b\u63a7\u5236\u76f4\u64ad\u3001\u5173\u6ce8\u3001\u540c\u57ce\uff0c0\u8868\u793a\u53ef\u6ed1\uff0c1\u8868\u793a\u4e0d\u53ef\u6ed1\u3002\r\n\r\ndone \u2014\u2014by tongyao",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=tongyao",
      "name": "tongyao",
      "key": "tongyao",
      "emailAddress": "tongyao@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=tongyao&avatarId=11319",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=tongyao&avatarId=11319",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=tongyao&avatarId=11319",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=tongyao&avatarId=11319"
      },
      "displayName": "\u4edd\u7476",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-28T14:05:44.000+0800",
    "updated": "2017-11-30T11:15:59.600+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 03:15:59] "POST /webhook/jira?user_id=tongyao&user_key=tongyao HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512011775924,
  "webhookEvent": "comment_updated",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127154/comment/57987",
    "id": "57987",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=lijun.02",
      "name": "lijun.02",
      "key": "lijun.02",
      "emailAddress": "lijun.02@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=lijun.02&avatarId=11501",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=lijun.02&avatarId=11501",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=lijun.02&avatarId=11501",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=lijun.02&avatarId=11501"
      },
      "displayName": "\u9ece\u519b",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010\u63d0\u6d4b\u529f\u80fd\u3011 \r\npush\u4f18\u5316\u4e00\u671f \u6d4b\u8bd5\r\n\u3010\u63d0\u6d4b\u5206\u652f\u3011 \r\norigin/push_optimize \r\n\u3010\u7ec6\u8282\u63cf\u8ff0 & \u98ce\u9669\u63d0\u793a\u3011 \r\n\u4ecepush\u8fdb\u6765\u7684\u76f4\u64ad\u95f4\uff0c\u5f53\u76f4\u64ad\u7ed3\u675f\u65f6\uff0c\u76f4\u63a5\u8df3\u8f6c \u4e3b\u64adprofile\r\n\u4ecepush\u51b7\u542f\u52a8app\u65f6\uff0c\u4f1a\u56de\u5230\u76f4\u64adtab\r\n\r\n\u3010\u63a5\u53e3 & \u5b57\u6bb5\u3011 \r\n\r\ndone by tongyao",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=tongyao",
      "name": "tongyao",
      "key": "tongyao",
      "emailAddress": "tongyao@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=tongyao&avatarId=11319",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=tongyao&avatarId=11319",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=tongyao&avatarId=11319",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=tongyao&avatarId=11319"
      },
      "displayName": "\u4edd\u7476",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-28T14:11:02.000+0800",
    "updated": "2017-11-30T11:16:15.924+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 03:16:16] "POST /webhook/jira?user_id=tongyao&user_key=tongyao HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512011891835,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127154/comment/58453",
    "id": "58453",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=caibingqing",
      "name": "caibingqing",
      "key": "caibingqing",
      "emailAddress": "caibingqing@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "caibingqing",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u5df2\u9a8c",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=caibingqing",
      "name": "caibingqing",
      "key": "caibingqing",
      "emailAddress": "caibingqing@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "caibingqing",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T11:18:11.835+0800",
    "updated": "2017-11-30T11:18:11.835+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 03:18:11] "POST /webhook/jira?user_id=caibingqing&user_key=caibingqing HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512011904906,
  "webhookEvent": "comment_deleted",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127154/comment/58453",
    "id": "58453",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=caibingqing",
      "name": "caibingqing",
      "key": "caibingqing",
      "emailAddress": "caibingqing@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "caibingqing",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u5df2\u9a8c",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=caibingqing",
      "name": "caibingqing",
      "key": "caibingqing",
      "emailAddress": "caibingqing@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "caibingqing",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T11:18:11.000+0800",
    "updated": "2017-11-30T11:18:11.000+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 03:18:25] "POST /webhook/jira?user_id=caibingqing&user_key=caibingqing HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512011944635,
  "webhookEvent": "comment_updated",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127154/comment/58067",
    "id": "58067",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=lujunming",
      "name": "lujunming",
      "key": "lujunming",
      "emailAddress": "lujunming@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11141",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11141",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11141",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11141"
      },
      "displayName": "\u9646\u4fca\u540d",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010\u63d0\u6d4b\u529f\u80fd\u3011 \r\n\u4e2a\u4ebaprofle\u63a8\u8350\u5173\u6ce8+\u76f4\u64ad\r\n\u3010\u63d0\u6d4b\u5206\u652f\u3011 \r\norigin/refactor_modularization_follow\r\n\u3010\u7ec6\u8282\u63cf\u8ff0 & \u98ce\u9669\u63d0\u793a\u3011 \r\n1. \u76f4\u64ad\u4e2d\u5934\u50cf\u70b9\u51fb\u662f\u5426\u8fdb\u5165\u76f4\u64ad\u95f4\r\n2. \u672a\u76f4\u64ad\u4e2d\u5934\u50cf\u70b9\u51fb\u662f\u5426\u8fdb\u5165\u4e2a\u4eba\u9875\u9762\r\n3. \u5ba2\u6237\u7aef\u7248\u672c\u53f7\u9700\u4e3a290\u53ca\u4ee5\u4e0a\r\n\r\n\u5df2\u9a8c",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=caibingqing",
      "name": "caibingqing",
      "key": "caibingqing",
      "emailAddress": "caibingqing@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "caibingqing",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-28T16:18:36.000+0800",
    "updated": "2017-11-30T11:19:04.635+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 03:19:04] "POST /webhook/jira?user_id=caibingqing&user_key=caibingqing HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512011967153,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127110/comment/58454",
    "id": "58454",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=guanwei",
      "name": "guanwei",
      "key": "guanwei",
      "emailAddress": "guanwei@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=guanwei&avatarId=11459",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=guanwei&avatarId=11459",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=guanwei&avatarId=11459",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=guanwei&avatarId=11459"
      },
      "displayName": "\u7ba1\u4f1f",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "https://fabric.io/bytedance-ee-ios/android/apps/com.ss.android.lark/issues/5a1e89ff61b02d480d7f6e63?time=last-twenty-four-hours",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=guanwei",
      "name": "guanwei",
      "key": "guanwei",
      "emailAddress": "guanwei@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=guanwei&avatarId=11459",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=guanwei&avatarId=11459",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=guanwei&avatarId=11459",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=guanwei&avatarId=11459"
      },
      "displayName": "\u7ba1\u4f1f",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T11:19:27.153+0800",
    "updated": "2017-11-30T11:19:27.153+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 03:19:27] "POST /webhook/jira?user_id=guanwei&user_key=guanwei HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512011974350,
  "webhookEvent": "comment_updated",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127630/comment/58327",
    "id": "58327",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=wangkunpeng",
      "name": "wangkunpeng",
      "key": "wangkunpeng",
      "emailAddress": "wangkunpeng@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u738b\u6606\u9e4f",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "1.\u76f8\u518c\u5207\u6362\u4eceAL\u5e93\u5207\u6362\u5230PH\u5e93\uff1a\r\n  \u6d89\u53ca\u70b9 \u6240\u6709\u76f8\u5173\u56fe\u7247\u3001\u89c6\u9891\u7684feature\u3002\u5305\u62ec\u9996\u6b21\u5c55\u793a\u76f8\u518c\u3001\u6295\u7a3f\u3001\u9009\u56fe\u3001\u9009\u56fe\u5185\u9884\u89c8\u3001\u6295\u7a3f\u9875\u5185\u9884\u89c8\u3001\u8349\u7a3f\u3001\u53d1\u56fe\u3001fake\u663e\u793a\u56fe\u7247\u3001\u8bc4\u8bba\u53d1\u56fe\u3001fake\u8bc4\u8bba\u3001\u53ca\u89c6\u9891\u6295\u7a3f\u7684\u5404\u4e2a\u70b9\u3002fake\u5305\u62ec\u9996\u9875fake\u3001\u4e2a\u4eba\u9875fake\u3001\u5427\u5185fake\u3001\u8bc4\u8bbafake. \u989d\u5916iCloud\u7684case.\r\n\r\n2.\u6295\u7a3f\u6d3b\u52a8\u5165\u53e3\u9884\u57cb\r\n  \u5177\u4f53\u53c8setting\u5f00\u5173\u4fe1\u606f\u63a7\u5236\u53ca\u8df3\u8f6c\u5730\u5740\u53ca\u56fe\u7247icon\r\n\r\n3.\u5723\u8bde\u5e3d\r\n\u9700\u6c42\u4e3a\u9996\u9875\u53d1\u5e16\u7528\u6237\u5934\u50cf\u3001\u89c6\u9891\u8be6\u60c5\u9875\u5934\u50cf\u3001\u8be6\u60c5\u9875\u8bc4\u8bba\u5934\u50cf\u3001\u4e2a\u4eba\u9875\u5927\u5934\u50cf\u3002\r\n",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=wangkunpeng",
      "name": "wangkunpeng",
      "key": "wangkunpeng",
      "emailAddress": "wangkunpeng@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u738b\u6606\u9e4f",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-29T15:28:20.000+0800",
    "updated": "2017-11-30T11:19:34.350+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 03:19:34] "POST /webhook/jira?user_id=wangkunpeng&user_key=wangkunpeng HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512011995639,
  "webhookEvent": "comment_updated",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127154/comment/58067",
    "id": "58067",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=lujunming",
      "name": "lujunming",
      "key": "lujunming",
      "emailAddress": "lujunming@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11141",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11141",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11141",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11141"
      },
      "displayName": "\u9646\u4fca\u540d",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010\u63d0\u6d4b\u529f\u80fd\u3011 \r\n\u4e2a\u4ebaprofle\u63a8\u8350\u5173\u6ce8+\u76f4\u64ad\r\n\u3010\u63d0\u6d4b\u5206\u652f\u3011 \r\norigin/refactor_modularization_follow\r\n\u3010\u7ec6\u8282\u63cf\u8ff0 & \u98ce\u9669\u63d0\u793a\u3011 \r\n1. \u76f4\u64ad\u4e2d\u5934\u50cf\u70b9\u51fb\u662f\u5426\u8fdb\u5165\u76f4\u64ad\u95f4\r\n2. \u672a\u76f4\u64ad\u4e2d\u5934\u50cf\u70b9\u51fb\u662f\u5426\u8fdb\u5165\u4e2a\u4eba\u9875\u9762\r\n3. \u5ba2\u6237\u7aef\u7248\u672c\u53f7\u9700\u4e3a290\u53ca\u4ee5\u4e0a\r\n\r\ndone by caibingqing",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=caibingqing",
      "name": "caibingqing",
      "key": "caibingqing",
      "emailAddress": "caibingqing@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "caibingqing",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-28T16:18:36.000+0800",
    "updated": "2017-11-30T11:19:55.639+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 03:19:55] "POST /webhook/jira?user_id=caibingqing&user_key=caibingqing HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512012041240,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127846/comment/58455",
    "id": "58455",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=guojiangtao",
      "name": "guojiangtao",
      "key": "guojiangtao",
      "emailAddress": "guojiangtao@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11141",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11141",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11141",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11141"
      },
      "displayName": "guojiangtao",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u8ddf\u4ea7\u54c1\u786e\u8ba4\u8fc7 \u53ef\u63a5\u53d7",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=guojiangtao",
      "name": "guojiangtao",
      "key": "guojiangtao",
      "emailAddress": "guojiangtao@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11141",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11141",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11141",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11141"
      },
      "displayName": "guojiangtao",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T11:20:41.240+0800",
    "updated": "2017-11-30T11:20:41.240+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 03:20:41] "POST /webhook/jira?user_id=guojiangtao&user_key=guojiangtao HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512012120711,
  "webhookEvent": "comment_updated",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127154/comment/58061",
    "id": "58061",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=lujunming",
      "name": "lujunming",
      "key": "lujunming",
      "emailAddress": "lujunming@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11141",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11141",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11141",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11141"
      },
      "displayName": "\u9646\u4fca\u540d",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010\u63d0\u6d4b\u529f\u80fd\u3011 \r\n\u76f4\u64ad\u5c01\u9762\u4fe1\u606f\u5143\u7d20ab\u9700\u6c42\r\n\u3010\u63d0\u6d4b\u5206\u652f\u3011 \r\norigin/refactor_modularization_ui\r\n\u3010\u7ec6\u8282\u63cf\u8ff0 & \u98ce\u9669\u63d0\u793a\u3011 \r\n1. \u9ed8\u8ba4\u60c5\u51b5\u662f\u5426\u5c55\u793a\u5168\u90e8\r\n2. \u5404\u79cd\u60c5\u51b5\u4e0b\u662f\u5426\u6b63\u5e38\u5c55\u793a\r\n\u3010\u63a5\u53e3 & \u5b57\u6bb5\u3011 \r\n1. A/B \u5b57\u6bb5\u540d\uff1alive_feed_cell_cover_content\uff0c\u6309\u4f4d\u4ece\u4f4e\u4f4d\u5230\u9ad8\u4f4d\u5206\u522b\u63a7\u5236\u4f4d\u7f6e\u3001\u6807\u9898\u3001\u4eba\u6570\uff0c0\u8868\u793a\u9690\u85cf\uff0c1\u8868\u793a\u5c55\u793a\u3002\r\n\r\n\u8fd8\u6709\u95ee\u9898 by caibingqing",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=caibingqing",
      "name": "caibingqing",
      "key": "caibingqing",
      "emailAddress": "caibingqing@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "caibingqing",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-28T16:07:33.000+0800",
    "updated": "2017-11-30T11:22:00.711+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 03:22:00] "POST /webhook/jira?user_id=caibingqing&user_key=caibingqing HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512012142312,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/126616/comment/58456",
    "id": "58456",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=weijianli",
      "name": "weijianli",
      "key": "weijianli",
      "emailAddress": "weijianli@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11146",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11146",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11146",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11146"
      },
      "displayName": "\u9b4f\u5efa\u7acb",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "ps:\u8fd9\u4e0d\u662f\u7f3a\u9677\uff0c\u8fd9\u662f\u9700\u6c42",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=weijianli",
      "name": "weijianli",
      "key": "weijianli",
      "emailAddress": "weijianli@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11146",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11146",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11146",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11146"
      },
      "displayName": "\u9b4f\u5efa\u7acb",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T11:22:22.312+0800",
    "updated": "2017-11-30T11:22:22.312+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 03:22:22] "POST /webhook/jira?user_id=weijianli&user_key=weijianli HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512012156299,
  "webhookEvent": "comment_updated",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127154/comment/58063",
    "id": "58063",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=lujunming",
      "name": "lujunming",
      "key": "lujunming",
      "emailAddress": "lujunming@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11141",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11141",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11141",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11141"
      },
      "displayName": "\u9646\u4fca\u540d",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010\u63d0\u6d4b\u529f\u80fd\u3011 \r\n\u591a\u5165\u53e3+\u201c\u76f4\u64ad\u4e2d\u201d\u6837\u5f0f\r\n\u3010\u63d0\u6d4b\u5206\u652f\u3011 \r\norigin/refactor_modularization_follow\r\n\u3010\u7ec6\u8282\u63cf\u8ff0 & \u98ce\u9669\u63d0\u793a\u3011 \r\n1. \u76f4\u64ad\u4e2d\u5934\u50cf\u70b9\u51fb\u662f\u5426\u8fdb\u5165\u76f4\u64ad\u95f4\r\n2. \u672a\u76f4\u64ad\u4e2d\u5934\u50cf\u70b9\u51fb\u662f\u5426\u8fdb\u5165\u4e2a\u4eba\u9875\u9762\r\n3. \u591a\u5165\u53e3\u662f\u5426\u90fd\u6b63\u5e38\u5c55\u793a\u76f4\u64ad\u4e2d\r\n4. \u5ba2\u6237\u7aef\u7248\u672c\u53f7\u9700\u4e3a290\u53ca\u4ee5\u4e0a\r\n\r\n\u8fd8\u6709\u95ee\u9898 by caibingqing",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=caibingqing",
      "name": "caibingqing",
      "key": "caibingqing",
      "emailAddress": "caibingqing@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "caibingqing",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-28T16:11:58.000+0800",
    "updated": "2017-11-30T11:22:36.299+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 03:22:36] "POST /webhook/jira?user_id=caibingqing&user_key=caibingqing HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512012222544,
  "webhookEvent": "comment_updated",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/125762/comment/58205",
    "id": "58205",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=pengzipei",
      "name": "pengzipei",
      "key": "pengzipei",
      "emailAddress": "pengzipei@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5f6d\u5b50\u6c9b",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010\u63d0\u6d4b\u529f\u80fd\u3011\u90ed\u6c5f\u6d9b done\r\n\u89c6\u9891Feed-\u63a8\u8350\u7406\u7531&&\u540c\u57cePOI\r\n\u3010\u5206\u652f\u3011\r\nlive_2.9_feed_card_recommend\r\n\u3010\u7ec6\u8282\u63cf\u8ff0&\u98ce\u9669\u63d0\u793a\u3011\r\n\u63a8\u8350\u7406\u7531\uff1a\r\n\u89c6\u9891Feed\u4e0bMedia\u5b57\u6bb5\u4e2dRecommendReason\u5b57\u6bb5\uff0ctype\u4e3a1\u65f6\u4e3a\u540c\u57ce\u5185\u5bb9\uff0c\u6b64\u65f6\u5728feed\u5361\u7247\u5de6\u4e0a\u89d2\u5c55\u793a\u540c\u57ce\u7684icon\u53cacity\u5b57\u6bb5\uff1b\u4e3a2\u65f6\u5728feed\u5361\u7247\u5de6\u4e0a\u89d2\u5c55\u793a\u597d\u53cbicon\u53ca \u597d\u53cbAB\uff0cA\u4e3a friend_name\u5b57\u6bb5\uff08\u53ef\u80fd\u4e3a\u7a7a\uff09\uff0cB\u4e3areason\u5b57\u6bb5\r\n\r\n\u540c\u57cePOI\r\n\u540c\u57cefeed\u4e0bmedia\u5b57\u6bb5\u4e2dposition\u5b57\u6bb5\u5b58\u5728\u65f6\u5c55\u793a\u548c\u63a8\u8350\u7406\u7531\u7c7b\u4f3c\u7684UI\r\n\r\n\u5f53\u5b57\u6570\u8fbe\u5230\u4e00\u5b9a\u9650\u5236\u5c06\u8d85\u51fa\u5c4f\u5e55\u65f6\uff08\u5ba2\u6237\u7aefUI\u5224\u65ad\uff09\uff0c\u622a\u65ad\u5b57\u7b26\u4e32\u7528...\u4ee3\u66ff\u5c55\u793a\u3002\u5982\u679c\u662f\u63a8\u8350\u7406\u7531\uff0c\u53ea\u622a\u65adfriend_name\u5b57\u6bb5",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=guojiangtao",
      "name": "guojiangtao",
      "key": "guojiangtao",
      "emailAddress": "guojiangtao@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11141",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11141",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11141",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11141"
      },
      "displayName": "guojiangtao",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-28T21:47:42.000+0800",
    "updated": "2017-11-30T11:23:42.544+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 03:23:42] "POST /webhook/jira?user_id=guojiangtao&user_key=guojiangtao HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512012256242,
  "webhookEvent": "comment_updated",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/125762/comment/58214",
    "id": "58214",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=pengzipei",
      "name": "pengzipei",
      "key": "pengzipei",
      "emailAddress": "pengzipei@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5f6d\u5b50\u6c9b",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010\u63d0\u6d4b\u529f\u80fd\u3011\u90ed\u6c5f\u6d9b doing\r\n\u89c6\u9891Feed-Feed\u5361\u7247\u6539\u7248\r\n\u3010\u5206\u652f\u3011\r\nlive_2.9_feed_card_update\r\n\u3010\u7ec6\u8282\u63cf\u8ff0&\u98ce\u9669\u63d0\u793a\u3011\r\n\u89c6\u9891Feed\u4e0b\uff0cfeed\u548c\u5e7f\u544acard\u67093\u79cd\u6837\u5f0f\uff0c\u5206\u522b\u662f\r\n1\u3010\u5c0f\u6807\u9898+\u5c0f\u5934\u50cf\u3011\r\n2\u3010\u5927\u6807\u9898+\u5c0f\u5934\u50cf\u3011\r\n3\u3010\u5927\u6807\u9898+\u5927\u5934\u50cf\u3011\uff0c\u8bc4\u8bba\u662f\u5426\u5c55\u793a\u7531\u540e\u7aef\u63a7\u5236\r\n\u5b57\u6bb5\u662fmedia\u4e0b\u7684cell_style",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=guojiangtao",
      "name": "guojiangtao",
      "key": "guojiangtao",
      "emailAddress": "guojiangtao@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11141",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11141",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11141",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11141"
      },
      "displayName": "guojiangtao",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-28T22:30:30.000+0800",
    "updated": "2017-11-30T11:24:16.242+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 03:24:16] "POST /webhook/jira?user_id=guojiangtao&user_key=guojiangtao HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512012327835,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/122825/comment/58457",
    "id": "58457",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=zhuangjingjing",
      "name": "zhuangjingjing",
      "key": "zhuangjingjing",
      "emailAddress": "zhuangjingjing@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "zhuangjingjing",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u5df2\u4fee\u590d",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=zhuangjingjing",
      "name": "zhuangjingjing",
      "key": "zhuangjingjing",
      "emailAddress": "zhuangjingjing@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "zhuangjingjing",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T11:25:27.835+0800",
    "updated": "2017-11-30T11:25:27.835+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 03:25:27] "POST /webhook/jira?user_id=zhuangjingjing&user_key=zhuangjingjing HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512012351412,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127905/comment/58458",
    "id": "58458",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=guanwei",
      "name": "guanwei",
      "key": "guanwei",
      "emailAddress": "guanwei@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=guanwei&avatarId=11459",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=guanwei&avatarId=11459",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=guanwei&avatarId=11459",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=guanwei&avatarId=11459"
      },
      "displayName": "\u7ba1\u4f1f",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "https://fabric.io/bytedance-ee-ios/android/apps/com.ss.android.lark/issues/5a1e396d61b02d480d7b700e?time=last-twenty-four-hours",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=guanwei",
      "name": "guanwei",
      "key": "guanwei",
      "emailAddress": "guanwei@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=guanwei&avatarId=11459",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=guanwei&avatarId=11459",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=guanwei&avatarId=11459",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=guanwei&avatarId=11459"
      },
      "displayName": "\u7ba1\u4f1f",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T11:25:51.412+0800",
    "updated": "2017-11-30T11:25:51.412+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 03:25:51] "POST /webhook/jira?user_id=guanwei&user_key=guanwei HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512012552561,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/121131/comment/58460",
    "id": "58460",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=lvshuangquan",
      "name": "lvshuangquan",
      "key": "lvshuangquan",
      "emailAddress": "lvshuangquan@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11146",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11146",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11146",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11146"
      },
      "displayName": "\u5415\u53cc\u5168",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010CPT\u4e0d\u6324\u5360GD\u903b\u8f91\uff0cGD\u65e0\u5237\u6b21\u3011\u672c\u5468\u91cd\u6784\u63a5\u53e3\uff0c\u63d0\u9ad8\u63a5\u53e3\u9c81\u68d2\u6027\r\n",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=lvshuangquan",
      "name": "lvshuangquan",
      "key": "lvshuangquan",
      "emailAddress": "lvshuangquan@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11146",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11146",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11146",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11146"
      },
      "displayName": "\u5415\u53cc\u5168",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T11:29:12.561+0800",
    "updated": "2017-11-30T11:29:12.561+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 03:29:12] "POST /webhook/jira?user_id=lvshuangquan&user_key=lvshuangquan HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512013201455,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127110/comment/58462",
    "id": "58462",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=guanwei",
      "name": "guanwei",
      "key": "guanwei",
      "emailAddress": "guanwei@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=guanwei&avatarId=11459",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=guanwei&avatarId=11459",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=guanwei&avatarId=11459",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=guanwei&avatarId=11459"
      },
      "displayName": "\u7ba1\u4f1f",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "https://fabric.io/bytedance-ee-ios/android/apps/com.ss.android.lark/issues/5a1e387561b02d480d7b653f?time=last-twenty-four-hours",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=guanwei",
      "name": "guanwei",
      "key": "guanwei",
      "emailAddress": "guanwei@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=guanwei&avatarId=11459",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=guanwei&avatarId=11459",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=guanwei&avatarId=11459",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=guanwei&avatarId=11459"
      },
      "displayName": "\u7ba1\u4f1f",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T11:40:01.455+0800",
    "updated": "2017-11-30T11:40:01.455+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 03:40:01] "POST /webhook/jira?user_id=guanwei&user_key=guanwei HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512013224532,
  "webhookEvent": "comment_deleted",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/123988/comment/56586",
    "id": "56586",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=dingxinghua",
      "name": "dingxinghua",
      "key": "dingxinghua",
      "emailAddress": "dingxinghua@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=dingxinghua&avatarId=11503",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=dingxinghua&avatarId=11503",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=dingxinghua&avatarId=11503",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=dingxinghua&avatarId=11503"
      },
      "displayName": "\u4e01\u5174\u534e",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u8ddf\u77406.6.7\u7684\u9700\u6c42\u8d70",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=dingxinghua",
      "name": "dingxinghua",
      "key": "dingxinghua",
      "emailAddress": "dingxinghua@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=dingxinghua&avatarId=11503",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=dingxinghua&avatarId=11503",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=dingxinghua&avatarId=11503",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=dingxinghua&avatarId=11503"
      },
      "displayName": "\u4e01\u5174\u534e",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-20T17:01:44.000+0800",
    "updated": "2017-11-20T17:01:44.000+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 03:40:24] "POST /webhook/jira?user_id=wangjiacui&user_key=wangjiacui HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512013291436,
  "webhookEvent": "comment_deleted",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/125216/comment/57016",
    "id": "57016",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=dingxinghua",
      "name": "dingxinghua",
      "key": "dingxinghua",
      "emailAddress": "dingxinghua@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=dingxinghua&avatarId=11503",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=dingxinghua&avatarId=11503",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=dingxinghua&avatarId=11503",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=dingxinghua&avatarId=11503"
      },
      "displayName": "\u4e01\u5174\u534e",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u8bbe\u8ba1\u7a3f\u5728zeplin",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=dingxinghua",
      "name": "dingxinghua",
      "key": "dingxinghua",
      "emailAddress": "dingxinghua@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=dingxinghua&avatarId=11503",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=dingxinghua&avatarId=11503",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=dingxinghua&avatarId=11503",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=dingxinghua&avatarId=11503"
      },
      "displayName": "\u4e01\u5174\u534e",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-23T11:44:10.000+0800",
    "updated": "2017-11-23T11:44:10.000+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 03:41:31] "POST /webhook/jira?user_id=wangjiacui&user_key=wangjiacui HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512013348302,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127915/comment/58463",
    "id": "58463",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=guanwei",
      "name": "guanwei",
      "key": "guanwei",
      "emailAddress": "guanwei@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=guanwei&avatarId=11459",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=guanwei&avatarId=11459",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=guanwei&avatarId=11459",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=guanwei&avatarId=11459"
      },
      "displayName": "\u7ba1\u4f1f",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "https://ee-sentry.byted.org/bytedance-ee/lark-android/issues/5143388/",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=guanwei",
      "name": "guanwei",
      "key": "guanwei",
      "emailAddress": "guanwei@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=guanwei&avatarId=11459",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=guanwei&avatarId=11459",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=guanwei&avatarId=11459",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=guanwei&avatarId=11459"
      },
      "displayName": "\u7ba1\u4f1f",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T11:42:28.302+0800",
    "updated": "2017-11-30T11:42:28.302+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 03:42:28] "POST /webhook/jira?user_id=guanwei&user_key=guanwei HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512013371608,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127433/comment/58464",
    "id": "58464",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=zhangxiaoxue.02",
      "name": "zhangxiaoxue.02",
      "key": "zhangxiaoxue.02",
      "emailAddress": "zhangxiaoxue.02@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11141",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11141",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11141",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11141"
      },
      "displayName": "\u5f20\u5c0f\u96ea",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u8be5\u95ee\u9898\u5df2\u5728\u6700\u65b0\u5305\u4fee\u590d\uff0c\u5173\u95ed\u8be5bug\u3002",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=zhangxiaoxue.02",
      "name": "zhangxiaoxue.02",
      "key": "zhangxiaoxue.02",
      "emailAddress": "zhangxiaoxue.02@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11141",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11141",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11141",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11141"
      },
      "displayName": "\u5f20\u5c0f\u96ea",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T11:42:51.608+0800",
    "updated": "2017-11-30T11:42:51.608+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 03:42:51] "POST /webhook/jira?user_id=zhangxiaoxue.02&user_key=zhangxiaoxue.02 HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512013439631,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127915/comment/58465",
    "id": "58465",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=guanwei",
      "name": "guanwei",
      "key": "guanwei",
      "emailAddress": "guanwei@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=guanwei&avatarId=11459",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=guanwei&avatarId=11459",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=guanwei&avatarId=11459",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=guanwei&avatarId=11459"
      },
      "displayName": "\u7ba1\u4f1f",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "https://ee-sentry.byted.org/bytedance-ee/lark-android/issues/5143389/",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=guanwei",
      "name": "guanwei",
      "key": "guanwei",
      "emailAddress": "guanwei@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=guanwei&avatarId=11459",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=guanwei&avatarId=11459",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=guanwei&avatarId=11459",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=guanwei&avatarId=11459"
      },
      "displayName": "\u7ba1\u4f1f",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T11:43:59.631+0800",
    "updated": "2017-11-30T11:43:59.631+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 03:43:59] "POST /webhook/jira?user_id=guanwei&user_key=guanwei HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512013480935,
  "webhookEvent": "comment_updated",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127154/comment/58061",
    "id": "58061",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=lujunming",
      "name": "lujunming",
      "key": "lujunming",
      "emailAddress": "lujunming@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11141",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11141",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11141",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11141"
      },
      "displayName": "\u9646\u4fca\u540d",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010\u63d0\u6d4b\u529f\u80fd\u3011 \r\n\u76f4\u64ad\u5c01\u9762\u4fe1\u606f\u5143\u7d20ab\u9700\u6c42\r\n\u3010\u63d0\u6d4b\u5206\u652f\u3011 \r\norigin/refactor_modularization_ui\r\n\u3010\u7ec6\u8282\u63cf\u8ff0 & \u98ce\u9669\u63d0\u793a\u3011 \r\n1. \u9ed8\u8ba4\u60c5\u51b5\u662f\u5426\u5c55\u793a\u5168\u90e8\r\n2. \u5404\u79cd\u60c5\u51b5\u4e0b\u662f\u5426\u6b63\u5e38\u5c55\u793a\r\n\u3010\u63a5\u53e3 & \u5b57\u6bb5\u3011 \r\n1. A/B \u5b57\u6bb5\u540d\uff1alive_feed_cell_cover_content\uff0c\u6309\u4f4d\u4ece\u4f4e\u4f4d\u5230\u9ad8\u4f4d\u5206\u522b\u63a7\u5236\u4f4d\u7f6e\u3001\u6807\u9898\u3001\u4eba\u6570\uff0c0\u8868\u793a\u9690\u85cf\uff0c1\u8868\u793a\u5c55\u793a\u3002\r\n\r\ndone by caibingqing",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=caibingqing",
      "name": "caibingqing",
      "key": "caibingqing",
      "emailAddress": "caibingqing@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "caibingqing",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-28T16:07:33.000+0800",
    "updated": "2017-11-30T11:44:40.935+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 03:44:41] "POST /webhook/jira?user_id=caibingqing&user_key=caibingqing HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512013501566,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127915/comment/58466",
    "id": "58466",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=guanwei",
      "name": "guanwei",
      "key": "guanwei",
      "emailAddress": "guanwei@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=guanwei&avatarId=11459",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=guanwei&avatarId=11459",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=guanwei&avatarId=11459",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=guanwei&avatarId=11459"
      },
      "displayName": "\u7ba1\u4f1f",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "Line 195 && Line 174",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=guanwei",
      "name": "guanwei",
      "key": "guanwei",
      "emailAddress": "guanwei@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=guanwei&avatarId=11459",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=guanwei&avatarId=11459",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=guanwei&avatarId=11459",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=guanwei&avatarId=11459"
      },
      "displayName": "\u7ba1\u4f1f",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T11:45:01.566+0800",
    "updated": "2017-11-30T11:45:01.566+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 03:45:01] "POST /webhook/jira?user_id=guanwei&user_key=guanwei HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512013505192,
  "webhookEvent": "project_created",
  "project": {
    "self": "https://jira.bytedance.com/rest/api/2/project/12004",
    "id": 12004,
    "key": "ADBEBUG",
    "name": "\u5546\u4e1a\u5e73\u53f0-\u7ebf\u4e0a\u95ee\u9898",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/projectavatar?avatarId=11124",
      "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&avatarId=11124",
      "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&avatarId=11124",
      "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&avatarId=11124"
    },
    "projectLead": {
      "self": "https://jira.bytedance.com/rest/api/2/user?key=liuyuzhang",
      "name": "liuyuzhang",
      "key": "liuyuzhang",
      "emailAddress": "liuyuzhang@bytedance.com",
      "displayName": "\u5218\u94b0\u7ae0"
    },
    "assigneeType": "admin.assignee.type.project.lead"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 03:45:05] "POST /webhook/jira?user_id=shizhi&user_key=shizhi HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512013689171,
  "webhookEvent": "worklog_created",
  "worklog": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127071/worklog/13824",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=sunkeqing",
      "name": "sunkeqing",
      "key": "sunkeqing",
      "emailAddress": "sunkeqing@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=sunkeqing&avatarId=11506",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=sunkeqing&avatarId=11506",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=sunkeqing&avatarId=11506",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=sunkeqing&avatarId=11506"
      },
      "displayName": "\u5b59\u53ef\u503e",
      "active": true,
      "timeZone": "PRC"
    },
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=sunkeqing",
      "name": "sunkeqing",
      "key": "sunkeqing",
      "emailAddress": "sunkeqing@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=sunkeqing&avatarId=11506",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=sunkeqing&avatarId=11506",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=sunkeqing&avatarId=11506",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=sunkeqing&avatarId=11506"
      },
      "displayName": "\u5b59\u53ef\u503e",
      "active": true,
      "timeZone": "PRC"
    },
    "comment": "\u524d\u7aef\u5df2\u5f00\u53d1\u5b8c\u6210\uff0c\u5f85\u540e\u7aef\u5f00\u53d1\u5b8c\u6210\u540e\u8054\u8c03\u5361\u5238\u5ba1\u6838\u6d41\u7a0b",
    "created": "2017-11-30T11:48:09.171+0800",
    "updated": "2017-11-30T11:48:09.171+0800",
    "started": "2017-11-30T11:47:00.000+0800",
    "timeSpent": "1m",
    "timeSpentSeconds": 60,
    "id": "13824",
    "issueId": "127071"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 03:48:09] "POST /webhook/jira?user_id=sunkeqing&user_key=sunkeqing HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512013756390,
  "webhookEvent": "worklog_created",
  "worklog": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/121138/worklog/13825",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=mengye",
      "name": "mengye",
      "key": "mengye",
      "emailAddress": "mengye@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5b5f\u70e8",
      "active": true,
      "timeZone": "PRC"
    },
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=mengye",
      "name": "mengye",
      "key": "mengye",
      "emailAddress": "mengye@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5b5f\u70e8",
      "active": true,
      "timeZone": "PRC"
    },
    "comment": "11\u670829\u65e5\u665a\u5e93\u5b58\u670d\u52a1\u5168\u91cf\u8fc1\u79fbTCE",
    "created": "2017-11-30T11:49:16.390+0800",
    "updated": "2017-11-30T11:49:16.390+0800",
    "started": "2017-11-30T11:48:00.000+0800",
    "timeSpent": "4d",
    "timeSpentSeconds": 115200,
    "id": "13825",
    "issueId": "121138"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 03:49:16] "POST /webhook/jira?user_id=mengye&user_key=mengye HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512013829766,
  "webhookEvent": "worklog_created",
  "worklog": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/121153/worklog/13826",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=mengye",
      "name": "mengye",
      "key": "mengye",
      "emailAddress": "mengye@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5b5f\u70e8",
      "active": true,
      "timeZone": "PRC"
    },
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=mengye",
      "name": "mengye",
      "key": "mengye",
      "emailAddress": "mengye@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5b5f\u70e8",
      "active": true,
      "timeZone": "PRC"
    },
    "comment": "\u672c\u5468\u4e09LR\u7ed3\u675f\u540e\uff0cpm\u63d0\u51fa\u4e86\u4e00\u4e2a\u5c0f\u5efa\u8bae\uff0c\u6539\u5b8c\u540e\u8ba1\u5212\u4e0a\u7ebf",
    "created": "2017-11-30T11:50:29.766+0800",
    "updated": "2017-11-30T11:50:29.766+0800",
    "started": "2017-11-30T11:49:00.000+0800",
    "timeSpent": "4d",
    "timeSpentSeconds": 115200,
    "id": "13826",
    "issueId": "121153"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 03:50:29] "POST /webhook/jira?user_id=mengye&user_key=mengye HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512013876210,
  "webhookEvent": "worklog_created",
  "worklog": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/118945/worklog/13827",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=mengye",
      "name": "mengye",
      "key": "mengye",
      "emailAddress": "mengye@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5b5f\u70e8",
      "active": true,
      "timeZone": "PRC"
    },
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=mengye",
      "name": "mengye",
      "key": "mengye",
      "emailAddress": "mengye@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5b5f\u70e8",
      "active": true,
      "timeZone": "PRC"
    },
    "comment": "\u76ee\u524d\u6d4b\u8bd5\u5e93\u5b58+\u8ba1\u5212+\u5ba1\u6838\u6ca1\u6709\u95ee\u9898\uff0cQA\u540c\u5b66\u5728\u6d4b\u8bd5\u5e7f\u544a\u662f\u5426\u80fd\u6b63\u5e38\u6295\u653e\u51fa\u6765",
    "created": "2017-11-30T11:51:16.210+0800",
    "updated": "2017-11-30T11:51:16.210+0800",
    "started": "2017-11-30T11:50:00.000+0800",
    "timeSpent": "4d",
    "timeSpentSeconds": 115200,
    "id": "13827",
    "issueId": "118945"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 03:51:16] "POST /webhook/jira?user_id=mengye&user_key=mengye HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512013958756,
  "webhookEvent": "worklog_created",
  "worklog": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/125391/worklog/13828",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=mengye",
      "name": "mengye",
      "key": "mengye",
      "emailAddress": "mengye@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5b5f\u70e8",
      "active": true,
      "timeZone": "PRC"
    },
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=mengye",
      "name": "mengye",
      "key": "mengye",
      "emailAddress": "mengye@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5b5f\u70e8",
      "active": true,
      "timeZone": "PRC"
    },
    "comment": "\u4fddreach\uff1a\u5c06\u5df2\u6709\u7684\u81ea\u6709\u4eba\u7fa4\u548c\u4f18\u9009\u4eba\u7fa4\u540c\u5b9a\u5411\u6761\u4ef6\u878d\u5408\u4f7f\u7528\u3002\u5728\u65b0\u65e7\u517c\u5bb9\u4ee5\u53ca\u540c\u9884\u4f30\u670d\u52a1\u4ea4\u4e92\u4e2d\u6bd4\u8f83\u590d\u6742\uff0c\u7565\u8017\u65f6\u3002\u76ee\u524d\u8fdb\u884c\u4e86\u591a\u4e00\u534a",
    "created": "2017-11-30T11:52:38.756+0800",
    "updated": "2017-11-30T11:52:38.756+0800",
    "started": "2017-11-30T11:51:00.000+0800",
    "timeSpent": "1w",
    "timeSpentSeconds": 144000,
    "id": "13828",
    "issueId": "125391"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 03:52:38] "POST /webhook/jira?user_id=mengye&user_key=mengye HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512013965428,
  "webhookEvent": "worklog_deleted",
  "worklog": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/125391/worklog/13810",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=mengye",
      "name": "mengye",
      "key": "mengye",
      "emailAddress": "mengye@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5b5f\u70e8",
      "active": true,
      "timeZone": "PRC"
    },
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=mengye",
      "name": "mengye",
      "key": "mengye",
      "emailAddress": "mengye@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5b5f\u70e8",
      "active": true,
      "timeZone": "PRC"
    },
    "comment": "",
    "created": "2017-11-29T10:42:19.000+0800",
    "updated": "2017-11-29T10:42:19.000+0800",
    "started": "2017-11-29T10:41:00.000+0800",
    "timeSpent": "4d",
    "timeSpentSeconds": 115200,
    "id": "13810",
    "issueId": "125391"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 03:52:45] "POST /webhook/jira?user_id=mengye&user_key=mengye HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512014017000,
  "webhookEvent": "worklog_updated",
  "worklog": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127528/worklog/13815",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=mengye",
      "name": "mengye",
      "key": "mengye",
      "emailAddress": "mengye@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5b5f\u70e8",
      "active": true,
      "timeZone": "PRC"
    },
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=mengye",
      "name": "mengye",
      "key": "mengye",
      "emailAddress": "mengye@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5b5f\u70e8",
      "active": true,
      "timeZone": "PRC"
    },
    "comment": "\u666e\u901a\u4e2d\u63d2\u5fc3\u5728\u5728\u5b9e\u9a8c\u9636\u6bb5\uff0c\u4e3a\u4e86\u914d\u5408\u6d4b\u8bd5\uff0c\u540e\u7aef\u914d\u5408\u624b\u52a8\u5f55\u5165\u3002\u76ee\u524d\u5728QA\u7684\u6d4b\u8bd5\u73af\u5883\u4e2d\u534f\u52a9\u5199\u5165\u4e86\u6570\u636e\uff0cQA\u4f1a\u5c06\u666e\u901a\u4e2d\u63d2\u548c\u521b\u610f\u4e2d\u63d2\u4e00\u8d77\u6d4b\u8bd5\u662f\u5426\u80fd\u6b63\u5e38\u6295\u653e",
    "created": "2017-11-29T13:00:00.000+0800",
    "updated": "2017-11-30T11:53:37.000+0800",
    "started": "2017-11-29T12:59:00.000+0800",
    "timeSpent": "4h",
    "timeSpentSeconds": 14400,
    "id": "13815",
    "issueId": "127528"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 03:53:37] "POST /webhook/jira?user_id=mengye&user_key=mengye HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512014045403,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/124559/comment/58467",
    "id": "58467",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=wangjingyi",
      "name": "wangjingyi",
      "key": "wangjingyi",
      "emailAddress": "wangjingyi@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u738b\u9759\u6021",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u5c0f\u89c6\u9891\u4e00\u5b9a\u6709\u5c01\u9762\u56fe\u7684\uff0c\u8fd9\u4e2acase\u611f\u89c9\u662f\u7f51\u7edc\u52a0\u8f7d\u56fe\u7247\u663e\u793a\u5931\u8d25\uff0c\u6ca1\u6709\u9ed8\u8ba4\u7684\u5360\u4f4d\u56fe\u3002",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=wangjingyi",
      "name": "wangjingyi",
      "key": "wangjingyi",
      "emailAddress": "wangjingyi@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u738b\u9759\u6021",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T11:54:05.403+0800",
    "updated": "2017-11-30T11:54:05.403+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 03:54:05] "POST /webhook/jira?user_id=wangjingyi&user_key=wangjingyi HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512014062961,
  "webhookEvent": "worklog_created",
  "worklog": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/125390/worklog/13829",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=mengye",
      "name": "mengye",
      "key": "mengye",
      "emailAddress": "mengye@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5b5f\u70e8",
      "active": true,
      "timeZone": "PRC"
    },
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=mengye",
      "name": "mengye",
      "key": "mengye",
      "emailAddress": "mengye@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5b5f\u70e8",
      "active": true,
      "timeZone": "PRC"
    },
    "comment": "\u7531\u4e8e\u7b97\u6cd5\u90a3\u8fb9\u6ca1\u6709\u4eba\u529b\u652f\u6301\uff0cpm\u6682\u5b9a\u8fd9\u4e2a\u9700\u6c42\u6b21\u8fed\u4ee3\u4e0d\u505a",
    "created": "2017-11-30T11:54:22.961+0800",
    "updated": "2017-11-30T11:54:22.961+0800",
    "started": "2017-11-30T11:53:00.000+0800",
    "timeSpent": "1d",
    "timeSpentSeconds": 28800,
    "id": "13829",
    "issueId": "125390"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 03:54:23] "POST /webhook/jira?user_id=mengye&user_key=mengye HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512014090798,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/125607/comment/58468",
    "id": "58468",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=xulide",
      "name": "xulide",
      "key": "xulide",
      "emailAddress": "xulide@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5f90\u7406\u5fb7",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "1.\u8be6\u60c5\u9875\u4e2a\u4eba\u9875\u6dfb\u52a0\u4e8c\u7ea7\u8bc4\u8bba;\r\n2.\u5728\u70ed\u8bc4\u4e4b\u524d\u4e0e\u4e4b\u540e\u6dfb\u52a0\u5e7f\u544a",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=xulide",
      "name": "xulide",
      "key": "xulide",
      "emailAddress": "xulide@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5f90\u7406\u5fb7",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T11:54:50.798+0800",
    "updated": "2017-11-30T11:54:50.798+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 03:54:50] "POST /webhook/jira?user_id=xulide&user_key=xulide HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512014132898,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127632/comment/58469",
    "id": "58469",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=zhangqing.zane",
      "name": "zhangqing.zane",
      "key": "zhangqing.zane",
      "emailAddress": "zhangqing.zane@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5f20\u5e86",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u4e00\u3001\u66f4\u65b0\u3001feedback \u6842\u8d85\u6709\u8fdb\u884c\u4e86\u9002\u5f53\u7684\u91cd\u6784\u8c03\u6574 \u8bf7\u6d4b\u8bd5\u540c\u5b66\u56de\u5f52\u4e00\u4e0b\r\n       \u6ce8\u610f\uff1a\u6d4b\u8bd5\u4e00\u4e0b\u5f39\u7a97\u673a\u5236\uff0c\u53ef\u80fd\u4f1a\u6709\u5f71\u54cd\r\n\u4e8c\u3001\u5723\u8bde\u6d3b\u52a8\u9884\u57cb\r\n\u4e09\u3001\u6e38\u620f\u4e2d\u5fc3\u76f8\u5173\u7684h5\u8df3\u8f6c\u548c\u6253\u70b9\r\n\u56db\u3001\u53d1\u73b0\u9875h5\u6539\u7248",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=zhangqing.zane",
      "name": "zhangqing.zane",
      "key": "zhangqing.zane",
      "emailAddress": "zhangqing.zane@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5f20\u5e86",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T11:55:32.898+0800",
    "updated": "2017-11-30T11:55:32.898+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 03:55:32] "POST /webhook/jira?user_id=zhangqing.zane&user_key=zhangqing.zane HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512014170506,
  "webhookEvent": "comment_updated",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/125762/comment/58401",
    "id": "58401",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=luozexin",
      "name": "luozexin",
      "key": "luozexin",
      "emailAddress": "luozexin@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "luozexin",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010\u63d0\u6d4b\u529f\u80fd\u3011---doing by yuanyuan \r\n\u7cbe\u51c6\u9884\u52a0\u8f7d\r\n\u3010\u5206\u652f\u3011\r\nlive_2.9.0_video_multi_cache\r\n\u3010\u7ec6\u8282\u63cf\u8ff0\u3011\r\n\u670d\u52a1\u7aef\u4e0b\u53d1media\uff0c\u589e\u52a0preload_size\u5b57\u6bb5\uff1b\u6bcf\u4e2a\u89c6\u9891\u5355\u72ec\u914d\u7f6e\u9884\u52a0\u8f7d\u5927\u5c0f",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=houyuanyuan",
      "name": "houyuanyuan",
      "key": "houyuanyuan",
      "emailAddress": "houyuanyuan@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=houyuanyuan&avatarId=11240",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=houyuanyuan&avatarId=11240",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=houyuanyuan&avatarId=11240",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=houyuanyuan&avatarId=11240"
      },
      "displayName": "\u4faf\u5a9b\u5a9b",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-29T18:43:05.000+0800",
    "updated": "2017-11-30T11:56:10.506+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 03:56:10] "POST /webhook/jira?user_id=houyuanyuan&user_key=houyuanyuan HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512014232402,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/121204/comment/58470",
    "id": "58470",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=sunkeqing",
      "name": "sunkeqing",
      "key": "sunkeqing",
      "emailAddress": "sunkeqing@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=sunkeqing&avatarId=11506",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=sunkeqing&avatarId=11506",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=sunkeqing&avatarId=11506",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=sunkeqing&avatarId=11506"
      },
      "displayName": "\u5b59\u53ef\u503e",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "11\u670827\u65e5 ~ 11\u670830\u65e5\uff1a\r\n1.\u95e8\u5e97\u7cfb\u7edf\u6570\u636e\u63a5\u53e3\u8fd8\u672a\u5f00\u59cb\u5f00\u53d1\r\n2.\u5361\u5238\u95e8\u5e97\u524d\u540e\u7aef\u5f00\u53d1\u4e2d",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=sunkeqing",
      "name": "sunkeqing",
      "key": "sunkeqing",
      "emailAddress": "sunkeqing@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=sunkeqing&avatarId=11506",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=sunkeqing&avatarId=11506",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=sunkeqing&avatarId=11506",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=sunkeqing&avatarId=11506"
      },
      "displayName": "\u5b59\u53ef\u503e",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T11:57:12.402+0800",
    "updated": "2017-11-30T11:57:12.402+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 03:57:12] "POST /webhook/jira?user_id=sunkeqing&user_key=sunkeqing HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512014239742,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127632/comment/58471",
    "id": "58471",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=yangyi.e",
      "name": "yangyi.e",
      "key": "yangyi.e",
      "emailAddress": "yangyi.e@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11134",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11134",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11134",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11134"
      },
      "displayName": "yangyi.e",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u6768\u6bc5\r\n\u4e8c\u7ea7\u8bc4\u8bba\u652f\u6301\u56fe\u7247\u3002\u542b\u4e92\u52a8\u3001Profile\u9875\u3001\u4e24\u4e2a\u8bc4\u8bba\u8be6\u60c5\u9875\u3002\r\n",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=yangyi.e",
      "name": "yangyi.e",
      "key": "yangyi.e",
      "emailAddress": "yangyi.e@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11134",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11134",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11134",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11134"
      },
      "displayName": "yangyi.e",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T11:57:19.742+0800",
    "updated": "2017-11-30T11:57:19.742+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 03:57:19] "POST /webhook/jira?user_id=yangyi.e&user_key=yangyi.e HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512014373853,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127071/comment/58472",
    "id": "58472",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=sunkeqing",
      "name": "sunkeqing",
      "key": "sunkeqing",
      "emailAddress": "sunkeqing@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=sunkeqing&avatarId=11506",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=sunkeqing&avatarId=11506",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=sunkeqing&avatarId=11506",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=sunkeqing&avatarId=11506"
      },
      "displayName": "\u5b59\u53ef\u503e",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "11\u670827\u65e5 ~ 11\u670830\u65e5\r\n\u524d\u7aef\u90e8\u5206\u5df2\u5f00\u53d1\u5b8c\u6210\uff0c\u5f85\u540e\u7aef\u5f00\u53d1\u5b8c\u6210\u540e\u8fdb\u884c\u8054\u8c03",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=sunkeqing",
      "name": "sunkeqing",
      "key": "sunkeqing",
      "emailAddress": "sunkeqing@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=sunkeqing&avatarId=11506",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=sunkeqing&avatarId=11506",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=sunkeqing&avatarId=11506",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=sunkeqing&avatarId=11506"
      },
      "displayName": "\u5b59\u53ef\u503e",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T11:59:33.853+0800",
    "updated": "2017-11-30T11:59:33.853+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 03:59:33] "POST /webhook/jira?user_id=sunkeqing&user_key=sunkeqing HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512014473379,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127925/comment/58474",
    "id": "58474",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=xiejiangquan",
      "name": "xiejiangquan",
      "key": "xiejiangquan",
      "emailAddress": "xiejiangquan@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11134",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11134",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11134",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11134"
      },
      "displayName": "\u8c22\u5c06\u6743",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u95ee\u9898\u539f\u56e0\uff1a\u767b\u5f55\u65f6\u5019\uff0c\u957f\u8fde\u63a5\u5148\u4e8e\u5b58\u50a8\u521b\u5efa\uff0c\u8fd9\u4e2a\u65f6\u5019\u5982\u679c\u6709\u6d88\u606f\u6765\uff0c\u5219\u4f1a\u51fa\u73b0\u7a7a\u6307\u9488\u5f02\u5e38\u3002",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=xiejiangquan",
      "name": "xiejiangquan",
      "key": "xiejiangquan",
      "emailAddress": "xiejiangquan@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11134",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11134",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11134",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11134"
      },
      "displayName": "\u8c22\u5c06\u6743",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T12:01:13.379+0800",
    "updated": "2017-11-30T12:01:13.379+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 04:01:13] "POST /webhook/jira?user_id=xiejiangquan&user_key=xiejiangquan HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512014776260,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127883/comment/58476",
    "id": "58476",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=wangpan",
      "name": "wangpan",
      "key": "wangpan",
      "emailAddress": "wangpan@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "wangpan",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u5df2\u548c\u5218\u6768\u786e\u8ba4\u4e0b\uff0c\u76ee\u524d\u673a\u5236\uff0c\u53ea\u4f1a\u91c7\u7528\u7528\u6237\u7b2c\u4e00\u6b21\u4f7f\u7528twitter\u7684\u56fe\u50cf\uff0c\u6240\u4ee5\u65e0\u8bba\u5982\u4f55\u5728twitter\u66f4\u6539\u5934\u50cf\u90fd\u4e0d\u4f1a\u901a\u4e0d\u8fc7\u6765\u3002\u9664\u975e\u81ea\u5df1\u5728app\u4e2d\u6539\u56fe\u50cf",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=wangpan",
      "name": "wangpan",
      "key": "wangpan",
      "emailAddress": "wangpan@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "wangpan",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T12:06:16.260+0800",
    "updated": "2017-11-30T12:06:16.260+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 04:06:16] "POST /webhook/jira?user_id=wangpan&user_key=wangpan HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512014787119,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127732/comment/58477",
    "id": "58477",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=xiejianmin",
      "name": "xiejianmin",
      "key": "xiejianmin",
      "emailAddress": "xiejianmin@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u8c22\u5251\u654f",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u670d\u52a1\u5df2\u7ecf\u6062\u590d\u3002",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=xiejianmin",
      "name": "xiejianmin",
      "key": "xiejianmin",
      "emailAddress": "xiejianmin@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u8c22\u5251\u654f",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T12:06:27.119+0800",
    "updated": "2017-11-30T12:06:27.119+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 04:06:27] "POST /webhook/jira?user_id=xiejianmin&user_key=xiejianmin HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512014803950,
  "webhookEvent": "comment_updated",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127883/comment/58476",
    "id": "58476",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=wangpan",
      "name": "wangpan",
      "key": "wangpan",
      "emailAddress": "wangpan@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "wangpan",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u5df2\u548c\u5218\u6768\u786e\u8ba4\u4e0b\uff0c\u76ee\u524d\u673a\u5236\uff0c\u53ea\u4f1a\u91c7\u7528\u7528\u6237\u7b2c\u4e00\u6b21\u4f7f\u7528twitter\u767b\u5f55\u7684\u56fe\u50cf\uff0c\u6240\u4ee5\u65e0\u8bba\u5982\u4f55\u5728twitter\u66f4\u6539\u5934\u50cf\u90fd\u4e0d\u4f1a\u901a\u4e0d\u8fc7\u6765\u3002\u9664\u975e\u81ea\u5df1\u5728app\u4e2d\u6539\u56fe\u50cf",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=wangpan",
      "name": "wangpan",
      "key": "wangpan",
      "emailAddress": "wangpan@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "wangpan",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T12:06:16.000+0800",
    "updated": "2017-11-30T12:06:43.950+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 04:06:44] "POST /webhook/jira?user_id=wangpan&user_key=wangpan HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512014872837,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127961/comment/58478",
    "id": "58478",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=chenghaiyan",
      "name": "chenghaiyan",
      "key": "chenghaiyan",
      "emailAddress": "chenghaiyan@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=chenghaiyan&avatarId=11417",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=chenghaiyan&avatarId=11417",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=chenghaiyan&avatarId=11417",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=chenghaiyan&avatarId=11417"
      },
      "displayName": "\u7a0b\u6d77\u71d5",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u53ef\u4ee5\u767b\u5f55\u8d26\u53f712340357167 654321 \u770b\u6d88\u606f\u7b2c\u4e00\u6761\u70b9\u8fdb\u53bb\u5c31\u884c",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=chenghaiyan",
      "name": "chenghaiyan",
      "key": "chenghaiyan",
      "emailAddress": "chenghaiyan@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=chenghaiyan&avatarId=11417",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=chenghaiyan&avatarId=11417",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=chenghaiyan&avatarId=11417",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=chenghaiyan&avatarId=11417"
      },
      "displayName": "\u7a0b\u6d77\u71d5",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T12:07:52.837+0800",
    "updated": "2017-11-30T12:07:52.837+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 04:07:52] "POST /webhook/jira?user_id=chenghaiyan&user_key=chenghaiyan HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512015129305,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127883/comment/58479",
    "id": "58479",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=wangpan",
      "name": "wangpan",
      "key": "wangpan",
      "emailAddress": "wangpan@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "wangpan",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "follow\u90a3\u4e2a\u95ee\u9898\u5e0c\u671b@\u632f\u5e73\u770b\u4e0b",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=wangpan",
      "name": "wangpan",
      "key": "wangpan",
      "emailAddress": "wangpan@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "wangpan",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T12:12:09.305+0800",
    "updated": "2017-11-30T12:12:09.305+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 04:12:09] "POST /webhook/jira?user_id=wangpan&user_key=wangpan HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512015346985,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/119496/comment/58480",
    "id": "58480",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=hepan",
      "name": "hepan",
      "key": "hepan",
      "emailAddress": "hepan@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u4f55\u6500",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "2017.11.24~2017.11.30\r\n\u4eba\u7fa4\u7ba1\u7406\uff1a\r\n\u5f85\u4e0a\u7ebf\u72b6\u6001\uff0cbi\u4fa7\u9700\u8981\u4f18\u5316\uff0c\u4f46\u53ef\u4ee5\u5148mock\u4e0a\u7ebf\uff1b\r\n\u8425\u9500\u94fe\u8def\uff1a\r\n\u5f85\u4e0a\u7ebf\u72b6\u6001\uff0c@\u82d7\u661f \u6b63\u5728\u4fee\u6539\u7ec6\u8282\uff1b\r\n\u4eba\u7fa4\u6d1e\u5bdf\uff1a \r\n\u4eba\u7fa4\u5bf9\u6bd4\u529f\u80fd\uff0c\u4e0ebi\u8054\u8c03\u4e2d\uff1b \r\n\u4eba\u7fa4\u753b\u50cf\u529f\u80fd\u5347\u7ea7\uff0c\u652f\u6301\u6570\u636e\u7c7b\u522b\u9009\u62e9\uff0c\u4e0ebi\u8054\u8c03\u4e2d\uff1b",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=hepan",
      "name": "hepan",
      "key": "hepan",
      "emailAddress": "hepan@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u4f55\u6500",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T12:15:46.985+0800",
    "updated": "2017-11-30T12:15:46.985+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 04:15:47] "POST /webhook/jira?user_id=hepan&user_key=hepan HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512015379074,
  "webhookEvent": "jira:issue_created",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
    "name": "shenweimin",
    "key": "shenweimin",
    "emailAddress": "shenweimin@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
    },
    "displayName": "shenweimin",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "127967",
    "self": "https://jira.bytedance.com/rest/api/2/issue/127967",
    "key": "BT-30",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10104",
        "id": "10104",
        "description": "jira.translation.issuetype.bug.name.desc",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11103&avatarType=issuetype",
        "name": "\u7f3a\u9677",
        "subtask": false,
        "avatarId": 11103
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": null,
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": null,
      "workratio": -1,
      "lastViewed": null,
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-30/watchers",
        "watchCount": 0,
        "isWatching": false
      },
      "created": "2017-11-30T12:16:19.048+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": null,
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
        "name": "shenweimin",
        "key": "shenweimin",
        "emailAddress": "shenweimin@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
        },
        "displayName": "shenweimin",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T12:16:19.048+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10102",
        "description": "",
        "iconUrl": "https://jira.bytedance.com/images/icons/subtask.gif",
        "name": "Backlog",
        "id": "10102",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "\u4e0d\u53ef\u601d\u8bae\u7684bug",
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "Incredible Bug",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
        "name": "shenweimin",
        "key": "shenweimin",
        "emailAddress": "shenweimin@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
        },
        "displayName": "shenweimin",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
        "name": "shenweimin",
        "key": "shenweimin",
        "emailAddress": "shenweimin@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
        },
        "displayName": "shenweimin",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0j8cn:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": null,
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 0,
        "total": 0,
        "comments": []
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-30/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '新增缺陷', 'text': '#### 新增缺陷 \n编号: BT-30 \n主题: Incredible Bug \n报告人: shenweimin \n经办人: shenweimin\n优先级: 重要 \n描述: 不可思议的bug \n[查看详情](缺陷).'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 0, 'errmsg': 'ok'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 04:16:19] "POST /webhook/jira?user_id=shenweimin&user_key=shenweimin HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512015395713,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/119496/comment/58481",
    "id": "58481",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=hepan",
      "name": "hepan",
      "key": "hepan",
      "emailAddress": "hepan@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u4f55\u6500",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "2017.11.24~2017.11.30 \r\n\u4eba\u7fa4\u7ba1\u7406\uff1a \r\n\u5f85\u4e0a\u7ebf\u72b6\u6001\uff0cbi\u4fa7\u9700\u8981\u4f18\u5316\uff0c\u4f46\u53ef\u4ee5\u5148mock\u4e0a\u7ebf\uff1b \r\n\u8425\u9500\u94fe\u8def\uff1a \r\n\u5f85\u4e0a\u7ebf\u72b6\u6001\uff0c@\u82d7\u661f \u6b63\u5728\u4fee\u6539\u7ec6\u8282\uff1b \r\n\u4eba\u7fa4\u6d1e\u5bdf\uff1a \r\n\u4eba\u7fa4\u5bf9\u6bd4\u529f\u80fd\uff0c\u4e0ebi\u8054\u8c03\u4e2d\uff1b \r\n\u4eba\u7fa4\u753b\u50cf\u529f\u80fd\u5347\u7ea7\uff0c\u652f\u6301\u6570\u636e\u7c7b\u522b\u9009\u62e9\uff0c\u4e0ebi\u8054\u8c03\u4e2d\uff1b",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=hepan",
      "name": "hepan",
      "key": "hepan",
      "emailAddress": "hepan@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u4f55\u6500",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T12:16:35.713+0800",
    "updated": "2017-11-30T12:16:35.713+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 04:16:35] "POST /webhook/jira?user_id=hepan&user_key=hepan HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512015410573,
  "webhookEvent": "comment_deleted",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/119496/comment/58481",
    "id": "58481",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=hepan",
      "name": "hepan",
      "key": "hepan",
      "emailAddress": "hepan@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u4f55\u6500",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "2017.11.24~2017.11.30 \r\n\u4eba\u7fa4\u7ba1\u7406\uff1a \r\n\u5f85\u4e0a\u7ebf\u72b6\u6001\uff0cbi\u4fa7\u9700\u8981\u4f18\u5316\uff0c\u4f46\u53ef\u4ee5\u5148mock\u4e0a\u7ebf\uff1b \r\n\u8425\u9500\u94fe\u8def\uff1a \r\n\u5f85\u4e0a\u7ebf\u72b6\u6001\uff0c@\u82d7\u661f \u6b63\u5728\u4fee\u6539\u7ec6\u8282\uff1b \r\n\u4eba\u7fa4\u6d1e\u5bdf\uff1a \r\n\u4eba\u7fa4\u5bf9\u6bd4\u529f\u80fd\uff0c\u4e0ebi\u8054\u8c03\u4e2d\uff1b \r\n\u4eba\u7fa4\u753b\u50cf\u529f\u80fd\u5347\u7ea7\uff0c\u652f\u6301\u6570\u636e\u7c7b\u522b\u9009\u62e9\uff0c\u4e0ebi\u8054\u8c03\u4e2d\uff1b",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=hepan",
      "name": "hepan",
      "key": "hepan",
      "emailAddress": "hepan@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u4f55\u6500",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T12:16:35.000+0800",
    "updated": "2017-11-30T12:16:35.000+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 04:16:50] "POST /webhook/jira?user_id=hepan&user_key=hepan HTTP/1.0" 200 -
INFO:werkzeug: * Running on http://0.0.0.0:3002/ (Press CTRL+C to quit)
INFO:root:
[jira
<^>
{
  "timestamp": 1512015609463,
  "webhookEvent": "jira:issue_created",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
    "name": "shenweimin",
    "key": "shenweimin",
    "emailAddress": "shenweimin@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
    },
    "displayName": "shenweimin",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "127970",
    "self": "https://jira.bytedance.com/rest/api/2/issue/127970",
    "key": "BT-31",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10104",
        "id": "10104",
        "description": "jira.translation.issuetype.bug.name.desc",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11103&avatarType=issuetype",
        "name": "\u7f3a\u9677",
        "subtask": false,
        "avatarId": 11103
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": null,
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": null,
      "workratio": -1,
      "lastViewed": null,
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-31/watchers",
        "watchCount": 0,
        "isWatching": false
      },
      "created": "2017-11-30T12:20:09.434+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": null,
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T12:20:09.434+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10102",
        "description": "",
        "iconUrl": "https://jira.bytedance.com/images/icons/subtask.gif",
        "name": "Backlog",
        "id": "10102",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "\u96be\u4ee5\u7f6e\u4fe1\u7684bug",
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "\u96be\u4ee5\u7f6e\u4fe1\u7684bug",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
        "name": "shenweimin",
        "key": "shenweimin",
        "emailAddress": "shenweimin@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
        },
        "displayName": "shenweimin",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
        "name": "shenweimin",
        "key": "shenweimin",
        "emailAddress": "shenweimin@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
        },
        "displayName": "shenweimin",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0j8d3:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": null,
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 0,
        "total": 0,
        "comments": []
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-31/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '新增缺陷', 'text': '#### 新增缺陷 \n编号: BT-31 \n主题: 难以置信的bug \n报告人: shenweimin \n经办人: 贝俊龙\n优先级: 重要 \n描述: 难以置信的bug \n[查看详情](https://jira.bytedance.com/browse/BT-31).'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 0, 'errmsg': 'ok'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 04:20:09] "POST /webhook/jira?user_id=shenweimin&user_key=shenweimin HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512015691826,
  "webhookEvent": "jira:issue_created",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
    "name": "shenweimin",
    "key": "shenweimin",
    "emailAddress": "shenweimin@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
    },
    "displayName": "shenweimin",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "127972",
    "self": "https://jira.bytedance.com/rest/api/2/issue/127972",
    "key": "BT-32",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10102",
        "id": "10102",
        "description": "\u9700\u8981\u5b8c\u6210\u7684\u4efb\u52a1\u3002",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11118&avatarType=issuetype",
        "name": "\u4efb\u52a1",
        "subtask": false,
        "avatarId": 11118
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": null,
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": null,
      "workratio": -1,
      "lastViewed": null,
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-32/watchers",
        "watchCount": 0,
        "isWatching": false
      },
      "created": "2017-11-30T12:21:31.799+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/5",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/trivial.svg",
        "name": "\u5fae\u5c0f",
        "id": "5"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": null,
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T12:21:31.799+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10102",
        "description": "",
        "iconUrl": "https://jira.bytedance.com/images/icons/subtask.gif",
        "name": "Backlog",
        "id": "10102",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "\u4e0d\u53ef\u5b8c\u6210\u7684\u5c0f\u4efb\u52a1",
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "\u4e0d\u53ef\u5b8c\u6210\u7684\u4efb\u52a1",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
        "name": "shenweimin",
        "key": "shenweimin",
        "emailAddress": "shenweimin@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
        },
        "displayName": "shenweimin",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
        "name": "shenweimin",
        "key": "shenweimin",
        "emailAddress": "shenweimin@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
        },
        "displayName": "shenweimin",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0j8dj:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": null,
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 0,
        "total": 0,
        "comments": []
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-32/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '新增任务', 'text': '#### 新增任务 \n编号: BT-32 \n主题: 不可完成的任务 \n报告人: shenweimin \n经办人: 贝俊龙\n优先级: 微小 \n描述: 不可完成的小任务 \n[查看详情](https://jira.bytedance.com/browse/BT-32).'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 0, 'errmsg': 'ok'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 04:21:32] "POST /webhook/jira?user_id=shenweimin&user_key=shenweimin HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512015697829,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
    "name": "shenweimin",
    "key": "shenweimin",
    "emailAddress": "shenweimin@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
    },
    "displayName": "shenweimin",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "127972",
    "self": "https://jira.bytedance.com/rest/api/2/issue/127972",
    "key": "BT-32",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10102",
        "id": "10102",
        "description": "\u9700\u8981\u5b8c\u6210\u7684\u4efb\u52a1\u3002",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11118&avatarType=issuetype",
        "name": "\u4efb\u52a1",
        "subtask": false,
        "avatarId": 11118
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": null,
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": null,
      "workratio": -1,
      "lastViewed": "2017-11-30T12:21:37.823+0800",
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-32/watchers",
        "watchCount": 1,
        "isWatching": true
      },
      "created": "2017-11-30T12:21:31.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/5",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/trivial.svg",
        "name": "\u5fae\u5c0f",
        "id": "5"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": null,
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T12:21:37.829+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10317",
        "description": "This status is managed internally by JIRA Software",
        "iconUrl": "https://jira.bytedance.com/",
        "name": "hold",
        "id": "10317",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/4",
          "id": 4,
          "key": "indeterminate",
          "colorName": "yellow",
          "name": "In Progress"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "\u4e0d\u53ef\u5b8c\u6210\u7684\u5c0f\u4efb\u52a1",
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "\u4e0d\u53ef\u5b8c\u6210\u7684\u4efb\u52a1",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
        "name": "shenweimin",
        "key": "shenweimin",
        "emailAddress": "shenweimin@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
        },
        "displayName": "shenweimin",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
        "name": "shenweimin",
        "key": "shenweimin",
        "emailAddress": "shenweimin@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
        },
        "displayName": "shenweimin",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0j8dj:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": null,
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 0,
        "total": 0,
        "comments": []
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-32/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "changelog": {
    "id": "370891",
    "items": [
      {
        "field": "status",
        "fieldtype": "jira",
        "from": "10102",
        "fromString": "Backlog",
        "to": "10317",
        "toString": "hold"
      }
    ]
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': 'shenweimin更新了任务【不可完成的任务】的状态', 'text': '#### shenweimin更新了任务【不可完成的任务】的状态 \n由【Backlog】变为了【hold】\n[点击查看详情](https://jira.bytedance.com/browse/BT-32)'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 0, 'errmsg': 'ok'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 04:21:37] "POST /webhook/jira?user_id=shenweimin&user_key=shenweimin HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512015730526,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
    "name": "shenweimin",
    "key": "shenweimin",
    "emailAddress": "shenweimin@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
    },
    "displayName": "shenweimin",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "127972",
    "self": "https://jira.bytedance.com/rest/api/2/issue/127972",
    "key": "BT-32",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10102",
        "id": "10102",
        "description": "\u9700\u8981\u5b8c\u6210\u7684\u4efb\u52a1\u3002",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11118&avatarType=issuetype",
        "name": "\u4efb\u52a1",
        "subtask": false,
        "avatarId": 11118
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": null,
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": null,
      "workratio": -1,
      "lastViewed": "2017-11-30T12:22:10.519+0800",
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-32/watchers",
        "watchCount": 1,
        "isWatching": true
      },
      "created": "2017-11-30T12:21:31.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/5",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/trivial.svg",
        "name": "\u5fae\u5c0f",
        "id": "5"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": null,
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T12:22:10.525+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10102",
        "description": "",
        "iconUrl": "https://jira.bytedance.com/images/icons/subtask.gif",
        "name": "Backlog",
        "id": "10102",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "\u4e0d\u53ef\u5b8c\u6210\u7684\u5c0f\u4efb\u52a1",
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "\u4e0d\u53ef\u5b8c\u6210\u7684\u4efb\u52a1",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
        "name": "shenweimin",
        "key": "shenweimin",
        "emailAddress": "shenweimin@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
        },
        "displayName": "shenweimin",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
        "name": "shenweimin",
        "key": "shenweimin",
        "emailAddress": "shenweimin@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
        },
        "displayName": "shenweimin",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0j8dj:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": null,
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 0,
        "total": 0,
        "comments": []
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-32/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "changelog": {
    "id": "370893",
    "items": [
      {
        "field": "status",
        "fieldtype": "jira",
        "from": "10317",
        "fromString": "hold",
        "to": "10102",
        "toString": "Backlog"
      }
    ]
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': 'shenweimin更新了任务【不可完成的任务】的状态', 'text': '#### shenweimin更新了任务【不可完成的任务】的状态 \n由【hold】变为了【Backlog】\n[点击查看详情](https://jira.bytedance.com/browse/BT-32)'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 0, 'errmsg': 'ok'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 04:22:10] "POST /webhook/jira?user_id=shenweimin&user_key=shenweimin HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512015736377,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
    "name": "beijunlong",
    "key": "beijunlong",
    "emailAddress": "beijunlong@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
    },
    "displayName": "\u8d1d\u4fca\u9f99",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "114595",
    "self": "https://jira.bytedance.com/rest/api/2/issue/114595",
    "key": "BT-12",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10104",
        "id": "10104",
        "description": "jira.translation.issuetype.bug.name.desc",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11103&avatarType=issuetype",
        "name": "\u7f3a\u9677",
        "subtask": false,
        "avatarId": 11103
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": {
        "self": "https://jira.bytedance.com/rest/api/2/resolution/2",
        "id": "2",
        "description": "\u95ee\u9898\u65e0\u6cd5\u89e3\u51b3\u3002",
        "name": "Won't Fix"
      },
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": "2017-11-30T12:22:16.375+0800",
      "workratio": -1,
      "lastViewed": "2017-11-30T12:22:16.369+0800",
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-12/watchers",
        "watchCount": 2,
        "isWatching": true
      },
      "created": "2017-10-16T10:53:07.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": "2017-10-02T10:47:00.000+0800",
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T12:22:16.376+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10202",
        "description": "Won't Fix",
        "iconUrl": "https://jira.bytedance.com/images/icons/statuses/generic.png",
        "name": "Won't Fix",
        "id": "10202",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/4",
          "id": 4,
          "key": "indeterminate",
          "colorName": "yellow",
          "name": "In Progress"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "111",
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [
        {
          "self": "https://jira.bytedance.com/rest/api/2/attachment/33539",
          "id": "33539",
          "filename": "1.png",
          "author": {
            "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
            "name": "suchenyu",
            "key": "suchenyu",
            "emailAddress": "suchenyu@bytedance.com",
            "avatarUrls": {
              "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
              "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
              "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
              "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
            },
            "displayName": "\u82cf\u9648\u6631",
            "active": true,
            "timeZone": "PRC"
          },
          "created": "2017-10-18T17:44:52.000+0800",
          "size": 10784,
          "mimeType": "image/png",
          "content": "https://jira.bytedance.com/secure/attachment/33539/1.png",
          "thumbnail": "https://jira.bytedance.com/secure/thumbnail/33539/_thumb_33539.png"
        }
      ],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "asdasdasdasdasd",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0h3hr:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": null,
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 4,
        "total": 4,
        "comments": [
          {
            "self": "https://jira.bytedance.com/rest/api/2/issue/114595/comment/53057",
            "id": "53057",
            "author": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "body": "111",
            "updateAuthor": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "created": "2017-10-20T18:00:55.000+0800",
            "updated": "2017-10-20T18:00:55.000+0800"
          },
          {
            "self": "https://jira.bytedance.com/rest/api/2/issue/114595/comment/53058",
            "id": "53058",
            "author": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "body": "112",
            "updateAuthor": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "created": "2017-10-20T18:02:07.000+0800",
            "updated": "2017-10-20T18:02:07.000+0800"
          },
          {
            "self": "https://jira.bytedance.com/rest/api/2/issue/114595/comment/53059",
            "id": "53059",
            "author": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "body": "222",
            "updateAuthor": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "created": "2017-10-20T18:03:51.000+0800",
            "updated": "2017-10-20T18:03:51.000+0800"
          },
          {
            "self": "https://jira.bytedance.com/rest/api/2/issue/114595/comment/58431",
            "id": "58431",
            "author": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
              "name": "beijunlong",
              "key": "beijunlong",
              "emailAddress": "beijunlong@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
              },
              "displayName": "\u8d1d\u4fca\u9f99",
              "active": true,
              "timeZone": "PRC"
            },
            "body": "\u52a0\u4e2a\u5907\u6ce8",
            "updateAuthor": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
              "name": "beijunlong",
              "key": "beijunlong",
              "emailAddress": "beijunlong@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
              },
              "displayName": "\u8d1d\u4fca\u9f99",
              "active": true,
              "timeZone": "PRC"
            },
            "created": "2017-11-30T10:28:49.000+0800",
            "updated": "2017-11-30T10:28:49.000+0800"
          }
        ]
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-12/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "changelog": {
    "id": "370894",
    "items": [
      {
        "field": "resolution",
        "fieldtype": "jira",
        "from": null,
        "fromString": null,
        "to": "2",
        "toString": "Won't Fix"
      },
      {
        "field": "status",
        "fieldtype": "jira",
        "from": "10002",
        "fromString": "Done",
        "to": "10202",
        "toString": "Won't Fix"
      }
    ]
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 04:22:16] "POST /webhook/jira?user_id=beijunlong&user_key=beijunlong HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512015738630,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
    "name": "beijunlong",
    "key": "beijunlong",
    "emailAddress": "beijunlong@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
    },
    "displayName": "\u8d1d\u4fca\u9f99",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "114595",
    "self": "https://jira.bytedance.com/rest/api/2/issue/114595",
    "key": "BT-12",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10104",
        "id": "10104",
        "description": "jira.translation.issuetype.bug.name.desc",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11103&avatarType=issuetype",
        "name": "\u7f3a\u9677",
        "subtask": false,
        "avatarId": 11103
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": {
        "self": "https://jira.bytedance.com/rest/api/2/resolution/2",
        "id": "2",
        "description": "\u95ee\u9898\u65e0\u6cd5\u89e3\u51b3\u3002",
        "name": "Won't Fix"
      },
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": "2017-11-30T12:22:16.000+0800",
      "workratio": -1,
      "lastViewed": "2017-11-30T12:22:18.623+0800",
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-12/watchers",
        "watchCount": 2,
        "isWatching": true
      },
      "created": "2017-10-16T10:53:07.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": "2017-10-02T10:47:00.000+0800",
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T12:22:18.629+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10102",
        "description": "",
        "iconUrl": "https://jira.bytedance.com/images/icons/subtask.gif",
        "name": "Backlog",
        "id": "10102",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "111",
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [
        {
          "self": "https://jira.bytedance.com/rest/api/2/attachment/33539",
          "id": "33539",
          "filename": "1.png",
          "author": {
            "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
            "name": "suchenyu",
            "key": "suchenyu",
            "emailAddress": "suchenyu@bytedance.com",
            "avatarUrls": {
              "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
              "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
              "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
              "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
            },
            "displayName": "\u82cf\u9648\u6631",
            "active": true,
            "timeZone": "PRC"
          },
          "created": "2017-10-18T17:44:52.000+0800",
          "size": 10784,
          "mimeType": "image/png",
          "content": "https://jira.bytedance.com/secure/attachment/33539/1.png",
          "thumbnail": "https://jira.bytedance.com/secure/thumbnail/33539/_thumb_33539.png"
        }
      ],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "asdasdasdasdasd",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0h3hr:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": null,
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 4,
        "total": 4,
        "comments": [
          {
            "self": "https://jira.bytedance.com/rest/api/2/issue/114595/comment/53057",
            "id": "53057",
            "author": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "body": "111",
            "updateAuthor": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "created": "2017-10-20T18:00:55.000+0800",
            "updated": "2017-10-20T18:00:55.000+0800"
          },
          {
            "self": "https://jira.bytedance.com/rest/api/2/issue/114595/comment/53058",
            "id": "53058",
            "author": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "body": "112",
            "updateAuthor": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "created": "2017-10-20T18:02:07.000+0800",
            "updated": "2017-10-20T18:02:07.000+0800"
          },
          {
            "self": "https://jira.bytedance.com/rest/api/2/issue/114595/comment/53059",
            "id": "53059",
            "author": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "body": "222",
            "updateAuthor": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "created": "2017-10-20T18:03:51.000+0800",
            "updated": "2017-10-20T18:03:51.000+0800"
          },
          {
            "self": "https://jira.bytedance.com/rest/api/2/issue/114595/comment/58431",
            "id": "58431",
            "author": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
              "name": "beijunlong",
              "key": "beijunlong",
              "emailAddress": "beijunlong@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
              },
              "displayName": "\u8d1d\u4fca\u9f99",
              "active": true,
              "timeZone": "PRC"
            },
            "body": "\u52a0\u4e2a\u5907\u6ce8",
            "updateAuthor": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
              "name": "beijunlong",
              "key": "beijunlong",
              "emailAddress": "beijunlong@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
              },
              "displayName": "\u8d1d\u4fca\u9f99",
              "active": true,
              "timeZone": "PRC"
            },
            "created": "2017-11-30T10:28:49.000+0800",
            "updated": "2017-11-30T10:28:49.000+0800"
          }
        ]
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-12/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "changelog": {
    "id": "370895",
    "items": [
      {
        "field": "status",
        "fieldtype": "jira",
        "from": "10202",
        "fromString": "Won't Fix",
        "to": "10102",
        "toString": "Backlog"
      }
    ]
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '贝俊龙更新了缺陷【asdasdasdasdasd】的状态', 'text': "#### 贝俊龙更新了缺陷【asdasdasdasdasd】的状态 \n由【Won't Fix】变为了【Backlog】\n[点击查看详情](https://jira.bytedance.com/browse/BT-12)"}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 0, 'errmsg': 'ok'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 04:22:18] "POST /webhook/jira?user_id=beijunlong&user_key=beijunlong HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512015755716,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
    "name": "beijunlong",
    "key": "beijunlong",
    "emailAddress": "beijunlong@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
    },
    "displayName": "\u8d1d\u4fca\u9f99",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "114595",
    "self": "https://jira.bytedance.com/rest/api/2/issue/114595",
    "key": "BT-12",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10104",
        "id": "10104",
        "description": "jira.translation.issuetype.bug.name.desc",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11103&avatarType=issuetype",
        "name": "\u7f3a\u9677",
        "subtask": false,
        "avatarId": 11103
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": {
        "self": "https://jira.bytedance.com/rest/api/2/resolution/2",
        "id": "2",
        "description": "\u95ee\u9898\u65e0\u6cd5\u89e3\u51b3\u3002",
        "name": "Won't Fix"
      },
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": "2017-11-30T12:22:16.000+0800",
      "workratio": -1,
      "lastViewed": "2017-11-30T12:22:35.710+0800",
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-12/watchers",
        "watchCount": 2,
        "isWatching": true
      },
      "created": "2017-10-16T10:53:07.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": "2017-10-02T10:47:00.000+0800",
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T12:22:35.715+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10345",
        "description": "This status is managed internally by JIRA Software",
        "iconUrl": "https://jira.bytedance.com/",
        "name": "Doing",
        "id": "10345",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/4",
          "id": 4,
          "key": "indeterminate",
          "colorName": "yellow",
          "name": "In Progress"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "111",
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [
        {
          "self": "https://jira.bytedance.com/rest/api/2/attachment/33539",
          "id": "33539",
          "filename": "1.png",
          "author": {
            "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
            "name": "suchenyu",
            "key": "suchenyu",
            "emailAddress": "suchenyu@bytedance.com",
            "avatarUrls": {
              "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
              "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
              "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
              "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
            },
            "displayName": "\u82cf\u9648\u6631",
            "active": true,
            "timeZone": "PRC"
          },
          "created": "2017-10-18T17:44:52.000+0800",
          "size": 10784,
          "mimeType": "image/png",
          "content": "https://jira.bytedance.com/secure/attachment/33539/1.png",
          "thumbnail": "https://jira.bytedance.com/secure/thumbnail/33539/_thumb_33539.png"
        }
      ],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "asdasdasdasdasd",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0h3hr:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": null,
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 4,
        "total": 4,
        "comments": [
          {
            "self": "https://jira.bytedance.com/rest/api/2/issue/114595/comment/53057",
            "id": "53057",
            "author": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "body": "111",
            "updateAuthor": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "created": "2017-10-20T18:00:55.000+0800",
            "updated": "2017-10-20T18:00:55.000+0800"
          },
          {
            "self": "https://jira.bytedance.com/rest/api/2/issue/114595/comment/53058",
            "id": "53058",
            "author": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "body": "112",
            "updateAuthor": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "created": "2017-10-20T18:02:07.000+0800",
            "updated": "2017-10-20T18:02:07.000+0800"
          },
          {
            "self": "https://jira.bytedance.com/rest/api/2/issue/114595/comment/53059",
            "id": "53059",
            "author": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "body": "222",
            "updateAuthor": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "created": "2017-10-20T18:03:51.000+0800",
            "updated": "2017-10-20T18:03:51.000+0800"
          },
          {
            "self": "https://jira.bytedance.com/rest/api/2/issue/114595/comment/58431",
            "id": "58431",
            "author": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
              "name": "beijunlong",
              "key": "beijunlong",
              "emailAddress": "beijunlong@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
              },
              "displayName": "\u8d1d\u4fca\u9f99",
              "active": true,
              "timeZone": "PRC"
            },
            "body": "\u52a0\u4e2a\u5907\u6ce8",
            "updateAuthor": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
              "name": "beijunlong",
              "key": "beijunlong",
              "emailAddress": "beijunlong@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
              },
              "displayName": "\u8d1d\u4fca\u9f99",
              "active": true,
              "timeZone": "PRC"
            },
            "created": "2017-11-30T10:28:49.000+0800",
            "updated": "2017-11-30T10:28:49.000+0800"
          }
        ]
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-12/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "changelog": {
    "id": "370897",
    "items": [
      {
        "field": "status",
        "fieldtype": "jira",
        "from": "10102",
        "fromString": "Backlog",
        "to": "10345",
        "toString": "Doing"
      }
    ]
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '贝俊龙更新了缺陷【asdasdasdasdasd】的状态', 'text': '#### 贝俊龙更新了缺陷【asdasdasdasdasd】的状态 \n由【Backlog】变为了【Doing】\n[点击查看详情](https://jira.bytedance.com/browse/BT-12)'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 0, 'errmsg': 'ok'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 04:22:35] "POST /webhook/jira?user_id=beijunlong&user_key=beijunlong HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512015757104,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
    "name": "beijunlong",
    "key": "beijunlong",
    "emailAddress": "beijunlong@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
    },
    "displayName": "\u8d1d\u4fca\u9f99",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "114595",
    "self": "https://jira.bytedance.com/rest/api/2/issue/114595",
    "key": "BT-12",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10104",
        "id": "10104",
        "description": "jira.translation.issuetype.bug.name.desc",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11103&avatarType=issuetype",
        "name": "\u7f3a\u9677",
        "subtask": false,
        "avatarId": 11103
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": {
        "self": "https://jira.bytedance.com/rest/api/2/resolution/2",
        "id": "2",
        "description": "\u95ee\u9898\u65e0\u6cd5\u89e3\u51b3\u3002",
        "name": "Won't Fix"
      },
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": "2017-11-30T12:22:16.000+0800",
      "workratio": -1,
      "lastViewed": "2017-11-30T12:22:37.097+0800",
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-12/watchers",
        "watchCount": 2,
        "isWatching": true
      },
      "created": "2017-10-16T10:53:07.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": "2017-10-02T10:47:00.000+0800",
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T12:22:37.103+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10002",
        "description": "",
        "iconUrl": "https://jira.bytedance.com/images/icons/statuses/closed.png",
        "name": "\u5b8c\u6210",
        "id": "10002",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/3",
          "id": 3,
          "key": "done",
          "colorName": "green",
          "name": "Done"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "111",
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [
        {
          "self": "https://jira.bytedance.com/rest/api/2/attachment/33539",
          "id": "33539",
          "filename": "1.png",
          "author": {
            "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
            "name": "suchenyu",
            "key": "suchenyu",
            "emailAddress": "suchenyu@bytedance.com",
            "avatarUrls": {
              "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
              "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
              "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
              "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
            },
            "displayName": "\u82cf\u9648\u6631",
            "active": true,
            "timeZone": "PRC"
          },
          "created": "2017-10-18T17:44:52.000+0800",
          "size": 10784,
          "mimeType": "image/png",
          "content": "https://jira.bytedance.com/secure/attachment/33539/1.png",
          "thumbnail": "https://jira.bytedance.com/secure/thumbnail/33539/_thumb_33539.png"
        }
      ],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "asdasdasdasdasd",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0h3hr:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": null,
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 4,
        "total": 4,
        "comments": [
          {
            "self": "https://jira.bytedance.com/rest/api/2/issue/114595/comment/53057",
            "id": "53057",
            "author": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "body": "111",
            "updateAuthor": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "created": "2017-10-20T18:00:55.000+0800",
            "updated": "2017-10-20T18:00:55.000+0800"
          },
          {
            "self": "https://jira.bytedance.com/rest/api/2/issue/114595/comment/53058",
            "id": "53058",
            "author": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "body": "112",
            "updateAuthor": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "created": "2017-10-20T18:02:07.000+0800",
            "updated": "2017-10-20T18:02:07.000+0800"
          },
          {
            "self": "https://jira.bytedance.com/rest/api/2/issue/114595/comment/53059",
            "id": "53059",
            "author": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "body": "222",
            "updateAuthor": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "created": "2017-10-20T18:03:51.000+0800",
            "updated": "2017-10-20T18:03:51.000+0800"
          },
          {
            "self": "https://jira.bytedance.com/rest/api/2/issue/114595/comment/58431",
            "id": "58431",
            "author": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
              "name": "beijunlong",
              "key": "beijunlong",
              "emailAddress": "beijunlong@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
              },
              "displayName": "\u8d1d\u4fca\u9f99",
              "active": true,
              "timeZone": "PRC"
            },
            "body": "\u52a0\u4e2a\u5907\u6ce8",
            "updateAuthor": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
              "name": "beijunlong",
              "key": "beijunlong",
              "emailAddress": "beijunlong@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
              },
              "displayName": "\u8d1d\u4fca\u9f99",
              "active": true,
              "timeZone": "PRC"
            },
            "created": "2017-11-30T10:28:49.000+0800",
            "updated": "2017-11-30T10:28:49.000+0800"
          }
        ]
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-12/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "changelog": {
    "id": "370898",
    "items": [
      {
        "field": "status",
        "fieldtype": "jira",
        "from": "10345",
        "fromString": "Doing",
        "to": "10002",
        "toString": "Done"
      }
    ]
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '贝俊龙更新了缺陷【asdasdasdasdasd】的状态', 'text': '#### 贝俊龙更新了缺陷【asdasdasdasdasd】的状态 \n由【Doing】变为了【Done】\n[点击查看详情](https://jira.bytedance.com/browse/BT-12)'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 0, 'errmsg': 'ok'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 04:22:37] "POST /webhook/jira?user_id=beijunlong&user_key=beijunlong HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512015764011,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
    "name": "beijunlong",
    "key": "beijunlong",
    "emailAddress": "beijunlong@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
    },
    "displayName": "\u8d1d\u4fca\u9f99",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "114595",
    "self": "https://jira.bytedance.com/rest/api/2/issue/114595",
    "key": "BT-12",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10104",
        "id": "10104",
        "description": "jira.translation.issuetype.bug.name.desc",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11103&avatarType=issuetype",
        "name": "\u7f3a\u9677",
        "subtask": false,
        "avatarId": 11103
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": {
        "self": "https://jira.bytedance.com/rest/api/2/resolution/2",
        "id": "2",
        "description": "\u95ee\u9898\u65e0\u6cd5\u89e3\u51b3\u3002",
        "name": "Won't Fix"
      },
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": "2017-11-30T12:22:16.000+0800",
      "workratio": -1,
      "lastViewed": "2017-11-30T12:22:44.004+0800",
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-12/watchers",
        "watchCount": 2,
        "isWatching": true
      },
      "created": "2017-10-16T10:53:07.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": "2017-10-02T10:47:00.000+0800",
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T12:22:44.010+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10346",
        "description": "This status is managed internally by JIRA Software",
        "iconUrl": "https://jira.bytedance.com/",
        "name": "archive",
        "id": "10346",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/3",
          "id": 3,
          "key": "done",
          "colorName": "green",
          "name": "Done"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "111",
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [
        {
          "self": "https://jira.bytedance.com/rest/api/2/attachment/33539",
          "id": "33539",
          "filename": "1.png",
          "author": {
            "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
            "name": "suchenyu",
            "key": "suchenyu",
            "emailAddress": "suchenyu@bytedance.com",
            "avatarUrls": {
              "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
              "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
              "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
              "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
            },
            "displayName": "\u82cf\u9648\u6631",
            "active": true,
            "timeZone": "PRC"
          },
          "created": "2017-10-18T17:44:52.000+0800",
          "size": 10784,
          "mimeType": "image/png",
          "content": "https://jira.bytedance.com/secure/attachment/33539/1.png",
          "thumbnail": "https://jira.bytedance.com/secure/thumbnail/33539/_thumb_33539.png"
        }
      ],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "asdasdasdasdasd",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0h3hr:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": null,
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 4,
        "total": 4,
        "comments": [
          {
            "self": "https://jira.bytedance.com/rest/api/2/issue/114595/comment/53057",
            "id": "53057",
            "author": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "body": "111",
            "updateAuthor": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "created": "2017-10-20T18:00:55.000+0800",
            "updated": "2017-10-20T18:00:55.000+0800"
          },
          {
            "self": "https://jira.bytedance.com/rest/api/2/issue/114595/comment/53058",
            "id": "53058",
            "author": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "body": "112",
            "updateAuthor": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "created": "2017-10-20T18:02:07.000+0800",
            "updated": "2017-10-20T18:02:07.000+0800"
          },
          {
            "self": "https://jira.bytedance.com/rest/api/2/issue/114595/comment/53059",
            "id": "53059",
            "author": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "body": "222",
            "updateAuthor": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "created": "2017-10-20T18:03:51.000+0800",
            "updated": "2017-10-20T18:03:51.000+0800"
          },
          {
            "self": "https://jira.bytedance.com/rest/api/2/issue/114595/comment/58431",
            "id": "58431",
            "author": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
              "name": "beijunlong",
              "key": "beijunlong",
              "emailAddress": "beijunlong@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
              },
              "displayName": "\u8d1d\u4fca\u9f99",
              "active": true,
              "timeZone": "PRC"
            },
            "body": "\u52a0\u4e2a\u5907\u6ce8",
            "updateAuthor": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
              "name": "beijunlong",
              "key": "beijunlong",
              "emailAddress": "beijunlong@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
              },
              "displayName": "\u8d1d\u4fca\u9f99",
              "active": true,
              "timeZone": "PRC"
            },
            "created": "2017-11-30T10:28:49.000+0800",
            "updated": "2017-11-30T10:28:49.000+0800"
          }
        ]
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-12/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "changelog": {
    "id": "370899",
    "items": [
      {
        "field": "status",
        "fieldtype": "jira",
        "from": "10002",
        "fromString": "Done",
        "to": "10346",
        "toString": "archive"
      }
    ]
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '贝俊龙更新了缺陷【asdasdasdasdasd】的状态', 'text': '#### 贝俊龙更新了缺陷【asdasdasdasdasd】的状态 \n由【Done】变为了【archive】\n[点击查看详情](https://jira.bytedance.com/browse/BT-12)'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 0, 'errmsg': 'ok'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 04:22:44] "POST /webhook/jira?user_id=beijunlong&user_key=beijunlong HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512015768893,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
    "name": "beijunlong",
    "key": "beijunlong",
    "emailAddress": "beijunlong@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
    },
    "displayName": "\u8d1d\u4fca\u9f99",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "114595",
    "self": "https://jira.bytedance.com/rest/api/2/issue/114595",
    "key": "BT-12",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10104",
        "id": "10104",
        "description": "jira.translation.issuetype.bug.name.desc",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11103&avatarType=issuetype",
        "name": "\u7f3a\u9677",
        "subtask": false,
        "avatarId": 11103
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": {
        "self": "https://jira.bytedance.com/rest/api/2/resolution/10101",
        "id": "10101",
        "description": "",
        "name": "\u5df2\u4fee\u590d"
      },
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": "2017-11-30T12:22:48.890+0800",
      "workratio": -1,
      "lastViewed": "2017-11-30T12:22:48.884+0800",
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-12/watchers",
        "watchCount": 2,
        "isWatching": true
      },
      "created": "2017-10-16T10:53:07.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": "2017-10-02T10:47:00.000+0800",
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T12:22:48.891+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/6",
        "description": "\u95ee\u9898\u5df2\u7ecf\u5904\u7406\u5b8c\u6210\uff0c\u65b9\u6848\u662f\u6b63\u786e\u7684\u3002\u5df2\u7ecf\u5173\u95ed\u7684\u95ee\u9898\u53ef\u4ee5\u88ab\u518d\u6b21\u6253\u5f00\u3002",
        "iconUrl": "https://jira.bytedance.com/images/icons/statuses/closed.png",
        "name": "\u5173\u95ed",
        "id": "6",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/3",
          "id": 3,
          "key": "done",
          "colorName": "green",
          "name": "Done"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "111",
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [
        {
          "self": "https://jira.bytedance.com/rest/api/2/attachment/33539",
          "id": "33539",
          "filename": "1.png",
          "author": {
            "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
            "name": "suchenyu",
            "key": "suchenyu",
            "emailAddress": "suchenyu@bytedance.com",
            "avatarUrls": {
              "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
              "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
              "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
              "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
            },
            "displayName": "\u82cf\u9648\u6631",
            "active": true,
            "timeZone": "PRC"
          },
          "created": "2017-10-18T17:44:52.000+0800",
          "size": 10784,
          "mimeType": "image/png",
          "content": "https://jira.bytedance.com/secure/attachment/33539/1.png",
          "thumbnail": "https://jira.bytedance.com/secure/thumbnail/33539/_thumb_33539.png"
        }
      ],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "asdasdasdasdasd",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0h3hr:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": null,
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 4,
        "total": 4,
        "comments": [
          {
            "self": "https://jira.bytedance.com/rest/api/2/issue/114595/comment/53057",
            "id": "53057",
            "author": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "body": "111",
            "updateAuthor": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "created": "2017-10-20T18:00:55.000+0800",
            "updated": "2017-10-20T18:00:55.000+0800"
          },
          {
            "self": "https://jira.bytedance.com/rest/api/2/issue/114595/comment/53058",
            "id": "53058",
            "author": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "body": "112",
            "updateAuthor": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "created": "2017-10-20T18:02:07.000+0800",
            "updated": "2017-10-20T18:02:07.000+0800"
          },
          {
            "self": "https://jira.bytedance.com/rest/api/2/issue/114595/comment/53059",
            "id": "53059",
            "author": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "body": "222",
            "updateAuthor": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "created": "2017-10-20T18:03:51.000+0800",
            "updated": "2017-10-20T18:03:51.000+0800"
          },
          {
            "self": "https://jira.bytedance.com/rest/api/2/issue/114595/comment/58431",
            "id": "58431",
            "author": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
              "name": "beijunlong",
              "key": "beijunlong",
              "emailAddress": "beijunlong@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
              },
              "displayName": "\u8d1d\u4fca\u9f99",
              "active": true,
              "timeZone": "PRC"
            },
            "body": "\u52a0\u4e2a\u5907\u6ce8",
            "updateAuthor": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
              "name": "beijunlong",
              "key": "beijunlong",
              "emailAddress": "beijunlong@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
              },
              "displayName": "\u8d1d\u4fca\u9f99",
              "active": true,
              "timeZone": "PRC"
            },
            "created": "2017-11-30T10:28:49.000+0800",
            "updated": "2017-11-30T10:28:49.000+0800"
          }
        ]
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-12/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "changelog": {
    "id": "370900",
    "items": [
      {
        "field": "resolution",
        "fieldtype": "jira",
        "from": "2",
        "fromString": "Won't Fix",
        "to": "10101",
        "toString": "\u5df2\u4fee\u590d"
      },
      {
        "field": "status",
        "fieldtype": "jira",
        "from": "10346",
        "fromString": "archive",
        "to": "6",
        "toString": "Closed"
      }
    ]
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 04:22:49] "POST /webhook/jira?user_id=beijunlong&user_key=beijunlong HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512015919027,
  "webhookEvent": "jira:issue_created",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
    "name": "beijunlong",
    "key": "beijunlong",
    "emailAddress": "beijunlong@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
    },
    "displayName": "\u8d1d\u4fca\u9f99",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "127974",
    "self": "https://jira.bytedance.com/rest/api/2/issue/127974",
    "key": "BT-33",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10104",
        "id": "10104",
        "description": "jira.translation.issuetype.bug.name.desc",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11103&avatarType=issuetype",
        "name": "\u7f3a\u9677",
        "subtask": false,
        "avatarId": 11103
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": null,
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": null,
      "workratio": -1,
      "lastViewed": null,
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-33/watchers",
        "watchCount": 0,
        "isWatching": false
      },
      "created": "2017-11-30T12:25:19.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": null,
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T12:25:19.000+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10102",
        "description": "",
        "iconUrl": "https://jira.bytedance.com/images/icons/subtask.gif",
        "name": "Backlog",
        "id": "10102",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "312312 ",
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "\u6d4b\u8bd5\u89e3\u51b3\u7ed3\u679c",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0j8dz:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": null,
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 0,
        "total": 0,
        "comments": []
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-33/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '新增缺陷', 'text': '#### 新增缺陷 \n编号: BT-33 \n主题: 测试解决结果 \n报告人: 贝俊龙 \n经办人: 贝俊龙\n优先级: 重要 \n描述: 312312  \n[查看详情](https://jira.bytedance.com/browse/BT-33).'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 0, 'errmsg': 'ok'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 04:25:19] "POST /webhook/jira?user_id=beijunlong&user_key=beijunlong HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512015931424,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
    "name": "beijunlong",
    "key": "beijunlong",
    "emailAddress": "beijunlong@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
    },
    "displayName": "\u8d1d\u4fca\u9f99",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "127974",
    "self": "https://jira.bytedance.com/rest/api/2/issue/127974",
    "key": "BT-33",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10104",
        "id": "10104",
        "description": "jira.translation.issuetype.bug.name.desc",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11103&avatarType=issuetype",
        "name": "\u7f3a\u9677",
        "subtask": false,
        "avatarId": 11103
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": {
        "self": "https://jira.bytedance.com/rest/api/2/resolution/2",
        "id": "2",
        "description": "\u95ee\u9898\u65e0\u6cd5\u89e3\u51b3\u3002",
        "name": "Won't Fix"
      },
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": "2017-11-30T12:25:31.422+0800",
      "workratio": -1,
      "lastViewed": "2017-11-30T12:25:31.417+0800",
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-33/watchers",
        "watchCount": 1,
        "isWatching": true
      },
      "created": "2017-11-30T12:25:19.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": null,
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T12:25:31.423+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10202",
        "description": "Won't Fix",
        "iconUrl": "https://jira.bytedance.com/images/icons/statuses/generic.png",
        "name": "Won't Fix",
        "id": "10202",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/4",
          "id": 4,
          "key": "indeterminate",
          "colorName": "yellow",
          "name": "In Progress"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "312312 ",
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "\u6d4b\u8bd5\u89e3\u51b3\u7ed3\u679c",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0j8dz:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": null,
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 0,
        "total": 0,
        "comments": []
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-33/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "changelog": {
    "id": "370902",
    "items": [
      {
        "field": "resolution",
        "fieldtype": "jira",
        "from": null,
        "fromString": null,
        "to": "2",
        "toString": "Won't Fix"
      },
      {
        "field": "status",
        "fieldtype": "jira",
        "from": "10102",
        "fromString": "Backlog",
        "to": "10202",
        "toString": "Won't Fix"
      }
    ]
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 04:25:31] "POST /webhook/jira?user_id=beijunlong&user_key=beijunlong HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512015933579,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
    "name": "beijunlong",
    "key": "beijunlong",
    "emailAddress": "beijunlong@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
    },
    "displayName": "\u8d1d\u4fca\u9f99",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "127974",
    "self": "https://jira.bytedance.com/rest/api/2/issue/127974",
    "key": "BT-33",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10104",
        "id": "10104",
        "description": "jira.translation.issuetype.bug.name.desc",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11103&avatarType=issuetype",
        "name": "\u7f3a\u9677",
        "subtask": false,
        "avatarId": 11103
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": null,
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": null,
      "workratio": -1,
      "lastViewed": "2017-11-30T12:25:33.572+0800",
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-33/watchers",
        "watchCount": 1,
        "isWatching": true
      },
      "created": "2017-11-30T12:25:19.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": null,
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T12:25:33.578+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10102",
        "description": "",
        "iconUrl": "https://jira.bytedance.com/images/icons/subtask.gif",
        "name": "Backlog",
        "id": "10102",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "312312 ",
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "\u6d4b\u8bd5\u89e3\u51b3\u7ed3\u679c",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0j8dz:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": null,
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 0,
        "total": 0,
        "comments": []
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-33/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "changelog": {
    "id": "370903",
    "items": [
      {
        "field": "resolution",
        "fieldtype": "jira",
        "from": "2",
        "fromString": "Won't Fix",
        "to": null,
        "toString": null
      },
      {
        "field": "status",
        "fieldtype": "jira",
        "from": "10202",
        "fromString": "Won't Fix",
        "to": "10102",
        "toString": "Backlog"
      }
    ]
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 04:25:33] "POST /webhook/jira?user_id=beijunlong&user_key=beijunlong HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512015935458,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
    "name": "beijunlong",
    "key": "beijunlong",
    "emailAddress": "beijunlong@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
    },
    "displayName": "\u8d1d\u4fca\u9f99",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "127974",
    "self": "https://jira.bytedance.com/rest/api/2/issue/127974",
    "key": "BT-33",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10104",
        "id": "10104",
        "description": "jira.translation.issuetype.bug.name.desc",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11103&avatarType=issuetype",
        "name": "\u7f3a\u9677",
        "subtask": false,
        "avatarId": 11103
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": null,
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": null,
      "workratio": -1,
      "lastViewed": "2017-11-30T12:25:35.451+0800",
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-33/watchers",
        "watchCount": 1,
        "isWatching": true
      },
      "created": "2017-11-30T12:25:19.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": null,
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T12:25:35.457+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10345",
        "description": "This status is managed internally by JIRA Software",
        "iconUrl": "https://jira.bytedance.com/",
        "name": "Doing",
        "id": "10345",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/4",
          "id": 4,
          "key": "indeterminate",
          "colorName": "yellow",
          "name": "In Progress"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "312312 ",
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "\u6d4b\u8bd5\u89e3\u51b3\u7ed3\u679c",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0j8dz:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": null,
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 0,
        "total": 0,
        "comments": []
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-33/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "changelog": {
    "id": "370904",
    "items": [
      {
        "field": "status",
        "fieldtype": "jira",
        "from": "10102",
        "fromString": "Backlog",
        "to": "10345",
        "toString": "Doing"
      }
    ]
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '贝俊龙更新了缺陷【测试解决结果】的状态', 'text': '#### 贝俊龙更新了缺陷【测试解决结果】的状态 \n由【Backlog】变为了【Doing】\n[点击查看详情](https://jira.bytedance.com/browse/BT-33)'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 0, 'errmsg': 'ok'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 04:25:35] "POST /webhook/jira?user_id=beijunlong&user_key=beijunlong HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512015938490,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
    "name": "beijunlong",
    "key": "beijunlong",
    "emailAddress": "beijunlong@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
    },
    "displayName": "\u8d1d\u4fca\u9f99",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "127974",
    "self": "https://jira.bytedance.com/rest/api/2/issue/127974",
    "key": "BT-33",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10104",
        "id": "10104",
        "description": "jira.translation.issuetype.bug.name.desc",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11103&avatarType=issuetype",
        "name": "\u7f3a\u9677",
        "subtask": false,
        "avatarId": 11103
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": null,
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": null,
      "workratio": -1,
      "lastViewed": "2017-11-30T12:25:38.483+0800",
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-33/watchers",
        "watchCount": 1,
        "isWatching": true
      },
      "created": "2017-11-30T12:25:19.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": null,
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T12:25:38.489+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10002",
        "description": "",
        "iconUrl": "https://jira.bytedance.com/images/icons/statuses/closed.png",
        "name": "\u5b8c\u6210",
        "id": "10002",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/3",
          "id": 3,
          "key": "done",
          "colorName": "green",
          "name": "Done"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "312312 ",
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "\u6d4b\u8bd5\u89e3\u51b3\u7ed3\u679c",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0j8dz:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": null,
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 0,
        "total": 0,
        "comments": []
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-33/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "changelog": {
    "id": "370905",
    "items": [
      {
        "field": "status",
        "fieldtype": "jira",
        "from": "10345",
        "fromString": "Doing",
        "to": "10002",
        "toString": "Done"
      }
    ]
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '贝俊龙更新了缺陷【测试解决结果】的状态', 'text': '#### 贝俊龙更新了缺陷【测试解决结果】的状态 \n由【Doing】变为了【Done】\n[点击查看详情](https://jira.bytedance.com/browse/BT-33)'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 0, 'errmsg': 'ok'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 04:25:38] "POST /webhook/jira?user_id=beijunlong&user_key=beijunlong HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512015955876,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
    "name": "beijunlong",
    "key": "beijunlong",
    "emailAddress": "beijunlong@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
    },
    "displayName": "\u8d1d\u4fca\u9f99",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "127974",
    "self": "https://jira.bytedance.com/rest/api/2/issue/127974",
    "key": "BT-33",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10104",
        "id": "10104",
        "description": "jira.translation.issuetype.bug.name.desc",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11103&avatarType=issuetype",
        "name": "\u7f3a\u9677",
        "subtask": false,
        "avatarId": 11103
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": null,
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": null,
      "workratio": -1,
      "lastViewed": "2017-11-30T12:25:55.869+0800",
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-33/watchers",
        "watchCount": 1,
        "isWatching": true
      },
      "created": "2017-11-30T12:25:19.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": null,
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T12:25:55.875+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10211",
        "description": "This status is managed internally by JIRA Software",
        "iconUrl": "https://jira.bytedance.com/",
        "name": "Test",
        "id": "10211",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/4",
          "id": 4,
          "key": "indeterminate",
          "colorName": "yellow",
          "name": "In Progress"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "312312 ",
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "\u6d4b\u8bd5\u89e3\u51b3\u7ed3\u679c",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0j8dz:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": null,
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 0,
        "total": 0,
        "comments": []
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-33/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "changelog": {
    "id": "370906",
    "items": [
      {
        "field": "status",
        "fieldtype": "jira",
        "from": "10002",
        "fromString": "Done",
        "to": "10211",
        "toString": "Test"
      }
    ]
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '贝俊龙更新了缺陷【测试解决结果】的状态', 'text': '#### 贝俊龙更新了缺陷【测试解决结果】的状态 \n由【Done】变为了【Test】\n[点击查看详情](https://jira.bytedance.com/browse/BT-33)'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 0, 'errmsg': 'ok'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 04:25:56] "POST /webhook/jira?user_id=beijunlong&user_key=beijunlong HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512015956693,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
    "name": "beijunlong",
    "key": "beijunlong",
    "emailAddress": "beijunlong@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
    },
    "displayName": "\u8d1d\u4fca\u9f99",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "127974",
    "self": "https://jira.bytedance.com/rest/api/2/issue/127974",
    "key": "BT-33",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10104",
        "id": "10104",
        "description": "jira.translation.issuetype.bug.name.desc",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11103&avatarType=issuetype",
        "name": "\u7f3a\u9677",
        "subtask": false,
        "avatarId": 11103
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": null,
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": null,
      "workratio": -1,
      "lastViewed": "2017-11-30T12:25:56.686+0800",
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-33/watchers",
        "watchCount": 1,
        "isWatching": true
      },
      "created": "2017-11-30T12:25:19.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": null,
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T12:25:56.692+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10336",
        "description": "This status is managed internally by JIRA Software",
        "iconUrl": "https://jira.bytedance.com/",
        "name": "Product",
        "id": "10336",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/4",
          "id": 4,
          "key": "indeterminate",
          "colorName": "yellow",
          "name": "In Progress"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "312312 ",
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "\u6d4b\u8bd5\u89e3\u51b3\u7ed3\u679c",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0j8dz:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": null,
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 0,
        "total": 0,
        "comments": []
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-33/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "changelog": {
    "id": "370907",
    "items": [
      {
        "field": "status",
        "fieldtype": "jira",
        "from": "10211",
        "fromString": "Test",
        "to": "10336",
        "toString": "Product"
      }
    ]
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '贝俊龙更新了缺陷【测试解决结果】的状态', 'text': '#### 贝俊龙更新了缺陷【测试解决结果】的状态 \n由【Test】变为了【Product】\n[点击查看详情](https://jira.bytedance.com/browse/BT-33)'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 0, 'errmsg': 'ok'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 04:25:56] "POST /webhook/jira?user_id=beijunlong&user_key=beijunlong HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512015959019,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
    "name": "beijunlong",
    "key": "beijunlong",
    "emailAddress": "beijunlong@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
    },
    "displayName": "\u8d1d\u4fca\u9f99",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "127974",
    "self": "https://jira.bytedance.com/rest/api/2/issue/127974",
    "key": "BT-33",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10104",
        "id": "10104",
        "description": "jira.translation.issuetype.bug.name.desc",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11103&avatarType=issuetype",
        "name": "\u7f3a\u9677",
        "subtask": false,
        "avatarId": 11103
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": {
        "self": "https://jira.bytedance.com/rest/api/2/resolution/10101",
        "id": "10101",
        "description": "",
        "name": "\u5df2\u4fee\u590d"
      },
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": "2017-11-30T12:25:59.017+0800",
      "workratio": -1,
      "lastViewed": "2017-11-30T12:25:59.012+0800",
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-33/watchers",
        "watchCount": 1,
        "isWatching": true
      },
      "created": "2017-11-30T12:25:19.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": null,
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T12:25:59.018+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10346",
        "description": "This status is managed internally by JIRA Software",
        "iconUrl": "https://jira.bytedance.com/",
        "name": "archive",
        "id": "10346",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/3",
          "id": 3,
          "key": "done",
          "colorName": "green",
          "name": "Done"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "312312 ",
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "\u6d4b\u8bd5\u89e3\u51b3\u7ed3\u679c",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0j8dz:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": null,
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 0,
        "total": 0,
        "comments": []
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-33/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "changelog": {
    "id": "370908",
    "items": [
      {
        "field": "resolution",
        "fieldtype": "jira",
        "from": null,
        "fromString": null,
        "to": "10101",
        "toString": "\u5df2\u4fee\u590d"
      },
      {
        "field": "status",
        "fieldtype": "jira",
        "from": "10336",
        "fromString": "Product",
        "to": "10346",
        "toString": "archive"
      }
    ]
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 04:25:59] "POST /webhook/jira?user_id=beijunlong&user_key=beijunlong HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512015962062,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
    "name": "beijunlong",
    "key": "beijunlong",
    "emailAddress": "beijunlong@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
    },
    "displayName": "\u8d1d\u4fca\u9f99",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "127974",
    "self": "https://jira.bytedance.com/rest/api/2/issue/127974",
    "key": "BT-33",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10104",
        "id": "10104",
        "description": "jira.translation.issuetype.bug.name.desc",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11103&avatarType=issuetype",
        "name": "\u7f3a\u9677",
        "subtask": false,
        "avatarId": 11103
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": {
        "self": "https://jira.bytedance.com/rest/api/2/resolution/10101",
        "id": "10101",
        "description": "",
        "name": "\u5df2\u4fee\u590d"
      },
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": "2017-11-30T12:25:59.000+0800",
      "workratio": -1,
      "lastViewed": "2017-11-30T12:26:02.055+0800",
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-33/watchers",
        "watchCount": 1,
        "isWatching": true
      },
      "created": "2017-11-30T12:25:19.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": null,
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T12:26:02.061+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/6",
        "description": "\u95ee\u9898\u5df2\u7ecf\u5904\u7406\u5b8c\u6210\uff0c\u65b9\u6848\u662f\u6b63\u786e\u7684\u3002\u5df2\u7ecf\u5173\u95ed\u7684\u95ee\u9898\u53ef\u4ee5\u88ab\u518d\u6b21\u6253\u5f00\u3002",
        "iconUrl": "https://jira.bytedance.com/images/icons/statuses/closed.png",
        "name": "\u5173\u95ed",
        "id": "6",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/3",
          "id": 3,
          "key": "done",
          "colorName": "green",
          "name": "Done"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "312312 ",
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "\u6d4b\u8bd5\u89e3\u51b3\u7ed3\u679c",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0j8dz:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": null,
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 0,
        "total": 0,
        "comments": []
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-33/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "changelog": {
    "id": "370909",
    "items": [
      {
        "field": "status",
        "fieldtype": "jira",
        "from": "10346",
        "fromString": "archive",
        "to": "6",
        "toString": "Closed"
      }
    ]
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '贝俊龙更新了缺陷【测试解决结果】的状态', 'text': '#### 贝俊龙更新了缺陷【测试解决结果】的状态 \n由【archive】变为了【Closed】\n[点击查看详情](https://jira.bytedance.com/browse/BT-33)'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 0, 'errmsg': 'ok'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 04:26:02] "POST /webhook/jira?user_id=beijunlong&user_key=beijunlong HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512016640727,
  "webhookEvent": "comment_updated",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/125764/comment/57424",
    "id": "57424",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=songli.02",
      "name": "songli.02",
      "key": "songli.02",
      "emailAddress": "songli.02@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=songli.02&avatarId=11230",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=songli.02&avatarId=11230",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=songli.02&avatarId=11230",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=songli.02&avatarId=11230"
      },
      "displayName": "\u5b8b\u7acb",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010\u63d0\u6d4b\u529f\u80fd\u3011 @\u6c5f\u6d9b done\r\nJSBridge \u79bb\u7ebf\u5347\u7ea7\u589e\u91cf\u66f4\u65b0\r\n\u3010\u5206\u652f\u3011 \r\ndev\r\n\u3010\u7ec6\u8282\u63cf\u8ff0&\u98ce\u9669\u63d0\u793a\u3011 \r\n- \u51b2\u7a81\u539f\u56e0\u5df2\u5408\u5165dev\r\n- \u5177\u4f53case\u9700\u8981\u627e\u65b9\u5dcd\u3001\u8fdc\u5cf0\u95ee\u4e00\u4e0b\r\n- \u8bb0\u5f97\u6d4b\u8986\u76d6\u5b89\u88c5\u7684\u60c5\u51b5\r\n- \u9ad8\u7ea7\u8c03\u8bd5\u91cc\u6709\u662f\u5426\u4f7f\u7528\u79bb\u7ebf\u5305\u7684\u5f00\u5173",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=guojiangtao",
      "name": "guojiangtao",
      "key": "guojiangtao",
      "emailAddress": "guojiangtao@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11141",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11141",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11141",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11141"
      },
      "displayName": "guojiangtao",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-24T18:31:16.000+0800",
    "updated": "2017-11-30T12:37:20.727+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 04:37:20] "POST /webhook/jira?user_id=guojiangtao&user_key=guojiangtao HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512016670147,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
    "name": "beijunlong",
    "key": "beijunlong",
    "emailAddress": "beijunlong@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
    },
    "displayName": "\u8d1d\u4fca\u9f99",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "127447",
    "self": "https://jira.bytedance.com/rest/api/2/issue/127447",
    "key": "BT-29",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10104",
        "id": "10104",
        "description": "jira.translation.issuetype.bug.name.desc",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11103&avatarType=issuetype",
        "name": "\u7f3a\u9677",
        "subtask": false,
        "avatarId": 11103
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": {
        "self": "https://jira.bytedance.com/rest/api/2/resolution/2",
        "id": "2",
        "description": "\u95ee\u9898\u65e0\u6cd5\u89e3\u51b3\u3002",
        "name": "Won't Fix"
      },
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": "2017-11-30T12:37:50.146+0800",
      "workratio": -1,
      "lastViewed": "2017-11-30T12:37:50.141+0800",
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-29/watchers",
        "watchCount": 1,
        "isWatching": true
      },
      "created": "2017-11-28T20:18:04.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [
        "V0.1"
      ],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": "2017-11-29T20:17:00.000+0800",
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
        "name": "shenweimin",
        "key": "shenweimin",
        "emailAddress": "shenweimin@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
        },
        "displayName": "shenweimin",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T12:37:50.146+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10202",
        "description": "Won't Fix",
        "iconUrl": "https://jira.bytedance.com/images/icons/statuses/generic.png",
        "name": "Won't Fix",
        "id": "10202",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/4",
          "id": 4,
          "key": "indeterminate",
          "colorName": "yellow",
          "name": "In Progress"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "create a issue those type = bug",
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "this is a bug",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0j5a7:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": "2017-11-30",
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 0,
        "total": 0,
        "comments": []
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-29/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "changelog": {
    "id": "370911",
    "items": [
      {
        "field": "resolution",
        "fieldtype": "jira",
        "from": null,
        "fromString": null,
        "to": "2",
        "toString": "Won't Fix"
      },
      {
        "field": "status",
        "fieldtype": "jira",
        "from": "10102",
        "fromString": "Backlog",
        "to": "10202",
        "toString": "Won't Fix"
      }
    ]
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 04:37:50] "POST /webhook/jira?user_id=beijunlong&user_key=beijunlong HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512016672206,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
    "name": "beijunlong",
    "key": "beijunlong",
    "emailAddress": "beijunlong@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
    },
    "displayName": "\u8d1d\u4fca\u9f99",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "127447",
    "self": "https://jira.bytedance.com/rest/api/2/issue/127447",
    "key": "BT-29",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10104",
        "id": "10104",
        "description": "jira.translation.issuetype.bug.name.desc",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11103&avatarType=issuetype",
        "name": "\u7f3a\u9677",
        "subtask": false,
        "avatarId": 11103
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": null,
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": null,
      "workratio": -1,
      "lastViewed": "2017-11-30T12:37:52.199+0800",
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-29/watchers",
        "watchCount": 1,
        "isWatching": true
      },
      "created": "2017-11-28T20:18:04.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [
        "V0.1"
      ],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": "2017-11-29T20:17:00.000+0800",
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
        "name": "shenweimin",
        "key": "shenweimin",
        "emailAddress": "shenweimin@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
        },
        "displayName": "shenweimin",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T12:37:52.205+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10102",
        "description": "",
        "iconUrl": "https://jira.bytedance.com/images/icons/subtask.gif",
        "name": "Backlog",
        "id": "10102",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "create a issue those type = bug",
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "this is a bug",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0j5a7:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": "2017-11-30",
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 0,
        "total": 0,
        "comments": []
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-29/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "changelog": {
    "id": "370912",
    "items": [
      {
        "field": "resolution",
        "fieldtype": "jira",
        "from": "2",
        "fromString": "Won't Fix",
        "to": null,
        "toString": null
      },
      {
        "field": "status",
        "fieldtype": "jira",
        "from": "10202",
        "fromString": "Won't Fix",
        "to": "10102",
        "toString": "Backlog"
      }
    ]
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 04:37:52] "POST /webhook/jira?user_id=beijunlong&user_key=beijunlong HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512016674578,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
    "name": "beijunlong",
    "key": "beijunlong",
    "emailAddress": "beijunlong@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
    },
    "displayName": "\u8d1d\u4fca\u9f99",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "127447",
    "self": "https://jira.bytedance.com/rest/api/2/issue/127447",
    "key": "BT-29",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10104",
        "id": "10104",
        "description": "jira.translation.issuetype.bug.name.desc",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11103&avatarType=issuetype",
        "name": "\u7f3a\u9677",
        "subtask": false,
        "avatarId": 11103
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": null,
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": null,
      "workratio": -1,
      "lastViewed": "2017-11-30T12:37:54.572+0800",
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-29/watchers",
        "watchCount": 1,
        "isWatching": true
      },
      "created": "2017-11-28T20:18:04.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [
        "V0.1"
      ],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": "2017-11-29T20:17:00.000+0800",
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
        "name": "shenweimin",
        "key": "shenweimin",
        "emailAddress": "shenweimin@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
        },
        "displayName": "shenweimin",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T12:37:54.578+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10345",
        "description": "This status is managed internally by JIRA Software",
        "iconUrl": "https://jira.bytedance.com/",
        "name": "Doing",
        "id": "10345",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/4",
          "id": 4,
          "key": "indeterminate",
          "colorName": "yellow",
          "name": "In Progress"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "create a issue those type = bug",
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "this is a bug",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0j5a7:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": "2017-11-30",
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 0,
        "total": 0,
        "comments": []
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-29/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "changelog": {
    "id": "370913",
    "items": [
      {
        "field": "status",
        "fieldtype": "jira",
        "from": "10102",
        "fromString": "Backlog",
        "to": "10345",
        "toString": "Doing"
      }
    ]
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '贝俊龙更新了缺陷【this is a bug】的状态', 'text': '#### 贝俊龙更新了缺陷【this is a bug】的状态 \n由【Backlog】变为了【Doing】\n[点击查看详情](https://jira.bytedance.com/browse/BT-29)'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 0, 'errmsg': 'ok'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 04:37:54] "POST /webhook/jira?user_id=beijunlong&user_key=beijunlong HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512016675645,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
    "name": "beijunlong",
    "key": "beijunlong",
    "emailAddress": "beijunlong@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
    },
    "displayName": "\u8d1d\u4fca\u9f99",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "127447",
    "self": "https://jira.bytedance.com/rest/api/2/issue/127447",
    "key": "BT-29",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10104",
        "id": "10104",
        "description": "jira.translation.issuetype.bug.name.desc",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11103&avatarType=issuetype",
        "name": "\u7f3a\u9677",
        "subtask": false,
        "avatarId": 11103
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": {
        "self": "https://jira.bytedance.com/rest/api/2/resolution/10103",
        "id": "10103",
        "description": "",
        "name": "\u5f00\u53d1\u5b8c\u6210"
      },
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": "2017-11-30T12:37:55.643+0800",
      "workratio": -1,
      "lastViewed": "2017-11-30T12:37:55.638+0800",
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-29/watchers",
        "watchCount": 1,
        "isWatching": true
      },
      "created": "2017-11-28T20:18:04.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [
        "V0.1"
      ],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": "2017-11-29T20:17:00.000+0800",
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
        "name": "shenweimin",
        "key": "shenweimin",
        "emailAddress": "shenweimin@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
        },
        "displayName": "shenweimin",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T12:37:55.644+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10002",
        "description": "",
        "iconUrl": "https://jira.bytedance.com/images/icons/statuses/closed.png",
        "name": "\u5b8c\u6210",
        "id": "10002",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/3",
          "id": 3,
          "key": "done",
          "colorName": "green",
          "name": "Done"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "create a issue those type = bug",
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "this is a bug",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0j5a7:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": "2017-11-30",
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 0,
        "total": 0,
        "comments": []
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-29/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "changelog": {
    "id": "370914",
    "items": [
      {
        "field": "resolution",
        "fieldtype": "jira",
        "from": null,
        "fromString": null,
        "to": "10103",
        "toString": "\u5f00\u53d1\u5b8c\u6210"
      },
      {
        "field": "status",
        "fieldtype": "jira",
        "from": "10345",
        "fromString": "Doing",
        "to": "10002",
        "toString": "Done"
      }
    ]
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 04:37:55] "POST /webhook/jira?user_id=beijunlong&user_key=beijunlong HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512016697736,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
    "name": "beijunlong",
    "key": "beijunlong",
    "emailAddress": "beijunlong@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
    },
    "displayName": "\u8d1d\u4fca\u9f99",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "127447",
    "self": "https://jira.bytedance.com/rest/api/2/issue/127447",
    "key": "BT-29",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10104",
        "id": "10104",
        "description": "jira.translation.issuetype.bug.name.desc",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11103&avatarType=issuetype",
        "name": "\u7f3a\u9677",
        "subtask": false,
        "avatarId": 11103
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": {
        "self": "https://jira.bytedance.com/rest/api/2/resolution/10103",
        "id": "10103",
        "description": "",
        "name": "\u5f00\u53d1\u5b8c\u6210"
      },
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": "2017-11-30T12:37:55.000+0800",
      "workratio": -1,
      "lastViewed": "2017-11-30T12:38:17.728+0800",
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-29/watchers",
        "watchCount": 1,
        "isWatching": true
      },
      "created": "2017-11-28T20:18:04.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [
        "V0.1"
      ],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": "2017-11-29T20:17:00.000+0800",
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
        "name": "shenweimin",
        "key": "shenweimin",
        "emailAddress": "shenweimin@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
        },
        "displayName": "shenweimin",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T12:38:17.734+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10211",
        "description": "This status is managed internally by JIRA Software",
        "iconUrl": "https://jira.bytedance.com/",
        "name": "Test",
        "id": "10211",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/4",
          "id": 4,
          "key": "indeterminate",
          "colorName": "yellow",
          "name": "In Progress"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "create a issue those type = bug",
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "this is a bug",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0j5a7:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": "2017-11-30",
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 0,
        "total": 0,
        "comments": []
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-29/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "changelog": {
    "id": "370915",
    "items": [
      {
        "field": "status",
        "fieldtype": "jira",
        "from": "10002",
        "fromString": "Done",
        "to": "10211",
        "toString": "Test"
      }
    ]
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '贝俊龙更新了缺陷【this is a bug】的状态', 'text': '#### 贝俊龙更新了缺陷【this is a bug】的状态 \n由【Done】变为了【Test】\n[点击查看详情](https://jira.bytedance.com/browse/BT-29)'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 0, 'errmsg': 'ok'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 04:38:17] "POST /webhook/jira?user_id=beijunlong&user_key=beijunlong HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512016699186,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
    "name": "beijunlong",
    "key": "beijunlong",
    "emailAddress": "beijunlong@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
    },
    "displayName": "\u8d1d\u4fca\u9f99",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "127447",
    "self": "https://jira.bytedance.com/rest/api/2/issue/127447",
    "key": "BT-29",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10104",
        "id": "10104",
        "description": "jira.translation.issuetype.bug.name.desc",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11103&avatarType=issuetype",
        "name": "\u7f3a\u9677",
        "subtask": false,
        "avatarId": 11103
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": {
        "self": "https://jira.bytedance.com/rest/api/2/resolution/10102",
        "id": "10102",
        "description": "",
        "name": "\u6d4b\u8bd5\u5b8c\u6210"
      },
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": "2017-11-30T12:38:19.185+0800",
      "workratio": -1,
      "lastViewed": "2017-11-30T12:38:19.179+0800",
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-29/watchers",
        "watchCount": 1,
        "isWatching": true
      },
      "created": "2017-11-28T20:18:04.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [
        "V0.1"
      ],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": "2017-11-29T20:17:00.000+0800",
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
        "name": "shenweimin",
        "key": "shenweimin",
        "emailAddress": "shenweimin@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
        },
        "displayName": "shenweimin",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T12:38:19.185+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10336",
        "description": "This status is managed internally by JIRA Software",
        "iconUrl": "https://jira.bytedance.com/",
        "name": "Product",
        "id": "10336",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/4",
          "id": 4,
          "key": "indeterminate",
          "colorName": "yellow",
          "name": "In Progress"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "create a issue those type = bug",
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "this is a bug",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0j5a7:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": "2017-11-30",
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 0,
        "total": 0,
        "comments": []
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-29/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "changelog": {
    "id": "370916",
    "items": [
      {
        "field": "resolution",
        "fieldtype": "jira",
        "from": "10103",
        "fromString": "\u5f00\u53d1\u5b8c\u6210",
        "to": "10102",
        "toString": "\u6d4b\u8bd5\u5b8c\u6210"
      },
      {
        "field": "status",
        "fieldtype": "jira",
        "from": "10211",
        "fromString": "Test",
        "to": "10336",
        "toString": "Product"
      }
    ]
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 04:38:19] "POST /webhook/jira?user_id=beijunlong&user_key=beijunlong HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512016716121,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
    "name": "beijunlong",
    "key": "beijunlong",
    "emailAddress": "beijunlong@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
    },
    "displayName": "\u8d1d\u4fca\u9f99",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "127447",
    "self": "https://jira.bytedance.com/rest/api/2/issue/127447",
    "key": "BT-29",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10104",
        "id": "10104",
        "description": "jira.translation.issuetype.bug.name.desc",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11103&avatarType=issuetype",
        "name": "\u7f3a\u9677",
        "subtask": false,
        "avatarId": 11103
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": {
        "self": "https://jira.bytedance.com/rest/api/2/resolution/10101",
        "id": "10101",
        "description": "",
        "name": "\u5df2\u4fee\u590d"
      },
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": "2017-11-30T12:38:36.119+0800",
      "workratio": -1,
      "lastViewed": "2017-11-30T12:38:36.113+0800",
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-29/watchers",
        "watchCount": 1,
        "isWatching": true
      },
      "created": "2017-11-28T20:18:04.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [
        "V0.1"
      ],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": "2017-11-29T20:17:00.000+0800",
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
        "name": "shenweimin",
        "key": "shenweimin",
        "emailAddress": "shenweimin@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
        },
        "displayName": "shenweimin",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T12:38:36.120+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10346",
        "description": "This status is managed internally by JIRA Software",
        "iconUrl": "https://jira.bytedance.com/",
        "name": "archive",
        "id": "10346",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/3",
          "id": 3,
          "key": "done",
          "colorName": "green",
          "name": "Done"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "create a issue those type = bug",
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "this is a bug",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0j5a7:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": "2017-11-30",
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 0,
        "total": 0,
        "comments": []
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-29/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "changelog": {
    "id": "370917",
    "items": [
      {
        "field": "resolution",
        "fieldtype": "jira",
        "from": "10102",
        "fromString": "\u6d4b\u8bd5\u5b8c\u6210",
        "to": "10101",
        "toString": "\u5df2\u4fee\u590d"
      },
      {
        "field": "status",
        "fieldtype": "jira",
        "from": "10336",
        "fromString": "Product",
        "to": "10346",
        "toString": "archive"
      }
    ]
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 04:38:36] "POST /webhook/jira?user_id=beijunlong&user_key=beijunlong HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512016746056,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
    "name": "beijunlong",
    "key": "beijunlong",
    "emailAddress": "beijunlong@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
    },
    "displayName": "\u8d1d\u4fca\u9f99",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "127447",
    "self": "https://jira.bytedance.com/rest/api/2/issue/127447",
    "key": "BT-29",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10104",
        "id": "10104",
        "description": "jira.translation.issuetype.bug.name.desc",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11103&avatarType=issuetype",
        "name": "\u7f3a\u9677",
        "subtask": false,
        "avatarId": 11103
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": {
        "self": "https://jira.bytedance.com/rest/api/2/resolution/10104",
        "id": "10104",
        "description": "",
        "name": "\u5df2\u4e0a\u7ebf"
      },
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": "2017-11-30T12:39:06.055+0800",
      "workratio": -1,
      "lastViewed": "2017-11-30T12:39:06.049+0800",
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-29/watchers",
        "watchCount": 1,
        "isWatching": true
      },
      "created": "2017-11-28T20:18:04.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [
        "V0.1"
      ],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": "2017-11-29T20:17:00.000+0800",
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
        "name": "shenweimin",
        "key": "shenweimin",
        "emailAddress": "shenweimin@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
        },
        "displayName": "shenweimin",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T12:39:06.055+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/6",
        "description": "\u95ee\u9898\u5df2\u7ecf\u5904\u7406\u5b8c\u6210\uff0c\u65b9\u6848\u662f\u6b63\u786e\u7684\u3002\u5df2\u7ecf\u5173\u95ed\u7684\u95ee\u9898\u53ef\u4ee5\u88ab\u518d\u6b21\u6253\u5f00\u3002",
        "iconUrl": "https://jira.bytedance.com/images/icons/statuses/closed.png",
        "name": "\u5173\u95ed",
        "id": "6",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/3",
          "id": 3,
          "key": "done",
          "colorName": "green",
          "name": "Done"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "create a issue those type = bug",
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "this is a bug",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0j5a7:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": "2017-11-30",
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 0,
        "total": 0,
        "comments": []
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-29/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "changelog": {
    "id": "370919",
    "items": [
      {
        "field": "resolution",
        "fieldtype": "jira",
        "from": "10101",
        "fromString": "\u5df2\u4fee\u590d",
        "to": "10104",
        "toString": "\u5df2\u4e0a\u7ebf"
      },
      {
        "field": "status",
        "fieldtype": "jira",
        "from": "10346",
        "fromString": "archive",
        "to": "6",
        "toString": "Closed"
      }
    ]
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 04:39:06] "POST /webhook/jira?user_id=beijunlong&user_key=beijunlong HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512016791278,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127664/comment/58483",
    "id": "58483",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=songli.02",
      "name": "songli.02",
      "key": "songli.02",
      "emailAddress": "songli.02@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=songli.02&avatarId=11230",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=songli.02&avatarId=11230",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=songli.02&avatarId=11230",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=songli.02&avatarId=11230"
      },
      "displayName": "\u5b8b\u7acb",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u9ad8\u5bbd\u6bd4>1.8\u65f6\u53ef\u6ed1\u52a8",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=songli.02",
      "name": "songli.02",
      "key": "songli.02",
      "emailAddress": "songli.02@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=songli.02&avatarId=11230",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=songli.02&avatarId=11230",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=songli.02&avatarId=11230",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=songli.02&avatarId=11230"
      },
      "displayName": "\u5b8b\u7acb",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T12:39:51.278+0800",
    "updated": "2017-11-30T12:39:51.278+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 04:39:51] "POST /webhook/jira?user_id=songli.02&user_key=songli.02 HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512016816845,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127664/comment/58484",
    "id": "58484",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=songli.02",
      "name": "songli.02",
      "key": "songli.02",
      "emailAddress": "songli.02@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=songli.02&avatarId=11230",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=songli.02&avatarId=11230",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=songli.02&avatarId=11230",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=songli.02&avatarId=11230"
      },
      "displayName": "\u5b8b\u7acb",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u56fe\u7247\u95ee\u9898\u627e\u6cfd\u65af[~chenzesi]",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=songli.02",
      "name": "songli.02",
      "key": "songli.02",
      "emailAddress": "songli.02@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=songli.02&avatarId=11230",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=songli.02&avatarId=11230",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=songli.02&avatarId=11230",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=songli.02&avatarId=11230"
      },
      "displayName": "\u5b8b\u7acb",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T12:40:16.845+0800",
    "updated": "2017-11-30T12:40:16.845+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 04:40:16] "POST /webhook/jira?user_id=songli.02&user_key=songli.02 HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512016863614,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127742/comment/58486",
    "id": "58486",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=hongqinghua",
      "name": "hongqinghua",
      "key": "hongqinghua",
      "emailAddress": "hongqinghua@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=hongqinghua&avatarId=11516",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=hongqinghua&avatarId=11516",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=hongqinghua&avatarId=11516",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=hongqinghua&avatarId=11516"
      },
      "displayName": "\u6d2a\u6e05\u534e",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "iPhoneX\u9002\u914d",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=hongqinghua",
      "name": "hongqinghua",
      "key": "hongqinghua",
      "emailAddress": "hongqinghua@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=hongqinghua&avatarId=11516",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=hongqinghua&avatarId=11516",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=hongqinghua&avatarId=11516",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=hongqinghua&avatarId=11516"
      },
      "displayName": "\u6d2a\u6e05\u534e",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T12:41:03.614+0800",
    "updated": "2017-11-30T12:41:03.614+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 04:41:03] "POST /webhook/jira?user_id=hongqinghua&user_key=hongqinghua HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512018178349,
  "webhookEvent": "comment_updated",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/125762/comment/58219",
    "id": "58219",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=pengzipei",
      "name": "pengzipei",
      "key": "pengzipei",
      "emailAddress": "pengzipei@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5f6d\u5b50\u6c9b",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010\u63d0\u6d4b\u529f\u80fd\u3011\u90ed\u6c5f\u6d9b doing\r\nProfile\u9875\u6587\u6848\u4f18\u5316\r\n\u3010\u5206\u652f\u3011\r\nlive_2.9_profile_optimize\r\n\u3010\u7ec6\u8282\u63cf\u8ff0&\u98ce\u9669\u63d0\u793a\u3011\r\n\u6211\u7684/\u4ed6\u4eba\u7684 \u3010\u706b\u529b\u8d21\u732e\u699c\u3011\u5165\u53e3\u6539\u4e3a\u3010\u76f4\u64ad\u706b\u529b\u8d21\u732e\u699c\u3011",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=guojiangtao",
      "name": "guojiangtao",
      "key": "guojiangtao",
      "emailAddress": "guojiangtao@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11141",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11141",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11141",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11141"
      },
      "displayName": "guojiangtao",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-28T22:55:34.000+0800",
    "updated": "2017-11-30T13:02:58.349+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 05:02:58] "POST /webhook/jira?user_id=guojiangtao&user_key=guojiangtao HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512018507841,
  "webhookEvent": "worklog_created",
  "worklog": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127363/worklog/13830",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=caoyifei",
      "name": "caoyifei",
      "key": "caoyifei",
      "emailAddress": "caoyifei@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u66f9\u9038\u98de",
      "active": true,
      "timeZone": "PRC"
    },
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=caoyifei",
      "name": "caoyifei",
      "key": "caoyifei",
      "emailAddress": "caoyifei@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u66f9\u9038\u98de",
      "active": true,
      "timeZone": "PRC"
    },
    "comment": "\u524d\u7aef\u5df2\u5f00\u53d1\u5b8c\u6210 \u5f85\u4e0e\u540e\u7aef\u8054\u8c03",
    "created": "2017-11-30T13:08:27.841+0800",
    "updated": "2017-11-30T13:08:27.841+0800",
    "started": "2017-11-30T13:08:00.000+0800",
    "timeSpent": "1d",
    "timeSpentSeconds": 28800,
    "id": "13830",
    "issueId": "127363"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 05:08:28] "POST /webhook/jira?user_id=caoyifei&user_key=caoyifei HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512018513865,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127966/comment/58487",
    "id": "58487",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=xiaohongjun",
      "name": "xiaohongjun",
      "key": "xiaohongjun",
      "emailAddress": "xiaohongjun@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "xiaohongjun",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "push\u5e26\u7684\u53c2\u6570\u6709\u95ee\u9898\u3002impr_id\u9700\u8981\u5e26\u4e0a",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=xiaohongjun",
      "name": "xiaohongjun",
      "key": "xiaohongjun",
      "emailAddress": "xiaohongjun@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "xiaohongjun",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T13:08:33.865+0800",
    "updated": "2017-11-30T13:08:33.865+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 05:08:33] "POST /webhook/jira?user_id=xiaohongjun&user_key=xiaohongjun HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512018532220,
  "webhookEvent": "worklog_created",
  "worklog": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127364/worklog/13831",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=caoyifei",
      "name": "caoyifei",
      "key": "caoyifei",
      "emailAddress": "caoyifei@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u66f9\u9038\u98de",
      "active": true,
      "timeZone": "PRC"
    },
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=caoyifei",
      "name": "caoyifei",
      "key": "caoyifei",
      "emailAddress": "caoyifei@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u66f9\u9038\u98de",
      "active": true,
      "timeZone": "PRC"
    },
    "comment": "\u524d\u7aef\u5df2\u5f00\u53d1\u5b8c\u6210 \u5f85\u4e0e\u540e\u7aef\u8054\u8c03",
    "created": "2017-11-30T13:08:52.220+0800",
    "updated": "2017-11-30T13:08:52.220+0800",
    "started": "2017-11-30T13:08:00.000+0800",
    "timeSpent": "1d",
    "timeSpentSeconds": 28800,
    "id": "13831",
    "issueId": "127364"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 05:08:52] "POST /webhook/jira?user_id=caoyifei&user_key=caoyifei HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512018579384,
  "webhookEvent": "worklog_created",
  "worklog": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127111/worklog/13832",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=caoyifei",
      "name": "caoyifei",
      "key": "caoyifei",
      "emailAddress": "caoyifei@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u66f9\u9038\u98de",
      "active": true,
      "timeZone": "PRC"
    },
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=caoyifei",
      "name": "caoyifei",
      "key": "caoyifei",
      "emailAddress": "caoyifei@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u66f9\u9038\u98de",
      "active": true,
      "timeZone": "PRC"
    },
    "comment": "\u524d\u7aef\u5f00\u53d1\u4e2d",
    "created": "2017-11-30T13:09:39.384+0800",
    "updated": "2017-11-30T13:09:39.384+0800",
    "started": "2017-11-30T13:09:00.000+0800",
    "timeSpent": "1d",
    "timeSpentSeconds": 28800,
    "id": "13832",
    "issueId": "127111"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 05:09:39] "POST /webhook/jira?user_id=caoyifei&user_key=caoyifei HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512018632711,
  "webhookEvent": "comment_updated",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127632/comment/58469",
    "id": "58469",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=zhangqing.zane",
      "name": "zhangqing.zane",
      "key": "zhangqing.zane",
      "emailAddress": "zhangqing.zane@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5f20\u5e86",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u4e00\u3001\u66f4\u65b0\u3001feedback \u6842\u8d85\u6709\u8fdb\u884c\u4e86\u9002\u5f53\u7684\u91cd\u6784\u8c03\u6574 \u8bf7\u6d4b\u8bd5\u540c\u5b66\u56de\u5f52\u4e00\u4e0b\r\n       \u6ce8\u610f\uff1a\u6d4b\u8bd5\u4e00\u4e0b\u5f39\u7a97\u673a\u5236\uff0c\u53ef\u80fd\u4f1a\u6709\u5f71\u54cd\r\n\u4e8c\u3001\u5723\u8bde\u6d3b\u52a8\u9884\u57cb\r\n\u4e09\u3001\u6e38\u620f\u4e2d\u5fc3\u76f8\u5173\u7684h5\u8df3\u8f6c\u548c\u6253\u70b9\r\n\u56db\u3001\u53d1\u73b0\u9875h5\u6539\u7248\r\n\u4e94\u3001\u201c\u6211\u7684\u201dtab\u589e\u52a0\u201c\u514d\u6d41\u5165\u53e3\u201d",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=zhangqing.zane",
      "name": "zhangqing.zane",
      "key": "zhangqing.zane",
      "emailAddress": "zhangqing.zane@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5f20\u5e86",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T11:55:32.000+0800",
    "updated": "2017-11-30T13:10:32.711+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 05:10:32] "POST /webhook/jira?user_id=zhangqing.zane&user_key=zhangqing.zane HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512018751476,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127906/comment/58488",
    "id": "58488",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=zhanghao",
      "name": "zhanghao",
      "key": "zhanghao",
      "emailAddress": "zhanghao@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11151",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11151",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11151",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11151"
      },
      "displayName": "\u5f20\u660a",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u95ee\u7b54tab\u6ca1\u5b9e\u73b0IDislikePopIconController\uff0c\u4f46\u662f\u6709\u4e9bdocker\u7684controllerDependencies\u91cc\u9762\u5305\u542bIDislikePopIconController\uff0c\u5bfc\u81f4debug\u7248\u672c\u4f1a\u629b\u5f02\u5e38\uff0c\u7ebf\u4e0a\u6ca1\u95ee\u9898\u3002\r\n\u76ee\u524d\u5df2\u77e5controllerDependencies\u91cc\u9762\u5305\u542bIDislikePopIconController\u7684docker\uff1aWendaLargeVideoDocker\uff0cWendaReasonDocker",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=zhanghao",
      "name": "zhanghao",
      "key": "zhanghao",
      "emailAddress": "zhanghao@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11151",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11151",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11151",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11151"
      },
      "displayName": "\u5f20\u660a",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T13:12:31.476+0800",
    "updated": "2017-11-30T13:12:31.476+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 05:12:31] "POST /webhook/jira?user_id=zhanghao&user_key=zhanghao HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512018854508,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/124131/comment/58489",
    "id": "58489",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=wuyingqiang",
      "name": "wuyingqiang",
      "key": "wuyingqiang",
      "emailAddress": "wuyingqiang@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=wuyingqiang&avatarId=11702",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=wuyingqiang&avatarId=11702",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=wuyingqiang&avatarId=11702",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=wuyingqiang&avatarId=11702"
      },
      "displayName": "\u5434\u82f1\u5f3a",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u9057\u7559\u95ee\u9898\uff1a 5\u65e5\u5206\u65f6\uff0c\u6682\u65f6\u6ca1\u6709\u6570\u636e\u3002",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=wuyingqiang",
      "name": "wuyingqiang",
      "key": "wuyingqiang",
      "emailAddress": "wuyingqiang@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=wuyingqiang&avatarId=11702",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=wuyingqiang&avatarId=11702",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=wuyingqiang&avatarId=11702",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=wuyingqiang&avatarId=11702"
      },
      "displayName": "\u5434\u82f1\u5f3a",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T13:14:14.508+0800",
    "updated": "2017-11-30T13:14:14.508+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 05:14:14] "POST /webhook/jira?user_id=wuyingqiang&user_key=wuyingqiang HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512018884938,
  "webhookEvent": "comment_updated",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/125762/comment/58219",
    "id": "58219",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=pengzipei",
      "name": "pengzipei",
      "key": "pengzipei",
      "emailAddress": "pengzipei@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5f6d\u5b50\u6c9b",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010\u63d0\u6d4b\u529f\u80fd\u3011\u90ed\u6c5f\u6d9b done\r\nProfile\u9875\u6587\u6848\u4f18\u5316\r\n\u3010\u5206\u652f\u3011\r\nlive_2.9_profile_optimize\r\n\u3010\u7ec6\u8282\u63cf\u8ff0&\u98ce\u9669\u63d0\u793a\u3011\r\n\u6211\u7684/\u4ed6\u4eba\u7684 \u3010\u706b\u529b\u8d21\u732e\u699c\u3011\u5165\u53e3\u6539\u4e3a\u3010\u76f4\u64ad\u706b\u529b\u8d21\u732e\u699c\u3011",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=guojiangtao",
      "name": "guojiangtao",
      "key": "guojiangtao",
      "emailAddress": "guojiangtao@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11141",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11141",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11141",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11141"
      },
      "displayName": "guojiangtao",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-28T22:55:34.000+0800",
    "updated": "2017-11-30T13:14:44.938+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 05:14:45] "POST /webhook/jira?user_id=guojiangtao&user_key=guojiangtao HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512019133418,
  "webhookEvent": "worklog_created",
  "worklog": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127073/worklog/13833",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=xiejianmin",
      "name": "xiejianmin",
      "key": "xiejianmin",
      "emailAddress": "xiejianmin@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u8c22\u5251\u654f",
      "active": true,
      "timeZone": "PRC"
    },
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=xiejianmin",
      "name": "xiejianmin",
      "key": "xiejianmin",
      "emailAddress": "xiejianmin@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u8c22\u5251\u654f",
      "active": true,
      "timeZone": "PRC"
    },
    "comment": "\u4e1a\u52a1\u903b\u8f91\u5199\u5dee\u4e0d\u591a\u4e86\u3002\r\n\u5728\u7814\u7a76tce\u5b9a\u65f6\u4efb\u52a1\u90e8\u7f72",
    "created": "2017-11-30T13:18:53.418+0800",
    "updated": "2017-11-30T13:18:53.418+0800",
    "started": "2017-11-30T13:17:00.000+0800",
    "timeSpent": "3d",
    "timeSpentSeconds": 86400,
    "id": "13833",
    "issueId": "127073"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 05:18:53] "POST /webhook/jira?user_id=xiejianmin&user_key=xiejianmin HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512019401646,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127325/comment/58490",
    "id": "58490",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=zhangxu.pm",
      "name": "zhangxu.pm",
      "key": "zhangxu.pm",
      "emailAddress": "zhangxu.pm@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=zhangxu.pm&avatarId=11420",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=zhangxu.pm&avatarId=11420",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=zhangxu.pm&avatarId=11420",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=zhangxu.pm&avatarId=11420"
      },
      "displayName": "\u5f20\u65ed",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "PC\u8bbe\u5907\u7684\u663e\u793a\u7684\u72b6\u6001\u663e\u793a +(\u5df2\u79bb\u7ebf)+(\u5728\u7ebf)\r\n\u2014\u2014\u624b\u673a\u8bbe\u5907\u4e0d\u9700\u8981\u663e\u793a\u5728\u7ebf \u5df2\u79bb\u7ebf",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=zhangxu.pm",
      "name": "zhangxu.pm",
      "key": "zhangxu.pm",
      "emailAddress": "zhangxu.pm@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=zhangxu.pm&avatarId=11420",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=zhangxu.pm&avatarId=11420",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=zhangxu.pm&avatarId=11420",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=zhangxu.pm&avatarId=11420"
      },
      "displayName": "\u5f20\u65ed",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T13:23:21.646+0800",
    "updated": "2017-11-30T13:23:21.646+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 05:23:21] "POST /webhook/jira?user_id=zhangxu.pm&user_key=zhangxu.pm HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512019777129,
  "webhookEvent": "comment_updated",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/125764/comment/58280",
    "id": "58280",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=zhangrenfeng",
      "name": "zhangrenfeng",
      "key": "zhangrenfeng",
      "emailAddress": "zhangrenfeng@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5f20\u4ec1\u5cf0",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010\u63d0\u6d4b\u529f\u80fd\u3011 \r\n  1. \u9690\u79c1\u589e\u52a0\u7981\u6b62\u975e\u5173\u6ce8\u6211\u7684\u4eba\u8bc4\u8bba \u90ed\u6c5f\u6d9b done\r\n  2. App\u8c03\u8d77\u4e0a\u62a5\u89c4\u8303\r\n  3. Profile\u9875\u6587\u6848\u4f18\u5316\r\n  4. \u89c6\u9891feed\u9700\u6c42: \u63a8\u8350\u7406\u7531\r\n  5. \u53cd\u4f5c\u5f0aAPI\u52a0\u5bc6\r\n\r\n\u3010\u5206\u652f\u3011 \r\n  feature/2.9_zhangrenfeng\r\n\r\n\u3010\u7ec6\u8282\u63cf\u8ff0&\u98ce\u9669\u63d0\u793a\u3011 \r\n  1. \u9690\u79c1\u589e\u52a0\u7981\u6b62\u975e\u5173\u6ce8\u6211\u7684\u4eba\u8bc4\u8bba IDL: https://code.byted.org/hotsoon/idl/blob/master/src/data/user.proto \u5b57\u6bb5: allow_unfollower_comment\r\n  2. App\u8c03\u8d77\u4e0a\u62a5\u89c4\u8303: \u57cb\u70b9\u533a\u5206\u70b9\u51fbicon\u542f\u52a8\u548c\u4ecewidget\u542f\u52a8\r\n  3. Profile\u9875\u6587\u6848\u4f18\u5316, \u8be5\u6587\u6848\u5b8c\u5168\u7531\u540e\u7aef\u63a7\u5236, \u786e\u4fdd\u540e\u7aef\u4e0b\u53d1\u7684\u6570\u636e\u6b63\u786e\r\n  4. \u89c6\u9891feed\u9700\u6c42\u4e4b\u63a8\u8350\u7406\u7531 IDL: https://code.byted.org/hotsoon/idl/merge_requests/312/diffs \u5b57\u6bb5: recommend_reason\r\n  5. \u53cd\u4f5c\u5f0aAPI\u52a0\u5bc6, \u8fdb\u884c\u5b9e\u540d\u8ba4\u8bc1\uff0c\u63d0\u4ea4\u7ed3\u7b97\u4e2a\u4eba\u4fe1\u606f\u65f6\u5bf9\u5176\u4e2d\u7684\u654f\u611f\u5b57\u6bb5(\u5982:\u59d3\u540d\uff0c\u8eab\u4efd\u8bc1\u53f7, \u94f6\u884c\u5361\u53f7\uff0c\u624b\u673a\u53f7\u7b49)\u52a0\u5bc6, \u7528\u6237\u5982\u679c\u5df2\u7ecf\u8ba4\u8bc1\u5219\u5728\u8bf7\u6c42\u4e2a\u4eba\u7ed3\u7b97\u4fe1\u606f\u65f6, \u9700\u8981\u5bf9\u8fd4\u56de\u7684\u5b57\u6bb5\u8fdb\u884c\u89e3\u5bc6, \u8bf7\u786e\u4fdd\u4e0a\u8ff0\u7f51\u7edc\u8bf7\u6c42\u64cd\u4f5c\u6b63\u5e38.",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=guojiangtao",
      "name": "guojiangtao",
      "key": "guojiangtao",
      "emailAddress": "guojiangtao@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11141",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11141",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11141",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11141"
      },
      "displayName": "guojiangtao",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-29T13:16:31.000+0800",
    "updated": "2017-11-30T13:29:37.129+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 05:29:37] "POST /webhook/jira?user_id=guojiangtao&user_key=guojiangtao HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512020892242,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127966/comment/58491",
    "id": "58491",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=wangshiyu",
      "name": "wangshiyu",
      "key": "wangshiyu",
      "emailAddress": "wangshiyu@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11149",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11149",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11149",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11149"
      },
      "displayName": "\u738b\u8bd7\u96e8",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u6b64\u95ee\u9898\u51fa\u73b0\u5728impr_id\u670d\u52a1\u7aef\u4f20\u7ed9\u5ba2\u6237\u7aef0\u7684\u65f6\u5019\r\n\u9700\u8981\u505a\u5bb9\u9519\u5904\u7406\uff0c\u5e94\u8be5fix\r\n",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=wangshiyu",
      "name": "wangshiyu",
      "key": "wangshiyu",
      "emailAddress": "wangshiyu@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11149",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11149",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11149",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11149"
      },
      "displayName": "\u738b\u8bd7\u96e8",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T13:48:12.242+0800",
    "updated": "2017-11-30T13:48:12.242+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 05:48:12] "POST /webhook/jira?user_id=wangshiyu&user_key=wangshiyu HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512021045870,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127906/comment/58492",
    "id": "58492",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=zhanghao",
      "name": "zhanghao",
      "key": "zhanghao",
      "emailAddress": "zhanghao@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11151",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11151",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11151",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11151"
      },
      "displayName": "\u5f20\u660a",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u6682\u65f6\u5148\u4e0d\u4fee",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=zhanghao",
      "name": "zhanghao",
      "key": "zhanghao",
      "emailAddress": "zhanghao@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11151",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11151",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11151",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11151"
      },
      "displayName": "\u5f20\u660a",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T13:50:45.870+0800",
    "updated": "2017-11-30T13:50:45.870+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 05:50:45] "POST /webhook/jira?user_id=zhanghao&user_key=zhanghao HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512021645100,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/126179/comment/58493",
    "id": "58493",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=zhouyongjia",
      "name": "zhouyongjia",
      "key": "zhouyongjia",
      "emailAddress": "zhouyongjia@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5468\u6c38\u4f73",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u622a\u56fe\u7ea2\u6846\u91cc\u9762\u6709\u4ec0\u4e48\u95ee\u9898\u5417\uff1f\u89c6\u9891\u5c3a\u5bf8\u5c31\u90a3\u4e48\u5927\u7684\uff0c\u5e76\u4e0d\u662f\u7ea2\u6846\u6240\u793a\u90a3\u4e48\u5927\u3002\r\n\u89c6\u9891\u52a0\u8f7d\u4e0d\u4e86\u7684\u8bdd\uff0c\u8ddf\u6211\u4eec\u8fd9\u8fb9\u7f51\u7edc\u4e5f\u6709\u4e00\u5b9a\u5173\u7cfb\u3002",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=zhouyongjia",
      "name": "zhouyongjia",
      "key": "zhouyongjia",
      "emailAddress": "zhouyongjia@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5468\u6c38\u4f73",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T14:00:45.100+0800",
    "updated": "2017-11-30T14:00:45.100+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 06:00:45] "POST /webhook/jira?user_id=zhouyongjia&user_key=zhouyongjia HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512021659832,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127966/comment/58494",
    "id": "58494",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=xiaohongjun",
      "name": "xiaohongjun",
      "key": "xiaohongjun",
      "emailAddress": "xiaohongjun@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "xiaohongjun",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u5ba2\u6237\u7aef\u4e4b\u524d\u5df2\u7ecf\u505a\u5bb9\u9519\uff0c\u9700\u8981\u4f60\u4f20\u503c\uff0c\u4f200\u4e5f\u53ef\u4ee5\u3002\u6240\u4ee5 \u8fd9\u5730\u65b9\u6ca1\u95ee\u9898\u3002",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=xiaohongjun",
      "name": "xiaohongjun",
      "key": "xiaohongjun",
      "emailAddress": "xiaohongjun@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "xiaohongjun",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T14:00:59.832+0800",
    "updated": "2017-11-30T14:00:59.832+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 06:00:59] "POST /webhook/jira?user_id=xiaohongjun&user_key=xiaohongjun HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512021841140,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/122477/comment/58495",
    "id": "58495",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=fulianjie",
      "name": "fulianjie",
      "key": "fulianjie",
      "emailAddress": "fulianjie@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=fulianjie&avatarId=11469",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=fulianjie&avatarId=11469",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=fulianjie&avatarId=11469",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=fulianjie&avatarId=11469"
      },
      "displayName": "\u4ed8\u8fde\u6770",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u4eba\u5458\u5ba1\u9898\u4e0d\u9002\uff0c\u6682\u65f6delay",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=fulianjie",
      "name": "fulianjie",
      "key": "fulianjie",
      "emailAddress": "fulianjie@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=fulianjie&avatarId=11469",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=fulianjie&avatarId=11469",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=fulianjie&avatarId=11469",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=fulianjie&avatarId=11469"
      },
      "displayName": "\u4ed8\u8fde\u6770",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T14:04:01.140+0800",
    "updated": "2017-11-30T14:04:01.140+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 26, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 06:04:01] "POST /webhook/jira?user_id=fulianjie&user_key=fulianjie HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512021859172,
  "webhookEvent": "comment_updated",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/122477/comment/58495",
    "id": "58495",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=fulianjie",
      "name": "fulianjie",
      "key": "fulianjie",
      "emailAddress": "fulianjie@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=fulianjie&avatarId=11469",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=fulianjie&avatarId=11469",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=fulianjie&avatarId=11469",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=fulianjie&avatarId=11469"
      },
      "displayName": "\u4ed8\u8fde\u6770",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u4eba\u5458\u8eab\u4f53\u4e0d\u9002\uff0c\u6682\u65f6delay",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=fulianjie",
      "name": "fulianjie",
      "key": "fulianjie",
      "emailAddress": "fulianjie@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=fulianjie&avatarId=11469",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=fulianjie&avatarId=11469",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=fulianjie&avatarId=11469",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=fulianjie&avatarId=11469"
      },
      "displayName": "\u4ed8\u8fde\u6770",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T14:04:01.000+0800",
    "updated": "2017-11-30T14:04:19.172+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 06:04:19] "POST /webhook/jira?user_id=fulianjie&user_key=fulianjie HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512022008547,
  "webhookEvent": "comment_updated",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/125762/comment/58205",
    "id": "58205",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=pengzipei",
      "name": "pengzipei",
      "key": "pengzipei",
      "emailAddress": "pengzipei@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5f6d\u5b50\u6c9b",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010\u63d0\u6d4b\u529f\u80fd\u3011\u90ed\u6c5f\u6d9b doing\r\n\u89c6\u9891Feed-\u63a8\u8350\u7406\u7531&&\u540c\u57cePOI\r\n\u3010\u5206\u652f\u3011\r\nlive_2.9_feed_card_recommend\r\n\u3010\u7ec6\u8282\u63cf\u8ff0&\u98ce\u9669\u63d0\u793a\u3011\r\n\u63a8\u8350\u7406\u7531\uff1a\r\n\u89c6\u9891Feed\u4e0bMedia\u5b57\u6bb5\u4e2dRecommendReason\u5b57\u6bb5\uff0ctype\u4e3a1\u65f6\u4e3a\u540c\u57ce\u5185\u5bb9\uff0c\u6b64\u65f6\u5728feed\u5361\u7247\u5de6\u4e0a\u89d2\u5c55\u793a\u540c\u57ce\u7684icon\u53cacity\u5b57\u6bb5\uff1b\u4e3a2\u65f6\u5728feed\u5361\u7247\u5de6\u4e0a\u89d2\u5c55\u793a\u597d\u53cbicon\u53ca \u597d\u53cbAB\uff0cA\u4e3a friend_name\u5b57\u6bb5\uff08\u53ef\u80fd\u4e3a\u7a7a\uff09\uff0cB\u4e3areason\u5b57\u6bb5\r\n\r\n\u540c\u57cePOI\r\n\u540c\u57cefeed\u4e0bmedia\u5b57\u6bb5\u4e2dposition\u5b57\u6bb5\u5b58\u5728\u65f6\u5c55\u793a\u548c\u63a8\u8350\u7406\u7531\u7c7b\u4f3c\u7684UI\r\n\r\n\u5f53\u5b57\u6570\u8fbe\u5230\u4e00\u5b9a\u9650\u5236\u5c06\u8d85\u51fa\u5c4f\u5e55\u65f6\uff08\u5ba2\u6237\u7aefUI\u5224\u65ad\uff09\uff0c\u622a\u65ad\u5b57\u7b26\u4e32\u7528...\u4ee3\u66ff\u5c55\u793a\u3002\u5982\u679c\u662f\u63a8\u8350\u7406\u7531\uff0c\u53ea\u622a\u65adfriend_name\u5b57\u6bb5",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=guojiangtao",
      "name": "guojiangtao",
      "key": "guojiangtao",
      "emailAddress": "guojiangtao@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11141",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11141",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11141",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11141"
      },
      "displayName": "guojiangtao",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-28T21:47:42.000+0800",
    "updated": "2017-11-30T14:06:48.547+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 06:06:48] "POST /webhook/jira?user_id=guojiangtao&user_key=guojiangtao HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512022150000,
  "webhookEvent": "worklog_updated",
  "worklog": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127071/worklog/13824",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=sunkeqing",
      "name": "sunkeqing",
      "key": "sunkeqing",
      "emailAddress": "sunkeqing@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=sunkeqing&avatarId=11506",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=sunkeqing&avatarId=11506",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=sunkeqing&avatarId=11506",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=sunkeqing&avatarId=11506"
      },
      "displayName": "\u5b59\u53ef\u503e",
      "active": true,
      "timeZone": "PRC"
    },
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=sunkeqing",
      "name": "sunkeqing",
      "key": "sunkeqing",
      "emailAddress": "sunkeqing@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=sunkeqing&avatarId=11506",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=sunkeqing&avatarId=11506",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=sunkeqing&avatarId=11506",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=sunkeqing&avatarId=11506"
      },
      "displayName": "\u5b59\u53ef\u503e",
      "active": true,
      "timeZone": "PRC"
    },
    "comment": "\u524d\u7aef\u5df2\u5f00\u53d1\u5b8c\u6210\uff0c\u5f85\u540e\u7aef\u5f00\u53d1\u5b8c\u6210\u540e\u8054\u8c03\u5361\u5238\u5ba1\u6838\u6d41\u7a0b",
    "created": "2017-11-30T11:48:09.000+0800",
    "updated": "2017-11-30T14:09:10.000+0800",
    "started": "2017-11-30T11:47:00.000+0800",
    "timeSpent": "1d",
    "timeSpentSeconds": 28800,
    "id": "13824",
    "issueId": "127071"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 06:09:10] "POST /webhook/jira?user_id=sunkeqing&user_key=sunkeqing HTTP/1.0" 200 -
INFO:werkzeug: * Running on http://0.0.0.0:3002/ (Press CTRL+C to quit)
INFO:werkzeug: * Running on http://0.0.0.0:3002/ (Press CTRL+C to quit)
INFO:root:
[jira
<^>
{
  "timestamp": 1512022756061,
  "webhookEvent": "worklog_created",
  "worklog": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/125929/worklog/13834",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=lvshuangquan",
      "name": "lvshuangquan",
      "key": "lvshuangquan",
      "emailAddress": "lvshuangquan@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11146",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11146",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11146",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11146"
      },
      "displayName": "\u5415\u53cc\u5168",
      "active": true,
      "timeZone": "PRC"
    },
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=lvshuangquan",
      "name": "lvshuangquan",
      "key": "lvshuangquan",
      "emailAddress": "lvshuangquan@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11146",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11146",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11146",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11146"
      },
      "displayName": "\u5415\u53cc\u5168",
      "active": true,
      "timeZone": "PRC"
    },
    "comment": "\u4ea7\u54c1\u65b9\u6848\u57fa\u672c\u786e\u5b9a\uff0c\u5f55\u5165\u7aef\u51fa\u7b80\u5355\u6280\u672f\u65b9\u6848\uff0c\u7b49\u5f85\u6296\u97f3\u6280\u672f\u65b9\u8ba8\u8bba\u6280\u672f\u65b9\u6848\u3002",
    "created": "2017-11-30T14:19:16.061+0800",
    "updated": "2017-11-30T14:19:16.061+0800",
    "started": "2017-11-29T10:15:00.000+0800",
    "timeSpent": "2w",
    "timeSpentSeconds": 288000,
    "id": "13834",
    "issueId": "125929"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 06:19:16] "POST /webhook/jira?user_id=lvshuangquan&user_key=lvshuangquan HTTP/1.0" 200 -
INFO:root:
[jenkins
<^>
{
  "name": "eventhub",
  "display_name": "eventhub",
  "url": "job/hellogo/",
  "build": {
    "full_url": "http://jenkins.yogiman.cn:8080/job/eventhub/job/master/",
    "number": 11,
    "queue_id": 3,
    "timestamp": 1510889226696,
    "phase": "STARTED",
    "url": "job/hellogo/11/",
    "scm": {
      "url": "http://10.1.80.107:10080/yangluo/hellogo.git",
      "branch": "origin/master",
      "commit": "839c10a3697c8ad0ff1938c9eb4d9ea9e038f86a"
    },
    "log": "",
    "artifacts": {}
  }
}
<^>
jenkins]

INFO:root:msg: {'repo': 'eventhub', 'url': 'http://jenkins.yogiman.cn:8080/job/eventhub/job/master/', 'phase': 'STARTED', 'status': ''}
ERROR:__main__:Exception on /webhook/jenkins [POST]
Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 32, in webhook
    resp = Jenkins.send_message(msg)
  File "/mnt/jenkins.py", line 32, in send_message
    resp = requests.post(url=webhook, data=json.dumps(msg), headers=header)
NameError: name 'requests' is not defined
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 06:19:36] "POST /webhook/jenkins HTTP/1.0" 500 -
INFO:werkzeug: * Running on http://0.0.0.0:3002/ (Press CTRL+C to quit)
INFO:root:
[jenkins
<^>
{
  "name": "eventhub",
  "display_name": "eventhub",
  "url": "job/hellogo/",
  "build": {
    "full_url": "http://jenkins.yogiman.cn:8080/job/eventhub/job/master/",
    "number": 11,
    "queue_id": 3,
    "timestamp": 1510889226696,
    "phase": "STARTED",
    "url": "job/hellogo/11/",
    "scm": {
      "url": "http://10.1.80.107:10080/yangluo/hellogo.git",
      "branch": "origin/master",
      "commit": "839c10a3697c8ad0ff1938c9eb4d9ea9e038f86a"
    },
    "log": "",
    "artifacts": {}
  }
}
<^>
jenkins]

INFO:root:msg: {'repo': 'eventhub', 'url': 'http://jenkins.yogiman.cn:8080/job/eventhub/job/master/', 'phase': 'STARTED', 'status': ''}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=49679eab1c1d2c16af000de2f61e2803a9071cb38b92e16b05c8ba18f007ccaa HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'msgtype  is null'}
INFO:root:jenkins dose: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 06:20:39] "POST /webhook/jenkins HTTP/1.0" 200 -
INFO:werkzeug: * Running on http://0.0.0.0:3002/ (Press CTRL+C to quit)
INFO:root:
[jenkins
<^>
{
  "name": "eventhub",
  "display_name": "eventhub",
  "url": "job/hellogo/",
  "build": {
    "full_url": "http://jenkins.yogiman.cn:8080/job/eventhub/job/master/",
    "number": 11,
    "queue_id": 3,
    "timestamp": 1510889226696,
    "phase": "STARTED",
    "url": "job/hellogo/11/",
    "scm": {
      "url": "http://10.1.80.107:10080/yangluo/hellogo.git",
      "branch": "origin/master",
      "commit": "839c10a3697c8ad0ff1938c9eb4d9ea9e038f86a"
    },
    "log": "",
    "artifacts": {}
  }
}
<^>
jenkins]

INFO:root:Incredible Exception: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jenkins [POST]
Traceback (most recent call last):
  File "/mnt/jenkins.py", line 22, in transform_data
    _pack_response(_pack_msg(repo, url, phase, status))
  File "/mnt/jenkins.py", line 42, in _pack_msg
    title = '开始构建 {repo}'.format(repo)
KeyError: 'repo'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 31, in webhook
    msg = Jenkins.transform_data(data)
  File "/mnt/jenkins.py", line 25, in transform_data
    logging.info('Incredible Exception: data={data}\n exception={exc}\n trace={trace}'). \
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 06:23:56] "POST /webhook/jenkins HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512023066679,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/121141/comment/58498",
    "id": "58498",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=lvshuangquan",
      "name": "lvshuangquan",
      "key": "lvshuangquan",
      "emailAddress": "lvshuangquan@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11146",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11146",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11146",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11146"
      },
      "displayName": "\u5415\u53cc\u5168",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010\u6296\u97f3\u4fe1\u606f\u6d41\u4e8c\u671f\u539f\u751f\u5e7f\u544a\u3011\u672c\u5468\u4ea7\u54c1\u65b9\u6848\u57fa\u672c\u786e\u5b9a\uff0c\u6280\u672f\u65b9\u6848\u5728\u7b49\u5f85\u6296\u97f3\u6280\u672f\u65b9\uff08\u5bf9\u65b9\u76ee\u524d\u5fd9\u4e8e\u7535\u5546\uff09\r\n\u3010\u706b\u5c71\u3001\u6296\u97f3\u5f00\u5c4f\u5e7f\u544a\u652f\u6301GD\u552e\u5356\u3011\u589e\u52a0\u706b\u5c71\u3001\u6296\u97f3\u5bf9\u5e94\u7d20\u6750banner\uff0c\u5df2\u5f00\u53d1\u5b8c\u6bd5\r\n",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=lvshuangquan",
      "name": "lvshuangquan",
      "key": "lvshuangquan",
      "emailAddress": "lvshuangquan@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11146",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11146",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11146",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11146"
      },
      "displayName": "\u5415\u53cc\u5168",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T14:24:26.679+0800",
    "updated": "2017-11-30T14:24:26.679+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={data}
 exception={exc}
 trace={trace}
ERROR:__main__:Exception on /webhook/jira [POST]
Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1817, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1477, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1381, in handle_user_exception
    reraise(exc_type, exc_value, tb)
  File "/usr/lib/python3.6/site-packages/flask/_compat.py", line 33, in reraise
    raise value
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1475, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/lib/python3.6/site-packages/flask/app.py", line 1461, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "flaskapp.py", line 27, in webhook
    msg = Jira.transform_data(data)
  File "/mnt/jira.py", line 23, in transform_data
    logging.info('Invalid data format: data={data}\n exception={exc}\n trace={trace}').\
AttributeError: 'NoneType' object has no attribute 'format'
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 06:24:26] "POST /webhook/jira?user_id=lvshuangquan&user_key=lvshuangquan HTTP/1.0" 500 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512023214122,
  "webhookEvent": "comment_deleted",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/121204/comment/58470",
    "id": "58470",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=sunkeqing",
      "name": "sunkeqing",
      "key": "sunkeqing",
      "emailAddress": "sunkeqing@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=sunkeqing&avatarId=11506",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=sunkeqing&avatarId=11506",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=sunkeqing&avatarId=11506",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=sunkeqing&avatarId=11506"
      },
      "displayName": "\u5b59\u53ef\u503e",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "11\u670827\u65e5 ~ 11\u670830\u65e5\uff1a\r\n1.\u95e8\u5e97\u7cfb\u7edf\u6570\u636e\u63a5\u53e3\u8fd8\u672a\u5f00\u59cb\u5f00\u53d1\r\n2.\u5361\u5238\u95e8\u5e97\u524d\u540e\u7aef\u5f00\u53d1\u4e2d",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=sunkeqing",
      "name": "sunkeqing",
      "key": "sunkeqing",
      "emailAddress": "sunkeqing@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=sunkeqing&avatarId=11506",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=sunkeqing&avatarId=11506",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=sunkeqing&avatarId=11506",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=sunkeqing&avatarId=11506"
      },
      "displayName": "\u5b59\u53ef\u503e",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T11:57:12.000+0800",
    "updated": "2017-11-30T11:57:12.000+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 06:26:54] "POST /webhook/jira?user_id=sunkeqing&user_key=sunkeqing HTTP/1.0" 200 -
INFO:werkzeug: * Running on http://0.0.0.0:3002/ (Press CTRL+C to quit)
INFO:werkzeug: * Running on http://0.0.0.0:3002/ (Press CTRL+C to quit)
INFO:root:
[jira
<^>
{
  "timestamp": 1512023449466,
  "webhookEvent": "worklog_created",
  "worklog": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/125544/worklog/13836",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=lvshuangquan",
      "name": "lvshuangquan",
      "key": "lvshuangquan",
      "emailAddress": "lvshuangquan@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11146",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11146",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11146",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11146"
      },
      "displayName": "\u5415\u53cc\u5168",
      "active": true,
      "timeZone": "PRC"
    },
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=lvshuangquan",
      "name": "lvshuangquan",
      "key": "lvshuangquan",
      "emailAddress": "lvshuangquan@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11146",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11146",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11146",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11146"
      },
      "displayName": "\u5415\u53cc\u5168",
      "active": true,
      "timeZone": "PRC"
    },
    "comment": "\u9996\u5148\u63d0\u4f9bmock\u6570\u636e\uff0c\u4ee5\u4f9b\u6d4b\u8bd5",
    "created": "2017-11-30T14:30:49.466+0800",
    "updated": "2017-11-30T14:30:49.466+0800",
    "started": "2017-11-30T02:30:00.000+0800",
    "timeSpent": "1d",
    "timeSpentSeconds": 28800,
    "id": "13836",
    "issueId": "125544"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 06:30:49] "POST /webhook/jira?user_id=lvshuangquan&user_key=lvshuangquan HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512023468604,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/126085/comment/58502",
    "id": "58502",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=jiwei",
      "name": "jiwei",
      "key": "jiwei",
      "emailAddress": "jiwei@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u7eaa\u73ae",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u7ecf\u786e\u8ba4\uff0c\u6b64\u529f\u80fd\u5f00\u542f\u540e\uff0c\u53d1\u5e03\u89c6\u9891\u65f6feed\u4e3b\u9875\u9762\u4f1a\u88ab\u9500\u6bc1\uff0c\u5bfc\u81f4\u89c6\u9891\u65e0\u6cd5\u53d1\u5e03\uff0c\u5c5e\u6b63\u5e38\u573a\u666f\u3002",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=jiwei",
      "name": "jiwei",
      "key": "jiwei",
      "emailAddress": "jiwei@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u7eaa\u73ae",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T14:31:08.604+0800",
    "updated": "2017-11-30T14:31:08.604+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={'timestamp': 1512023468604, 'webhookEvent': 'comment_created', 'comment': {'self': 'https://jira.bytedance.com/rest/api/2/issue/126085/comment/58502', 'id': '58502', 'author': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=jiwei', 'name': 'jiwei', 'key': 'jiwei', 'emailAddress': 'jiwei@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=10122', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122'}, 'displayName': '纪玮', 'active': True, 'timeZone': 'PRC'}, 'body': '经确认，此功能开启后，发布视频时feed主页面会被销毁，导致视频无法发布，属正常场景。', 'updateAuthor': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=jiwei', 'name': 'jiwei', 'key': 'jiwei', 'emailAddress': 'jiwei@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=10122', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122'}, 'displayName': '纪玮', 'active': True, 'timeZone': 'PRC'}, 'created': '2017-11-30T14:31:08.604+0800', 'updated': '2017-11-30T14:31:08.604+0800'}}
 exception='NoneType' object has no attribute 'get'
 trace=Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

INFO:root:msg: {}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 40035, 'errmsg': '不合法的参数'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 06:31:08] "POST /webhook/jira?user_id=jiwei&user_key=jiwei HTTP/1.0" 200 -
INFO:root:
[jenkins
<^>
{
  "name": "eventhub",
  "display_name": "eventhub",
  "url": "job/hellogo/",
  "build": {
    "full_url": "http://jenkins.yogiman.cn:8080/job/eventhub/job/master/",
    "number": 11,
    "queue_id": 3,
    "timestamp": 1510889226696,
    "phase": "STARTED",
    "url": "job/hellogo/11/",
    "scm": {
      "url": "http://10.1.80.107:10080/yangluo/hellogo.git",
      "branch": "origin/master",
      "commit": "839c10a3697c8ad0ff1938c9eb4d9ea9e038f86a"
    },
    "log": "",
    "artifacts": {}
  }
}
<^>
jenkins]

INFO:root:Incredible Exception: data={'name': 'eventhub', 'display_name': 'eventhub', 'url': 'job/hellogo/', 'build': {'full_url': 'http://jenkins.yogiman.cn:8080/job/eventhub/job/master/', 'number': 11, 'queue_id': 3, 'timestamp': 1510889226696, 'phase': 'STARTED', 'url': 'job/hellogo/11/', 'scm': {'url': 'http://10.1.80.107:10080/yangluo/hellogo.git', 'branch': 'origin/master', 'commit': '839c10a3697c8ad0ff1938c9eb4d9ea9e038f86a'}, 'log': '', 'artifacts': {}}}
 exception='repo'
 trace=Traceback (most recent call last):
  File "/mnt/jenkins.py", line 22, in transform_data
    title, text = _pack_msg(repo, url, phase, status)
  File "/mnt/jenkins.py", line 41, in _pack_msg
    title = '开始构建 {repo}'.format(repo)
KeyError: 'repo'

INFO:root:msg: {}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=49679eab1c1d2c16af000de2f61e2803a9071cb38b92e16b05c8ba18f007ccaa HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 40035, 'errmsg': '不合法的参数'}
INFO:root:jenkins dose: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 06:31:25] "POST /webhook/jenkins HTTP/1.0" 200 -
INFO:werkzeug: * Running on http://0.0.0.0:3002/ (Press CTRL+C to quit)
INFO:root:
[jenkins
<^>
{
  "name": "eventhub",
  "display_name": "eventhub",
  "url": "job/hellogo/",
  "build": {
    "full_url": "http://jenkins.yogiman.cn:8080/job/eventhub/job/master/",
    "number": 11,
    "queue_id": 3,
    "timestamp": 1510889226696,
    "phase": "STARTED",
    "url": "job/hellogo/11/",
    "scm": {
      "url": "http://10.1.80.107:10080/yangluo/hellogo.git",
      "branch": "origin/master",
      "commit": "839c10a3697c8ad0ff1938c9eb4d9ea9e038f86a"
    },
    "log": "",
    "artifacts": {}
  }
}
<^>
jenkins]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '开始构建 eventhub', 'text': '#### 开始构建 eventhub \n[点击查看详情](http://jenkins.yogiman.cn:8080/job/eventhub/job/master/)'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=49679eab1c1d2c16af000de2f61e2803a9071cb38b92e16b05c8ba18f007ccaa HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 0, 'errmsg': 'ok'}
INFO:root:jenkins dose: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 06:32:37] "POST /webhook/jenkins HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512023703580,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127749/comment/58503",
    "id": "58503",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=jiangkun",
      "name": "jiangkun",
      "key": "jiangkun",
      "emailAddress": "jiangkun@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=jiangkun&avatarId=11248",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=jiangkun&avatarId=11248",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=jiangkun&avatarId=11248",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=jiangkun&avatarId=11248"
      },
      "displayName": "\u6c5f\u7428",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u5173\u6ce8tab\u65e0\u5185\u5bb9 \u5219\u81ea\u52a8\u5237\u65b0 \u6709\u5185\u5bb9\u4e0d\u4f1a\u81ea\u52a8\u5237\u65b0",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=jiangkun",
      "name": "jiangkun",
      "key": "jiangkun",
      "emailAddress": "jiangkun@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=jiangkun&avatarId=11248",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=jiangkun&avatarId=11248",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=jiangkun&avatarId=11248",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=jiangkun&avatarId=11248"
      },
      "displayName": "\u6c5f\u7428",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T14:35:03.580+0800",
    "updated": "2017-11-30T14:35:03.580+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={'timestamp': 1512023703580, 'webhookEvent': 'comment_created', 'comment': {'self': 'https://jira.bytedance.com/rest/api/2/issue/127749/comment/58503', 'id': '58503', 'author': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=jiangkun', 'name': 'jiangkun', 'key': 'jiangkun', 'emailAddress': 'jiangkun@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?ownerId=jiangkun&avatarId=11248', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&ownerId=jiangkun&avatarId=11248', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=jiangkun&avatarId=11248', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=jiangkun&avatarId=11248'}, 'displayName': '江琨', 'active': True, 'timeZone': 'PRC'}, 'body': '关注tab无内容 则自动刷新 有内容不会自动刷新', 'updateAuthor': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=jiangkun', 'name': 'jiangkun', 'key': 'jiangkun', 'emailAddress': 'jiangkun@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?ownerId=jiangkun&avatarId=11248', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&ownerId=jiangkun&avatarId=11248', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=jiangkun&avatarId=11248', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=jiangkun&avatarId=11248'}, 'displayName': '江琨', 'active': True, 'timeZone': 'PRC'}, 'created': '2017-11-30T14:35:03.580+0800', 'updated': '2017-11-30T14:35:03.580+0800'}}
 exception='NoneType' object has no attribute 'get'
 trace=Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

INFO:root:msg: {}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 40035, 'errmsg': '不合法的参数'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 06:35:03] "POST /webhook/jira?user_id=jiangkun&user_key=jiangkun HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512023833628,
  "webhookEvent": "worklog_created",
  "worklog": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/118261/worklog/13837",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=hepan",
      "name": "hepan",
      "key": "hepan",
      "emailAddress": "hepan@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u4f55\u6500",
      "active": true,
      "timeZone": "PRC"
    },
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=hepan",
      "name": "hepan",
      "key": "hepan",
      "emailAddress": "hepan@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u4f55\u6500",
      "active": true,
      "timeZone": "PRC"
    },
    "comment": "\u9884\u8ba1\u4eca\u5929\u4e0a\u7ebf",
    "created": "2017-11-30T14:37:13.628+0800",
    "updated": "2017-11-30T14:37:13.628+0800",
    "started": "2017-11-30T14:32:00.000+0800",
    "timeSpent": "3m",
    "timeSpentSeconds": 180,
    "id": "13837",
    "issueId": "118261"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 06:37:13] "POST /webhook/jira?user_id=hepan&user_key=hepan HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512023982655,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127878/comment/58504",
    "id": "58504",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=luozhenjuan",
      "name": "luozhenjuan",
      "key": "luozhenjuan",
      "emailAddress": "luozhenjuan@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11149",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11149",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11149",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11149"
      },
      "displayName": "luozhenjuan",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u8fdb\u5165\u89c6\u9891\u8be6\u60c5\u9875\u540e\u51fa\u73b0crash",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=luozhenjuan",
      "name": "luozhenjuan",
      "key": "luozhenjuan",
      "emailAddress": "luozhenjuan@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11149",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11149",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11149",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11149"
      },
      "displayName": "luozhenjuan",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T14:39:42.655+0800",
    "updated": "2017-11-30T14:39:42.655+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={'timestamp': 1512023982655, 'webhookEvent': 'comment_created', 'comment': {'self': 'https://jira.bytedance.com/rest/api/2/issue/127878/comment/58504', 'id': '58504', 'author': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=luozhenjuan', 'name': 'luozhenjuan', 'key': 'luozhenjuan', 'emailAddress': 'luozhenjuan@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=11149', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11149', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11149', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11149'}, 'displayName': 'luozhenjuan', 'active': True, 'timeZone': 'PRC'}, 'body': '进入视频详情页后出现crash', 'updateAuthor': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=luozhenjuan', 'name': 'luozhenjuan', 'key': 'luozhenjuan', 'emailAddress': 'luozhenjuan@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=11149', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11149', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11149', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11149'}, 'displayName': 'luozhenjuan', 'active': True, 'timeZone': 'PRC'}, 'created': '2017-11-30T14:39:42.655+0800', 'updated': '2017-11-30T14:39:42.655+0800'}}
 exception='NoneType' object has no attribute 'get'
 trace=Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

INFO:root:msg: {}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 40035, 'errmsg': '不合法的参数'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 06:39:42] "POST /webhook/jira?user_id=luozhenjuan&user_key=luozhenjuan HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512024094796,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127563/comment/58505",
    "id": "58505",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=lina.02",
      "name": "lina.02",
      "key": "lina.02",
      "emailAddress": "lina.02@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11141",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11141",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11141",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11141"
      },
      "displayName": "\u674e\u5a1c",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "@\u6c5f\u91d1\u83b2 \u786e\u8ba4\u4e00\u4e0b",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=lina.02",
      "name": "lina.02",
      "key": "lina.02",
      "emailAddress": "lina.02@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11141",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11141",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11141",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11141"
      },
      "displayName": "\u674e\u5a1c",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T14:41:34.796+0800",
    "updated": "2017-11-30T14:41:34.796+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={'timestamp': 1512024094796, 'webhookEvent': 'comment_created', 'comment': {'self': 'https://jira.bytedance.com/rest/api/2/issue/127563/comment/58505', 'id': '58505', 'author': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=lina.02', 'name': 'lina.02', 'key': 'lina.02', 'emailAddress': 'lina.02@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=11141', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11141', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11141', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11141'}, 'displayName': '李娜', 'active': True, 'timeZone': 'PRC'}, 'body': '@江金莲 确认一下', 'updateAuthor': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=lina.02', 'name': 'lina.02', 'key': 'lina.02', 'emailAddress': 'lina.02@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=11141', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11141', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11141', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11141'}, 'displayName': '李娜', 'active': True, 'timeZone': 'PRC'}, 'created': '2017-11-30T14:41:34.796+0800', 'updated': '2017-11-30T14:41:34.796+0800'}}
 exception='NoneType' object has no attribute 'get'
 trace=Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

INFO:root:msg: {}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 40035, 'errmsg': '不合法的参数'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 06:41:34] "POST /webhook/jira?user_id=lina.02&user_key=lina.02 HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512024158959,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127862/comment/58506",
    "id": "58506",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=songli.02",
      "name": "songli.02",
      "key": "songli.02",
      "emailAddress": "songli.02@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=songli.02&avatarId=11230",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=songli.02&avatarId=11230",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=songli.02&avatarId=11230",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=songli.02&avatarId=11230"
      },
      "displayName": "\u5b8b\u7acb",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u81ea\u6d4b\u65f6\u8bbe\u7f6e\u7684\u6bcf\u5929\u5c55\u793a\u91cf\u8ddf\u5c55\u793a\u5929\u6570\u4e00\u81f4\uff0c\u6240\u4ee5\u6ca1\u6709\u6d4b\u51fa\u95ee\u9898",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=songli.02",
      "name": "songli.02",
      "key": "songli.02",
      "emailAddress": "songli.02@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=songli.02&avatarId=11230",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=songli.02&avatarId=11230",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=songli.02&avatarId=11230",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=songli.02&avatarId=11230"
      },
      "displayName": "\u5b8b\u7acb",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T14:42:38.959+0800",
    "updated": "2017-11-30T14:42:38.959+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={'timestamp': 1512024158959, 'webhookEvent': 'comment_created', 'comment': {'self': 'https://jira.bytedance.com/rest/api/2/issue/127862/comment/58506', 'id': '58506', 'author': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=songli.02', 'name': 'songli.02', 'key': 'songli.02', 'emailAddress': 'songli.02@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?ownerId=songli.02&avatarId=11230', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&ownerId=songli.02&avatarId=11230', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=songli.02&avatarId=11230', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=songli.02&avatarId=11230'}, 'displayName': '宋立', 'active': True, 'timeZone': 'PRC'}, 'body': '自测时设置的每天展示量跟展示天数一致，所以没有测出问题', 'updateAuthor': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=songli.02', 'name': 'songli.02', 'key': 'songli.02', 'emailAddress': 'songli.02@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?ownerId=songli.02&avatarId=11230', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&ownerId=songli.02&avatarId=11230', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=songli.02&avatarId=11230', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=songli.02&avatarId=11230'}, 'displayName': '宋立', 'active': True, 'timeZone': 'PRC'}, 'created': '2017-11-30T14:42:38.959+0800', 'updated': '2017-11-30T14:42:38.959+0800'}}
 exception='NoneType' object has no attribute 'get'
 trace=Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

INFO:root:msg: {}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 40035, 'errmsg': '不合法的参数'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 06:42:39] "POST /webhook/jira?user_id=songli.02&user_key=songli.02 HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512024332088,
  "webhookEvent": "comment_updated",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127878/comment/58504",
    "id": "58504",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=luozhenjuan",
      "name": "luozhenjuan",
      "key": "luozhenjuan",
      "emailAddress": "luozhenjuan@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11149",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11149",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11149",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11149"
      },
      "displayName": "luozhenjuan",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u70b9\u51fb\u89c6\u9891\u64ad\u653e\u6309\u94ae\u4e5f\u4f1a\u51fa\u73b0crash",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=luozhenjuan",
      "name": "luozhenjuan",
      "key": "luozhenjuan",
      "emailAddress": "luozhenjuan@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11149",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11149",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11149",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11149"
      },
      "displayName": "luozhenjuan",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T14:39:42.000+0800",
    "updated": "2017-11-30T14:45:32.088+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 06:45:32] "POST /webhook/jira?user_id=luozhenjuan&user_key=luozhenjuan HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512024596243,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
    "name": "shenweimin",
    "key": "shenweimin",
    "emailAddress": "shenweimin@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
    },
    "displayName": "shenweimin",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "116139",
    "self": "https://jira.bytedance.com/rest/api/2/issue/116139",
    "key": "BT-24",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10001",
        "id": "10001",
        "description": "gh.issue.story.desc",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11115&avatarType=issuetype",
        "name": "Story",
        "subtask": false,
        "avatarId": 11115
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": null,
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": null,
      "workratio": -1,
      "lastViewed": null,
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-24/watchers",
        "watchCount": 2,
        "isWatching": false
      },
      "created": "2017-10-23T11:40:52.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": null,
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T14:49:56.000+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10002",
        "description": "",
        "iconUrl": "https://jira.bytedance.com/images/icons/statuses/closed.png",
        "name": "\u5b8c\u6210",
        "id": "10002",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/3",
          "id": 3,
          "key": "done",
          "colorName": "green",
          "name": "Done"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": null,
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "2222",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
        "name": "suchenyu",
        "key": "suchenyu",
        "emailAddress": "suchenyu@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
        },
        "displayName": "\u82cf\u9648\u6631",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
        "name": "suchenyu",
        "key": "suchenyu",
        "emailAddress": "suchenyu@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
        },
        "displayName": "\u82cf\u9648\u6631",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0hclv:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": null,
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 1,
        "total": 1,
        "comments": [
          {
            "self": "https://jira.bytedance.com/rest/api/2/issue/116139/comment/58243",
            "id": "58243",
            "author": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
              "name": "beijunlong",
              "key": "beijunlong",
              "emailAddress": "beijunlong@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
              },
              "displayName": "\u8d1d\u4fca\u9f99",
              "active": true,
              "timeZone": "PRC"
            },
            "body": "PINGLUN",
            "updateAuthor": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
              "name": "beijunlong",
              "key": "beijunlong",
              "emailAddress": "beijunlong@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
              },
              "displayName": "\u8d1d\u4fca\u9f99",
              "active": true,
              "timeZone": "PRC"
            },
            "created": "2017-11-29T10:57:54.000+0800",
            "updated": "2017-11-29T10:57:54.000+0800"
          }
        ]
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-24/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "changelog": {
    "id": "371264",
    "items": [
      {
        "field": "Rank",
        "fieldtype": "custom",
        "from": "",
        "fromString": "",
        "to": "",
        "toString": "Ranked higher"
      }
    ]
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 06:49:56] "POST /webhook/jira?user_id=shenweimin&user_key=shenweimin HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512024598987,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
    "name": "shenweimin",
    "key": "shenweimin",
    "emailAddress": "shenweimin@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
    },
    "displayName": "shenweimin",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "116049",
    "self": "https://jira.bytedance.com/rest/api/2/issue/116049",
    "key": "BT-18",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10001",
        "id": "10001",
        "description": "gh.issue.story.desc",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11115&avatarType=issuetype",
        "name": "Story",
        "subtask": false,
        "avatarId": 11115
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": {
        "self": "https://jira.bytedance.com/rest/api/2/resolution/10102",
        "id": "10102",
        "description": "",
        "name": "\u6d4b\u8bd5\u5b8c\u6210"
      },
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": "2017-11-30T14:49:58.986+0800",
      "workratio": -1,
      "lastViewed": "2017-11-30T14:49:58.980+0800",
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-18/watchers",
        "watchCount": 1,
        "isWatching": false
      },
      "created": "2017-10-20T19:24:36.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": null,
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T14:49:58.986+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10336",
        "description": "This status is managed internally by JIRA Software",
        "iconUrl": "https://jira.bytedance.com/",
        "name": "Product",
        "id": "10336",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/4",
          "id": 4,
          "key": "indeterminate",
          "colorName": "yellow",
          "name": "In Progress"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": null,
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "for comment 111",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
        "name": "suchenyu",
        "key": "suchenyu",
        "emailAddress": "suchenyu@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
        },
        "displayName": "\u82cf\u9648\u6631",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
        "name": "suchenyu",
        "key": "suchenyu",
        "emailAddress": "suchenyu@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
        },
        "displayName": "\u82cf\u9648\u6631",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0hc4f:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": null,
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 1,
        "total": 1,
        "comments": [
          {
            "self": "https://jira.bytedance.com/rest/api/2/issue/116049/comment/53071",
            "id": "53071",
            "author": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "body": "whoseyourdaddy111",
            "updateAuthor": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "created": "2017-10-20T19:25:04.000+0800",
            "updated": "2017-10-20T19:25:04.000+0800"
          }
        ]
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-18/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "changelog": {
    "id": "371266",
    "items": [
      {
        "field": "resolution",
        "fieldtype": "jira",
        "from": null,
        "fromString": null,
        "to": "10102",
        "toString": "\u6d4b\u8bd5\u5b8c\u6210"
      },
      {
        "field": "status",
        "fieldtype": "jira",
        "from": "10002",
        "fromString": "Done",
        "to": "10336",
        "toString": "Product"
      }
    ]
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 06:49:59] "POST /webhook/jira?user_id=shenweimin&user_key=shenweimin HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512024620853,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
    "name": "shenweimin",
    "key": "shenweimin",
    "emailAddress": "shenweimin@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
    },
    "displayName": "shenweimin",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "127972",
    "self": "https://jira.bytedance.com/rest/api/2/issue/127972",
    "key": "BT-32",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10102",
        "id": "10102",
        "description": "\u9700\u8981\u5b8c\u6210\u7684\u4efb\u52a1\u3002",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11118&avatarType=issuetype",
        "name": "\u4efb\u52a1",
        "subtask": false,
        "avatarId": 11118
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": {
        "self": "https://jira.bytedance.com/rest/api/2/resolution/10001",
        "id": "10001",
        "description": "This issue won't be actioned.",
        "name": "Won't Do"
      },
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": "2017-11-30T14:50:20.851+0800",
      "workratio": -1,
      "lastViewed": "2017-11-30T14:50:20.845+0800",
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-32/watchers",
        "watchCount": 1,
        "isWatching": true
      },
      "created": "2017-11-30T12:21:31.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/5",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/trivial.svg",
        "name": "\u5fae\u5c0f",
        "id": "5"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": null,
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T14:50:20.852+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10317",
        "description": "This status is managed internally by JIRA Software",
        "iconUrl": "https://jira.bytedance.com/",
        "name": "hold",
        "id": "10317",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/4",
          "id": 4,
          "key": "indeterminate",
          "colorName": "yellow",
          "name": "In Progress"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "\u4e0d\u53ef\u5b8c\u6210\u7684\u5c0f\u4efb\u52a1",
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "\u4e0d\u53ef\u5b8c\u6210\u7684\u4efb\u52a1",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
        "name": "shenweimin",
        "key": "shenweimin",
        "emailAddress": "shenweimin@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
        },
        "displayName": "shenweimin",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
        "name": "shenweimin",
        "key": "shenweimin",
        "emailAddress": "shenweimin@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
        },
        "displayName": "shenweimin",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0j8dj:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": null,
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 0,
        "total": 0,
        "comments": []
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-32/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "changelog": {
    "id": "371268",
    "items": [
      {
        "field": "resolution",
        "fieldtype": "jira",
        "from": null,
        "fromString": null,
        "to": "10001",
        "toString": "Won't Do"
      },
      {
        "field": "status",
        "fieldtype": "jira",
        "from": "10102",
        "fromString": "Backlog",
        "to": "10317",
        "toString": "hold"
      }
    ]
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 06:50:20] "POST /webhook/jira?user_id=shenweimin&user_key=shenweimin HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512024657750,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
    "name": "shenweimin",
    "key": "shenweimin",
    "emailAddress": "shenweimin@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
    },
    "displayName": "shenweimin",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "127970",
    "self": "https://jira.bytedance.com/rest/api/2/issue/127970",
    "key": "BT-31",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10104",
        "id": "10104",
        "description": "jira.translation.issuetype.bug.name.desc",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11103&avatarType=issuetype",
        "name": "\u7f3a\u9677",
        "subtask": false,
        "avatarId": 11103
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": null,
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": null,
      "workratio": -1,
      "lastViewed": "2017-11-30T14:50:57.744+0800",
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-31/watchers",
        "watchCount": 1,
        "isWatching": true
      },
      "created": "2017-11-30T12:20:09.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": null,
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T14:50:57.750+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10345",
        "description": "This status is managed internally by JIRA Software",
        "iconUrl": "https://jira.bytedance.com/",
        "name": "Doing",
        "id": "10345",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/4",
          "id": 4,
          "key": "indeterminate",
          "colorName": "yellow",
          "name": "In Progress"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "\u96be\u4ee5\u7f6e\u4fe1\u7684bug",
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "\u96be\u4ee5\u7f6e\u4fe1\u7684bug",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
        "name": "shenweimin",
        "key": "shenweimin",
        "emailAddress": "shenweimin@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
        },
        "displayName": "shenweimin",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
        "name": "shenweimin",
        "key": "shenweimin",
        "emailAddress": "shenweimin@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
        },
        "displayName": "shenweimin",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0j8d3:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": null,
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 0,
        "total": 0,
        "comments": []
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-31/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "changelog": {
    "id": "371269",
    "items": [
      {
        "field": "status",
        "fieldtype": "jira",
        "from": "10102",
        "fromString": "Backlog",
        "to": "10345",
        "toString": "Doing"
      }
    ]
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': 'shenweimin更新了缺陷【难以置信的bug】的状态', 'text': '#### shenweimin更新了缺陷【难以置信的bug】的状态 \n由【Backlog】变为了【Doing】\n[点击查看详情](https://jira.bytedance.com/browse/BT-31)'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 0, 'errmsg': 'ok'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 06:50:57] "POST /webhook/jira?user_id=shenweimin&user_key=shenweimin HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512024669629,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
    "name": "shenweimin",
    "key": "shenweimin",
    "emailAddress": "shenweimin@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
    },
    "displayName": "shenweimin",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "116102",
    "self": "https://jira.bytedance.com/rest/api/2/issue/116102",
    "key": "BT-22",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10104",
        "id": "10104",
        "description": "jira.translation.issuetype.bug.name.desc",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11103&avatarType=issuetype",
        "name": "\u7f3a\u9677",
        "subtask": false,
        "avatarId": 11103
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": null,
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": null,
      "workratio": -1,
      "lastViewed": "2017-11-30T14:51:09.622+0800",
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-22/watchers",
        "watchCount": 1,
        "isWatching": false
      },
      "created": "2017-10-21T14:56:02.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/4",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/minor.svg",
        "name": "\u6b21\u8981",
        "id": "4"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": null,
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T14:51:09.628+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10102",
        "description": "",
        "iconUrl": "https://jira.bytedance.com/images/icons/subtask.gif",
        "name": "Backlog",
        "id": "10102",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "\u6709\u94fe\u63a5\u7684bug\u63cf\u8ff0",
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "\u6709\u94fe\u63a5\u7684bug\u4e3b\u9898",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
        "name": "suchenyu",
        "key": "suchenyu",
        "emailAddress": "suchenyu@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
        },
        "displayName": "\u82cf\u9648\u6631",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
        "name": "suchenyu",
        "key": "suchenyu",
        "emailAddress": "suchenyu@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
        },
        "displayName": "\u82cf\u9648\u6631",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0hcfj:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": null,
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 0,
        "total": 0,
        "comments": []
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-22/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "changelog": {
    "id": "371272",
    "items": [
      {
        "field": "status",
        "fieldtype": "jira",
        "from": "10202",
        "fromString": "Won't Fix",
        "to": "10102",
        "toString": "Backlog"
      }
    ]
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': 'shenweimin更新了缺陷【有链接的bug主题】的状态', 'text': "#### shenweimin更新了缺陷【有链接的bug主题】的状态 \n由【Won't Fix】变为了【Backlog】\n[点击查看详情](https://jira.bytedance.com/browse/BT-22)"}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 0, 'errmsg': 'ok'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 06:51:09] "POST /webhook/jira?user_id=shenweimin&user_key=shenweimin HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512024672925,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
    "name": "shenweimin",
    "key": "shenweimin",
    "emailAddress": "shenweimin@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
    },
    "displayName": "shenweimin",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "116098",
    "self": "https://jira.bytedance.com/rest/api/2/issue/116098",
    "key": "BT-20",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10104",
        "id": "10104",
        "description": "jira.translation.issuetype.bug.name.desc",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11103&avatarType=issuetype",
        "name": "\u7f3a\u9677",
        "subtask": false,
        "avatarId": 11103
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": null,
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": null,
      "workratio": -1,
      "lastViewed": "2017-11-30T14:51:12.918+0800",
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-20/watchers",
        "watchCount": 1,
        "isWatching": false
      },
      "created": "2017-10-21T14:43:47.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": null,
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T14:51:12.925+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10102",
        "description": "",
        "iconUrl": "https://jira.bytedance.com/images/icons/subtask.gif",
        "name": "Backlog",
        "id": "10102",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "\u8fd9\u662f\u63cf\u8ff0\u5566\u5566\u5566",
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "\u8fd9\u662fbug\u4e3b\u9898",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
        "name": "suchenyu",
        "key": "suchenyu",
        "emailAddress": "suchenyu@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
        },
        "displayName": "\u82cf\u9648\u6631",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
        "name": "suchenyu",
        "key": "suchenyu",
        "emailAddress": "suchenyu@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
        },
        "displayName": "\u82cf\u9648\u6631",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0hcev:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": null,
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 0,
        "total": 0,
        "comments": []
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-20/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "changelog": {
    "id": "371273",
    "items": [
      {
        "field": "status",
        "fieldtype": "jira",
        "from": "10202",
        "fromString": "Won't Fix",
        "to": "10102",
        "toString": "Backlog"
      }
    ]
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': 'shenweimin更新了缺陷【这是bug主题】的状态', 'text': "#### shenweimin更新了缺陷【这是bug主题】的状态 \n由【Won't Fix】变为了【Backlog】\n[点击查看详情](https://jira.bytedance.com/browse/BT-20)"}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 0, 'errmsg': 'ok'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 06:51:13] "POST /webhook/jira?user_id=shenweimin&user_key=shenweimin HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512024674233,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
    "name": "shenweimin",
    "key": "shenweimin",
    "emailAddress": "shenweimin@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
    },
    "displayName": "shenweimin",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "116049",
    "self": "https://jira.bytedance.com/rest/api/2/issue/116049",
    "key": "BT-18",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10001",
        "id": "10001",
        "description": "gh.issue.story.desc",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11115&avatarType=issuetype",
        "name": "Story",
        "subtask": false,
        "avatarId": 11115
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": null,
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": null,
      "workratio": -1,
      "lastViewed": "2017-11-30T14:51:14.226+0800",
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-18/watchers",
        "watchCount": 1,
        "isWatching": false
      },
      "created": "2017-10-20T19:24:36.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": null,
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T14:51:14.232+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10102",
        "description": "",
        "iconUrl": "https://jira.bytedance.com/images/icons/subtask.gif",
        "name": "Backlog",
        "id": "10102",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": null,
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "for comment 111",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
        "name": "suchenyu",
        "key": "suchenyu",
        "emailAddress": "suchenyu@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
        },
        "displayName": "\u82cf\u9648\u6631",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
        "name": "suchenyu",
        "key": "suchenyu",
        "emailAddress": "suchenyu@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
        },
        "displayName": "\u82cf\u9648\u6631",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0hc4f:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": null,
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 1,
        "total": 1,
        "comments": [
          {
            "self": "https://jira.bytedance.com/rest/api/2/issue/116049/comment/53071",
            "id": "53071",
            "author": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "body": "whoseyourdaddy111",
            "updateAuthor": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "created": "2017-10-20T19:25:04.000+0800",
            "updated": "2017-10-20T19:25:04.000+0800"
          }
        ]
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-18/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "changelog": {
    "id": "371274",
    "items": [
      {
        "field": "resolution",
        "fieldtype": "jira",
        "from": "10102",
        "fromString": "\u6d4b\u8bd5\u5b8c\u6210",
        "to": null,
        "toString": null
      },
      {
        "field": "status",
        "fieldtype": "jira",
        "from": "10336",
        "fromString": "Product",
        "to": "10102",
        "toString": "Backlog"
      }
    ]
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 06:51:14] "POST /webhook/jira?user_id=shenweimin&user_key=shenweimin HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512024680812,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
    "name": "shenweimin",
    "key": "shenweimin",
    "emailAddress": "shenweimin@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
    },
    "displayName": "shenweimin",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "127970",
    "self": "https://jira.bytedance.com/rest/api/2/issue/127970",
    "key": "BT-31",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10104",
        "id": "10104",
        "description": "jira.translation.issuetype.bug.name.desc",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11103&avatarType=issuetype",
        "name": "\u7f3a\u9677",
        "subtask": false,
        "avatarId": 11103
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": null,
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": null,
      "workratio": -1,
      "lastViewed": "2017-11-30T14:51:20.805+0800",
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-31/watchers",
        "watchCount": 1,
        "isWatching": true
      },
      "created": "2017-11-30T12:20:09.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": null,
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T14:51:20.811+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10102",
        "description": "",
        "iconUrl": "https://jira.bytedance.com/images/icons/subtask.gif",
        "name": "Backlog",
        "id": "10102",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "\u96be\u4ee5\u7f6e\u4fe1\u7684bug",
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "\u96be\u4ee5\u7f6e\u4fe1\u7684bug",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
        "name": "shenweimin",
        "key": "shenweimin",
        "emailAddress": "shenweimin@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
        },
        "displayName": "shenweimin",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
        "name": "shenweimin",
        "key": "shenweimin",
        "emailAddress": "shenweimin@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
        },
        "displayName": "shenweimin",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0j8d3:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": null,
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 0,
        "total": 0,
        "comments": []
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-31/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "changelog": {
    "id": "371276",
    "items": [
      {
        "field": "status",
        "fieldtype": "jira",
        "from": "10345",
        "fromString": "Doing",
        "to": "10102",
        "toString": "Backlog"
      }
    ]
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': 'shenweimin更新了缺陷【难以置信的bug】的状态', 'text': '#### shenweimin更新了缺陷【难以置信的bug】的状态 \n由【Doing】变为了【Backlog】\n[点击查看详情](https://jira.bytedance.com/browse/BT-31)'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 0, 'errmsg': 'ok'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 06:51:20] "POST /webhook/jira?user_id=shenweimin&user_key=shenweimin HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512024701539,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
    "name": "shenweimin",
    "key": "shenweimin",
    "emailAddress": "shenweimin@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
    },
    "displayName": "shenweimin",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "127445",
    "self": "https://jira.bytedance.com/rest/api/2/issue/127445",
    "key": "BT-28",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10001",
        "id": "10001",
        "description": "gh.issue.story.desc",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11115&avatarType=issuetype",
        "name": "Story",
        "subtask": false,
        "avatarId": 11115
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": {
        "self": "https://jira.bytedance.com/rest/api/2/resolution/10001",
        "id": "10001",
        "description": "This issue won't be actioned.",
        "name": "Won't Do"
      },
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": "2017-11-30T14:51:41.538+0800",
      "workratio": -1,
      "lastViewed": "2017-11-30T14:51:41.533+0800",
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-28/watchers",
        "watchCount": 2,
        "isWatching": false
      },
      "created": "2017-11-28T20:16:31.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": null,
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T14:51:41.538+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10317",
        "description": "This status is managed internally by JIRA Software",
        "iconUrl": "https://jira.bytedance.com/",
        "name": "hold",
        "id": "10317",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/4",
          "id": 4,
          "key": "indeterminate",
          "colorName": "yellow",
          "name": "In Progress"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "\u54c7\u54c8\u54c8\u54c8\u54c8\u54c8",
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [
        {
          "self": "https://jira.bytedance.com/rest/api/2/attachment/36760",
          "id": "36760",
          "filename": "WX20171128-202005.png",
          "author": {
            "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
            "name": "beijunlong",
            "key": "beijunlong",
            "emailAddress": "beijunlong@bytedance.com",
            "avatarUrls": {
              "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
              "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
              "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
              "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
            },
            "displayName": "\u8d1d\u4fca\u9f99",
            "active": true,
            "timeZone": "PRC"
          },
          "created": "2017-11-28T20:19:50.000+0800",
          "size": 23324,
          "mimeType": "image/png",
          "content": "https://jira.bytedance.com/secure/attachment/36760/WX20171128-202005.png",
          "thumbnail": "https://jira.bytedance.com/secure/thumbnail/36760/_thumb_36760.png"
        }
      ],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "\u7ed9\u4e3a\u6c11\u6d4b\u8bd5\u7528",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0j59r:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": null,
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 0,
        "total": 0,
        "comments": []
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-28/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "changelog": {
    "id": "371278",
    "items": [
      {
        "field": "resolution",
        "fieldtype": "jira",
        "from": null,
        "fromString": null,
        "to": "10001",
        "toString": "Won't Do"
      },
      {
        "field": "status",
        "fieldtype": "jira",
        "from": "10102",
        "fromString": "Backlog",
        "to": "10317",
        "toString": "hold"
      }
    ]
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 06:51:41] "POST /webhook/jira?user_id=shenweimin&user_key=shenweimin HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512024713875,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
    "name": "shenweimin",
    "key": "shenweimin",
    "emailAddress": "shenweimin@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
    },
    "displayName": "shenweimin",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "127967",
    "self": "https://jira.bytedance.com/rest/api/2/issue/127967",
    "key": "BT-30",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10104",
        "id": "10104",
        "description": "jira.translation.issuetype.bug.name.desc",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11103&avatarType=issuetype",
        "name": "\u7f3a\u9677",
        "subtask": false,
        "avatarId": 11103
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": null,
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": null,
      "workratio": -1,
      "lastViewed": "2017-11-30T14:51:53.868+0800",
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-30/watchers",
        "watchCount": 1,
        "isWatching": true
      },
      "created": "2017-11-30T12:16:19.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": null,
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
        "name": "shenweimin",
        "key": "shenweimin",
        "emailAddress": "shenweimin@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
        },
        "displayName": "shenweimin",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T14:51:53.874+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10345",
        "description": "This status is managed internally by JIRA Software",
        "iconUrl": "https://jira.bytedance.com/",
        "name": "Doing",
        "id": "10345",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/4",
          "id": 4,
          "key": "indeterminate",
          "colorName": "yellow",
          "name": "In Progress"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "\u4e0d\u53ef\u601d\u8bae\u7684bug",
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "Incredible Bug",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
        "name": "shenweimin",
        "key": "shenweimin",
        "emailAddress": "shenweimin@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
        },
        "displayName": "shenweimin",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
        "name": "shenweimin",
        "key": "shenweimin",
        "emailAddress": "shenweimin@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
        },
        "displayName": "shenweimin",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0j8cn:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": null,
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 0,
        "total": 0,
        "comments": []
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-30/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "changelog": {
    "id": "371279",
    "items": [
      {
        "field": "status",
        "fieldtype": "jira",
        "from": "10102",
        "fromString": "Backlog",
        "to": "10345",
        "toString": "Doing"
      }
    ]
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': 'shenweimin更新了缺陷【Incredible Bug】的状态', 'text': '#### shenweimin更新了缺陷【Incredible Bug】的状态 \n由【Backlog】变为了【Doing】\n[点击查看详情](https://jira.bytedance.com/browse/BT-30)'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 0, 'errmsg': 'ok'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 06:51:54] "POST /webhook/jira?user_id=shenweimin&user_key=shenweimin HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512024720335,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
    "name": "shenweimin",
    "key": "shenweimin",
    "emailAddress": "shenweimin@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
    },
    "displayName": "shenweimin",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "116099",
    "self": "https://jira.bytedance.com/rest/api/2/issue/116099",
    "key": "BT-21",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10001",
        "id": "10001",
        "description": "gh.issue.story.desc",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11115&avatarType=issuetype",
        "name": "Story",
        "subtask": false,
        "avatarId": 11115
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": null,
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": null,
      "workratio": -1,
      "lastViewed": "2017-11-30T14:52:00.326+0800",
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-21/watchers",
        "watchCount": 1,
        "isWatching": false
      },
      "created": "2017-10-21T14:45:00.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": null,
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T14:52:00.334+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10102",
        "description": "",
        "iconUrl": "https://jira.bytedance.com/images/icons/subtask.gif",
        "name": "Backlog",
        "id": "10102",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "222",
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "111",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
        "name": "suchenyu",
        "key": "suchenyu",
        "emailAddress": "suchenyu@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
        },
        "displayName": "\u82cf\u9648\u6631",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
        "name": "suchenyu",
        "key": "suchenyu",
        "emailAddress": "suchenyu@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
        },
        "displayName": "\u82cf\u9648\u6631",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0hcf3:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": null,
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 0,
        "total": 0,
        "comments": []
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-21/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "changelog": {
    "id": "371280",
    "items": [
      {
        "field": "status",
        "fieldtype": "jira",
        "from": "10345",
        "fromString": "Doing",
        "to": "10102",
        "toString": "Backlog"
      }
    ]
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': 'shenweimin更新了Story【111】的状态', 'text': '#### shenweimin更新了Story【111】的状态 \n由【Doing】变为了【Backlog】\n[点击查看详情](https://jira.bytedance.com/browse/BT-21)'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 0, 'errmsg': 'ok'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 06:52:00] "POST /webhook/jira?user_id=shenweimin&user_key=shenweimin HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512024732407,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
    "name": "shenweimin",
    "key": "shenweimin",
    "emailAddress": "shenweimin@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
    },
    "displayName": "shenweimin",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "127445",
    "self": "https://jira.bytedance.com/rest/api/2/issue/127445",
    "key": "BT-28",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10001",
        "id": "10001",
        "description": "gh.issue.story.desc",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11115&avatarType=issuetype",
        "name": "Story",
        "subtask": false,
        "avatarId": 11115
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": {
        "self": "https://jira.bytedance.com/rest/api/2/resolution/10001",
        "id": "10001",
        "description": "This issue won't be actioned.",
        "name": "Won't Do"
      },
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": "2017-11-30T14:51:41.000+0800",
      "workratio": -1,
      "lastViewed": "2017-11-30T14:51:41.533+0800",
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-28/watchers",
        "watchCount": 2,
        "isWatching": false
      },
      "created": "2017-11-28T20:16:31.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": null,
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T14:52:12.000+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10317",
        "description": "This status is managed internally by JIRA Software",
        "iconUrl": "https://jira.bytedance.com/",
        "name": "hold",
        "id": "10317",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/4",
          "id": 4,
          "key": "indeterminate",
          "colorName": "yellow",
          "name": "In Progress"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "\u54c7\u54c8\u54c8\u54c8\u54c8\u54c8",
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [
        {
          "self": "https://jira.bytedance.com/rest/api/2/attachment/36760",
          "id": "36760",
          "filename": "WX20171128-202005.png",
          "author": {
            "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
            "name": "beijunlong",
            "key": "beijunlong",
            "emailAddress": "beijunlong@bytedance.com",
            "avatarUrls": {
              "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
              "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
              "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
              "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
            },
            "displayName": "\u8d1d\u4fca\u9f99",
            "active": true,
            "timeZone": "PRC"
          },
          "created": "2017-11-28T20:19:50.000+0800",
          "size": 23324,
          "mimeType": "image/png",
          "content": "https://jira.bytedance.com/secure/attachment/36760/WX20171128-202005.png",
          "thumbnail": "https://jira.bytedance.com/secure/thumbnail/36760/_thumb_36760.png"
        }
      ],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "\u7ed9\u4e3a\u6c11\u6d4b\u8bd5\u7528",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0j8cr:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": null,
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 0,
        "total": 0,
        "comments": []
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-28/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "changelog": {
    "id": "371282",
    "items": [
      {
        "field": "Rank",
        "fieldtype": "custom",
        "from": "",
        "fromString": "",
        "to": "",
        "toString": "Ranked lower"
      }
    ]
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 06:52:12] "POST /webhook/jira?user_id=shenweimin&user_key=shenweimin HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512024735155,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
    "name": "shenweimin",
    "key": "shenweimin",
    "emailAddress": "shenweimin@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
    },
    "displayName": "shenweimin",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "127445",
    "self": "https://jira.bytedance.com/rest/api/2/issue/127445",
    "key": "BT-28",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10001",
        "id": "10001",
        "description": "gh.issue.story.desc",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11115&avatarType=issuetype",
        "name": "Story",
        "subtask": false,
        "avatarId": 11115
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": {
        "self": "https://jira.bytedance.com/rest/api/2/resolution/10001",
        "id": "10001",
        "description": "This issue won't be actioned.",
        "name": "Won't Do"
      },
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": "2017-11-30T14:51:41.000+0800",
      "workratio": -1,
      "lastViewed": "2017-11-30T14:51:41.533+0800",
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-28/watchers",
        "watchCount": 2,
        "isWatching": false
      },
      "created": "2017-11-28T20:16:31.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": null,
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T14:52:15.000+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10317",
        "description": "This status is managed internally by JIRA Software",
        "iconUrl": "https://jira.bytedance.com/",
        "name": "hold",
        "id": "10317",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/4",
          "id": 4,
          "key": "indeterminate",
          "colorName": "yellow",
          "name": "In Progress"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "\u54c7\u54c8\u54c8\u54c8\u54c8\u54c8",
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [
        {
          "self": "https://jira.bytedance.com/rest/api/2/attachment/36760",
          "id": "36760",
          "filename": "WX20171128-202005.png",
          "author": {
            "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
            "name": "beijunlong",
            "key": "beijunlong",
            "emailAddress": "beijunlong@bytedance.com",
            "avatarUrls": {
              "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
              "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
              "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
              "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
            },
            "displayName": "\u8d1d\u4fca\u9f99",
            "active": true,
            "timeZone": "PRC"
          },
          "created": "2017-11-28T20:19:50.000+0800",
          "size": 23324,
          "mimeType": "image/png",
          "content": "https://jira.bytedance.com/secure/attachment/36760/WX20171128-202005.png",
          "thumbnail": "https://jira.bytedance.com/secure/thumbnail/36760/_thumb_36760.png"
        }
      ],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "\u7ed9\u4e3a\u6c11\u6d4b\u8bd5\u7528",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0j8dn:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": null,
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 0,
        "total": 0,
        "comments": []
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-28/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "changelog": {
    "id": "371283",
    "items": [
      {
        "field": "Rank",
        "fieldtype": "custom",
        "from": "",
        "fromString": "",
        "to": "",
        "toString": "Ranked lower"
      }
    ]
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 06:52:15] "POST /webhook/jira?user_id=shenweimin&user_key=shenweimin HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512024742279,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
    "name": "shenweimin",
    "key": "shenweimin",
    "emailAddress": "shenweimin@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
    },
    "displayName": "shenweimin",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "127972",
    "self": "https://jira.bytedance.com/rest/api/2/issue/127972",
    "key": "BT-32",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10102",
        "id": "10102",
        "description": "\u9700\u8981\u5b8c\u6210\u7684\u4efb\u52a1\u3002",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11118&avatarType=issuetype",
        "name": "\u4efb\u52a1",
        "subtask": false,
        "avatarId": 11118
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": null,
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": null,
      "workratio": -1,
      "lastViewed": "2017-11-30T14:52:22.271+0800",
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-32/watchers",
        "watchCount": 1,
        "isWatching": true
      },
      "created": "2017-11-30T12:21:31.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/5",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/trivial.svg",
        "name": "\u5fae\u5c0f",
        "id": "5"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": null,
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T14:52:22.277+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10102",
        "description": "",
        "iconUrl": "https://jira.bytedance.com/images/icons/subtask.gif",
        "name": "Backlog",
        "id": "10102",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "\u4e0d\u53ef\u5b8c\u6210\u7684\u5c0f\u4efb\u52a1",
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "\u4e0d\u53ef\u5b8c\u6210\u7684\u4efb\u52a1",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
        "name": "shenweimin",
        "key": "shenweimin",
        "emailAddress": "shenweimin@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
        },
        "displayName": "shenweimin",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
        "name": "shenweimin",
        "key": "shenweimin",
        "emailAddress": "shenweimin@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
        },
        "displayName": "shenweimin",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0j8dj:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": null,
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 0,
        "total": 0,
        "comments": []
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-32/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "changelog": {
    "id": "371285",
    "items": [
      {
        "field": "resolution",
        "fieldtype": "jira",
        "from": "10001",
        "fromString": "Won't Do",
        "to": null,
        "toString": null
      },
      {
        "field": "status",
        "fieldtype": "jira",
        "from": "10317",
        "fromString": "hold",
        "to": "10102",
        "toString": "Backlog"
      }
    ]
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 06:52:22] "POST /webhook/jira?user_id=shenweimin&user_key=shenweimin HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512024753962,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
    "name": "shenweimin",
    "key": "shenweimin",
    "emailAddress": "shenweimin@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
    },
    "displayName": "shenweimin",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "127445",
    "self": "https://jira.bytedance.com/rest/api/2/issue/127445",
    "key": "BT-28",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10001",
        "id": "10001",
        "description": "gh.issue.story.desc",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11115&avatarType=issuetype",
        "name": "Story",
        "subtask": false,
        "avatarId": 11115
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": null,
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": null,
      "workratio": -1,
      "lastViewed": "2017-11-30T14:52:33.954+0800",
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-28/watchers",
        "watchCount": 2,
        "isWatching": false
      },
      "created": "2017-11-28T20:16:31.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": null,
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T14:52:33.961+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10102",
        "description": "",
        "iconUrl": "https://jira.bytedance.com/images/icons/subtask.gif",
        "name": "Backlog",
        "id": "10102",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "\u54c7\u54c8\u54c8\u54c8\u54c8\u54c8",
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [
        {
          "self": "https://jira.bytedance.com/rest/api/2/attachment/36760",
          "id": "36760",
          "filename": "WX20171128-202005.png",
          "author": {
            "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
            "name": "beijunlong",
            "key": "beijunlong",
            "emailAddress": "beijunlong@bytedance.com",
            "avatarUrls": {
              "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
              "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
              "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
              "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
            },
            "displayName": "\u8d1d\u4fca\u9f99",
            "active": true,
            "timeZone": "PRC"
          },
          "created": "2017-11-28T20:19:50.000+0800",
          "size": 23324,
          "mimeType": "image/png",
          "content": "https://jira.bytedance.com/secure/attachment/36760/WX20171128-202005.png",
          "thumbnail": "https://jira.bytedance.com/secure/thumbnail/36760/_thumb_36760.png"
        }
      ],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "\u7ed9\u4e3a\u6c11\u6d4b\u8bd5\u7528",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0j8dn:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": null,
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 0,
        "total": 0,
        "comments": []
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-28/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "changelog": {
    "id": "371286",
    "items": [
      {
        "field": "resolution",
        "fieldtype": "jira",
        "from": "10001",
        "fromString": "Won't Do",
        "to": null,
        "toString": null
      },
      {
        "field": "status",
        "fieldtype": "jira",
        "from": "10317",
        "fromString": "hold",
        "to": "10102",
        "toString": "Backlog"
      }
    ]
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 06:52:34] "POST /webhook/jira?user_id=shenweimin&user_key=shenweimin HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512024767722,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
    "name": "shenweimin",
    "key": "shenweimin",
    "emailAddress": "shenweimin@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
    },
    "displayName": "shenweimin",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "127445",
    "self": "https://jira.bytedance.com/rest/api/2/issue/127445",
    "key": "BT-28",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10001",
        "id": "10001",
        "description": "gh.issue.story.desc",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11115&avatarType=issuetype",
        "name": "Story",
        "subtask": false,
        "avatarId": 11115
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": {
        "self": "https://jira.bytedance.com/rest/api/2/resolution/10001",
        "id": "10001",
        "description": "This issue won't be actioned.",
        "name": "Won't Do"
      },
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": "2017-11-30T14:52:47.720+0800",
      "workratio": -1,
      "lastViewed": "2017-11-30T14:52:47.714+0800",
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-28/watchers",
        "watchCount": 2,
        "isWatching": false
      },
      "created": "2017-11-28T20:16:31.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": null,
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T14:52:47.721+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10317",
        "description": "This status is managed internally by JIRA Software",
        "iconUrl": "https://jira.bytedance.com/",
        "name": "hold",
        "id": "10317",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/4",
          "id": 4,
          "key": "indeterminate",
          "colorName": "yellow",
          "name": "In Progress"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "\u54c7\u54c8\u54c8\u54c8\u54c8\u54c8",
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [
        {
          "self": "https://jira.bytedance.com/rest/api/2/attachment/36760",
          "id": "36760",
          "filename": "WX20171128-202005.png",
          "author": {
            "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
            "name": "beijunlong",
            "key": "beijunlong",
            "emailAddress": "beijunlong@bytedance.com",
            "avatarUrls": {
              "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
              "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
              "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
              "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
            },
            "displayName": "\u8d1d\u4fca\u9f99",
            "active": true,
            "timeZone": "PRC"
          },
          "created": "2017-11-28T20:19:50.000+0800",
          "size": 23324,
          "mimeType": "image/png",
          "content": "https://jira.bytedance.com/secure/attachment/36760/WX20171128-202005.png",
          "thumbnail": "https://jira.bytedance.com/secure/thumbnail/36760/_thumb_36760.png"
        }
      ],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "\u7ed9\u4e3a\u6c11\u6d4b\u8bd5\u7528",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0j8dn:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": null,
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 0,
        "total": 0,
        "comments": []
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-28/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "changelog": {
    "id": "371287",
    "items": [
      {
        "field": "resolution",
        "fieldtype": "jira",
        "from": null,
        "fromString": null,
        "to": "10001",
        "toString": "Won't Do"
      },
      {
        "field": "status",
        "fieldtype": "jira",
        "from": "10102",
        "fromString": "Backlog",
        "to": "10317",
        "toString": "hold"
      }
    ]
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 06:52:47] "POST /webhook/jira?user_id=shenweimin&user_key=shenweimin HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512024784779,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
    "name": "shenweimin",
    "key": "shenweimin",
    "emailAddress": "shenweimin@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
    },
    "displayName": "shenweimin",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "116099",
    "self": "https://jira.bytedance.com/rest/api/2/issue/116099",
    "key": "BT-21",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10001",
        "id": "10001",
        "description": "gh.issue.story.desc",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11115&avatarType=issuetype",
        "name": "Story",
        "subtask": false,
        "avatarId": 11115
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": null,
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": null,
      "workratio": -1,
      "lastViewed": "2017-11-30T14:53:04.773+0800",
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-21/watchers",
        "watchCount": 1,
        "isWatching": false
      },
      "created": "2017-10-21T14:45:00.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": null,
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T14:53:04.778+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10345",
        "description": "This status is managed internally by JIRA Software",
        "iconUrl": "https://jira.bytedance.com/",
        "name": "Doing",
        "id": "10345",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/4",
          "id": 4,
          "key": "indeterminate",
          "colorName": "yellow",
          "name": "In Progress"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "222",
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "111",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
        "name": "suchenyu",
        "key": "suchenyu",
        "emailAddress": "suchenyu@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
        },
        "displayName": "\u82cf\u9648\u6631",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
        "name": "suchenyu",
        "key": "suchenyu",
        "emailAddress": "suchenyu@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
        },
        "displayName": "\u82cf\u9648\u6631",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0hcf3:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": null,
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 0,
        "total": 0,
        "comments": []
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-21/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "changelog": {
    "id": "371288",
    "items": [
      {
        "field": "status",
        "fieldtype": "jira",
        "from": "10102",
        "fromString": "Backlog",
        "to": "10345",
        "toString": "Doing"
      }
    ]
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': 'shenweimin更新了Story【111】的状态', 'text': '#### shenweimin更新了Story【111】的状态 \n由【Backlog】变为了【Doing】\n[点击查看详情](https://jira.bytedance.com/browse/BT-21)'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 0, 'errmsg': 'ok'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 06:53:04] "POST /webhook/jira?user_id=shenweimin&user_key=shenweimin HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512024790023,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
    "name": "shenweimin",
    "key": "shenweimin",
    "emailAddress": "shenweimin@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
    },
    "displayName": "shenweimin",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "127445",
    "self": "https://jira.bytedance.com/rest/api/2/issue/127445",
    "key": "BT-28",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10001",
        "id": "10001",
        "description": "gh.issue.story.desc",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11115&avatarType=issuetype",
        "name": "Story",
        "subtask": false,
        "avatarId": 11115
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": null,
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": null,
      "workratio": -1,
      "lastViewed": "2017-11-30T14:53:10.017+0800",
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-28/watchers",
        "watchCount": 2,
        "isWatching": false
      },
      "created": "2017-11-28T20:16:31.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": null,
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T14:53:10.022+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10102",
        "description": "",
        "iconUrl": "https://jira.bytedance.com/images/icons/subtask.gif",
        "name": "Backlog",
        "id": "10102",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "\u54c7\u54c8\u54c8\u54c8\u54c8\u54c8",
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [
        {
          "self": "https://jira.bytedance.com/rest/api/2/attachment/36760",
          "id": "36760",
          "filename": "WX20171128-202005.png",
          "author": {
            "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
            "name": "beijunlong",
            "key": "beijunlong",
            "emailAddress": "beijunlong@bytedance.com",
            "avatarUrls": {
              "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
              "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
              "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
              "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
            },
            "displayName": "\u8d1d\u4fca\u9f99",
            "active": true,
            "timeZone": "PRC"
          },
          "created": "2017-11-28T20:19:50.000+0800",
          "size": 23324,
          "mimeType": "image/png",
          "content": "https://jira.bytedance.com/secure/attachment/36760/WX20171128-202005.png",
          "thumbnail": "https://jira.bytedance.com/secure/thumbnail/36760/_thumb_36760.png"
        }
      ],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "\u7ed9\u4e3a\u6c11\u6d4b\u8bd5\u7528",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0j8dn:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": null,
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 0,
        "total": 0,
        "comments": []
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-28/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "changelog": {
    "id": "371289",
    "items": [
      {
        "field": "resolution",
        "fieldtype": "jira",
        "from": "10001",
        "fromString": "Won't Do",
        "to": null,
        "toString": null
      },
      {
        "field": "status",
        "fieldtype": "jira",
        "from": "10317",
        "fromString": "hold",
        "to": "10102",
        "toString": "Backlog"
      }
    ]
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 06:53:10] "POST /webhook/jira?user_id=shenweimin&user_key=shenweimin HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512024794781,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
    "name": "shenweimin",
    "key": "shenweimin",
    "emailAddress": "shenweimin@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
    },
    "displayName": "shenweimin",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "127445",
    "self": "https://jira.bytedance.com/rest/api/2/issue/127445",
    "key": "BT-28",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10001",
        "id": "10001",
        "description": "gh.issue.story.desc",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11115&avatarType=issuetype",
        "name": "Story",
        "subtask": false,
        "avatarId": 11115
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": null,
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": null,
      "workratio": -1,
      "lastViewed": "2017-11-30T14:53:14.773+0800",
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-28/watchers",
        "watchCount": 2,
        "isWatching": false
      },
      "created": "2017-11-28T20:16:31.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": null,
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T14:53:14.779+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10345",
        "description": "This status is managed internally by JIRA Software",
        "iconUrl": "https://jira.bytedance.com/",
        "name": "Doing",
        "id": "10345",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/4",
          "id": 4,
          "key": "indeterminate",
          "colorName": "yellow",
          "name": "In Progress"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "\u54c7\u54c8\u54c8\u54c8\u54c8\u54c8",
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [
        {
          "self": "https://jira.bytedance.com/rest/api/2/attachment/36760",
          "id": "36760",
          "filename": "WX20171128-202005.png",
          "author": {
            "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
            "name": "beijunlong",
            "key": "beijunlong",
            "emailAddress": "beijunlong@bytedance.com",
            "avatarUrls": {
              "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
              "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
              "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
              "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
            },
            "displayName": "\u8d1d\u4fca\u9f99",
            "active": true,
            "timeZone": "PRC"
          },
          "created": "2017-11-28T20:19:50.000+0800",
          "size": 23324,
          "mimeType": "image/png",
          "content": "https://jira.bytedance.com/secure/attachment/36760/WX20171128-202005.png",
          "thumbnail": "https://jira.bytedance.com/secure/thumbnail/36760/_thumb_36760.png"
        }
      ],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "\u7ed9\u4e3a\u6c11\u6d4b\u8bd5\u7528",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0j8dn:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": null,
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 0,
        "total": 0,
        "comments": []
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-28/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "changelog": {
    "id": "371290",
    "items": [
      {
        "field": "status",
        "fieldtype": "jira",
        "from": "10102",
        "fromString": "Backlog",
        "to": "10345",
        "toString": "Doing"
      }
    ]
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': 'shenweimin更新了Story【给为民测试用】的状态', 'text': '#### shenweimin更新了Story【给为民测试用】的状态 \n由【Backlog】变为了【Doing】\n[点击查看详情](https://jira.bytedance.com/browse/BT-28)'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 0, 'errmsg': 'ok'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 06:53:14] "POST /webhook/jira?user_id=shenweimin&user_key=shenweimin HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512024813672,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
    "name": "shenweimin",
    "key": "shenweimin",
    "emailAddress": "shenweimin@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
    },
    "displayName": "shenweimin",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "113694",
    "self": "https://jira.bytedance.com/rest/api/2/issue/113694",
    "key": "BT-6",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10104",
        "id": "10104",
        "description": "jira.translation.issuetype.bug.name.desc",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11103&avatarType=issuetype",
        "name": "\u7f3a\u9677",
        "subtask": false,
        "avatarId": 11103
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": null,
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": null,
      "workratio": -1,
      "lastViewed": "2017-11-30T14:53:33.665+0800",
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-6/watchers",
        "watchCount": 2,
        "isWatching": false
      },
      "created": "2017-10-11T18:37:22.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": null,
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=zhengzekai",
        "name": "zhengzekai",
        "key": "zhengzekai",
        "emailAddress": "zhengzekai@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11152",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11152",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11152",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11152"
        },
        "displayName": "\u90d1\u6cfd\u6977",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T14:53:33.671+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10102",
        "description": "",
        "iconUrl": "https://jira.bytedance.com/images/icons/subtask.gif",
        "name": "Backlog",
        "id": "10102",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/2",
          "id": 2,
          "key": "new",
          "colorName": "blue-gray",
          "name": "To Do"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "342314\u7684\u8303\u5fb7\u8428\u8303\u5fb7\u8428\u53d1",
      "timetracking": {},
      "customfield_10005": [
        "com.atlassian.greenhopper.service.sprint.Sprint@4e722757[id=543,rapidViewId=334,state=ACTIVE,name=0.5,startDate=2017-10-13T15:13:47.215+08:00,endDate=2017-12-28T03:13:00.000+08:00,completeDate=<null>,sequence=543]"
      ],
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "\u642d\u642d\u6492\u6492\u5927\u6240",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0gxkz:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": null,
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 2,
        "total": 2,
        "comments": [
          {
            "self": "https://jira.bytedance.com/rest/api/2/issue/113694/comment/53073",
            "id": "53073",
            "author": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "body": "whoseyourdaddy",
            "updateAuthor": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "created": "2017-10-20T19:42:25.000+0800",
            "updated": "2017-10-20T19:42:25.000+0800"
          },
          {
            "self": "https://jira.bytedance.com/rest/api/2/issue/113694/comment/53074",
            "id": "53074",
            "author": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "body": "111",
            "updateAuthor": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "created": "2017-10-20T19:42:39.000+0800",
            "updated": "2017-10-20T19:42:39.000+0800"
          }
        ]
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-6/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "changelog": {
    "id": "371291",
    "items": [
      {
        "field": "resolution",
        "fieldtype": "jira",
        "from": "10003",
        "fromString": "Fix In Future",
        "to": null,
        "toString": null
      },
      {
        "field": "status",
        "fieldtype": "jira",
        "from": "10002",
        "fromString": "Done",
        "to": "10102",
        "toString": "Backlog"
      }
    ]
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 06:53:33] "POST /webhook/jira?user_id=shenweimin&user_key=shenweimin HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512024826466,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
    "name": "shenweimin",
    "key": "shenweimin",
    "emailAddress": "shenweimin@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
    },
    "displayName": "shenweimin",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "113694",
    "self": "https://jira.bytedance.com/rest/api/2/issue/113694",
    "key": "BT-6",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10104",
        "id": "10104",
        "description": "jira.translation.issuetype.bug.name.desc",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11103&avatarType=issuetype",
        "name": "\u7f3a\u9677",
        "subtask": false,
        "avatarId": 11103
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": null,
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": null,
      "workratio": -1,
      "lastViewed": "2017-11-30T14:53:46.460+0800",
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-6/watchers",
        "watchCount": 2,
        "isWatching": false
      },
      "created": "2017-10-11T18:37:22.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": null,
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=zhengzekai",
        "name": "zhengzekai",
        "key": "zhengzekai",
        "emailAddress": "zhengzekai@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11152",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11152",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11152",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11152"
        },
        "displayName": "\u90d1\u6cfd\u6977",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T14:53:46.465+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10345",
        "description": "This status is managed internally by JIRA Software",
        "iconUrl": "https://jira.bytedance.com/",
        "name": "Doing",
        "id": "10345",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/4",
          "id": 4,
          "key": "indeterminate",
          "colorName": "yellow",
          "name": "In Progress"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "342314\u7684\u8303\u5fb7\u8428\u8303\u5fb7\u8428\u53d1",
      "timetracking": {},
      "customfield_10005": [
        "com.atlassian.greenhopper.service.sprint.Sprint@4e722757[id=543,rapidViewId=334,state=ACTIVE,name=0.5,startDate=2017-10-13T15:13:47.215+08:00,endDate=2017-12-28T03:13:00.000+08:00,completeDate=<null>,sequence=543]"
      ],
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "\u642d\u642d\u6492\u6492\u5927\u6240",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0gxkz:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": null,
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 2,
        "total": 2,
        "comments": [
          {
            "self": "https://jira.bytedance.com/rest/api/2/issue/113694/comment/53073",
            "id": "53073",
            "author": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "body": "whoseyourdaddy",
            "updateAuthor": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "created": "2017-10-20T19:42:25.000+0800",
            "updated": "2017-10-20T19:42:25.000+0800"
          },
          {
            "self": "https://jira.bytedance.com/rest/api/2/issue/113694/comment/53074",
            "id": "53074",
            "author": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "body": "111",
            "updateAuthor": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
              "name": "suchenyu",
              "key": "suchenyu",
              "emailAddress": "suchenyu@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
              },
              "displayName": "\u82cf\u9648\u6631",
              "active": true,
              "timeZone": "PRC"
            },
            "created": "2017-10-20T19:42:39.000+0800",
            "updated": "2017-10-20T19:42:39.000+0800"
          }
        ]
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-6/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "changelog": {
    "id": "371292",
    "items": [
      {
        "field": "status",
        "fieldtype": "jira",
        "from": "10102",
        "fromString": "Backlog",
        "to": "10345",
        "toString": "Doing"
      }
    ]
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': 'shenweimin更新了缺陷【搭搭撒撒大所】的状态', 'text': '#### shenweimin更新了缺陷【搭搭撒撒大所】的状态 \n由【Backlog】变为了【Doing】\n[点击查看详情](https://jira.bytedance.com/browse/BT-6)'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 0, 'errmsg': 'ok'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 06:53:46] "POST /webhook/jira?user_id=shenweimin&user_key=shenweimin HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512024865397,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
    "name": "shenweimin",
    "key": "shenweimin",
    "emailAddress": "shenweimin@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
    },
    "displayName": "shenweimin",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "127972",
    "self": "https://jira.bytedance.com/rest/api/2/issue/127972",
    "key": "BT-32",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10102",
        "id": "10102",
        "description": "\u9700\u8981\u5b8c\u6210\u7684\u4efb\u52a1\u3002",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11118&avatarType=issuetype",
        "name": "\u4efb\u52a1",
        "subtask": false,
        "avatarId": 11118
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": {
        "self": "https://jira.bytedance.com/rest/api/2/resolution/10001",
        "id": "10001",
        "description": "This issue won't be actioned.",
        "name": "Won't Do"
      },
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": "2017-11-30T14:54:25.395+0800",
      "workratio": -1,
      "lastViewed": "2017-11-30T14:54:25.389+0800",
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-32/watchers",
        "watchCount": 1,
        "isWatching": true
      },
      "created": "2017-11-30T12:21:31.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/5",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/trivial.svg",
        "name": "\u5fae\u5c0f",
        "id": "5"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": null,
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T14:54:25.396+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10317",
        "description": "This status is managed internally by JIRA Software",
        "iconUrl": "https://jira.bytedance.com/",
        "name": "hold",
        "id": "10317",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/4",
          "id": 4,
          "key": "indeterminate",
          "colorName": "yellow",
          "name": "In Progress"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "\u4e0d\u53ef\u5b8c\u6210\u7684\u5c0f\u4efb\u52a1",
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "\u4e0d\u53ef\u5b8c\u6210\u7684\u4efb\u52a1",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
        "name": "shenweimin",
        "key": "shenweimin",
        "emailAddress": "shenweimin@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
        },
        "displayName": "shenweimin",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
        "name": "shenweimin",
        "key": "shenweimin",
        "emailAddress": "shenweimin@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
        },
        "displayName": "shenweimin",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0j8dj:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": null,
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 0,
        "total": 0,
        "comments": []
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-32/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "changelog": {
    "id": "371293",
    "items": [
      {
        "field": "resolution",
        "fieldtype": "jira",
        "from": null,
        "fromString": null,
        "to": "10001",
        "toString": "Won't Do"
      },
      {
        "field": "status",
        "fieldtype": "jira",
        "from": "10102",
        "fromString": "Backlog",
        "to": "10317",
        "toString": "hold"
      }
    ]
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 06:54:25] "POST /webhook/jira?user_id=shenweimin&user_key=shenweimin HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512024887188,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
    "name": "shenweimin",
    "key": "shenweimin",
    "emailAddress": "shenweimin@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
    },
    "displayName": "shenweimin",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "127970",
    "self": "https://jira.bytedance.com/rest/api/2/issue/127970",
    "key": "BT-31",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10104",
        "id": "10104",
        "description": "jira.translation.issuetype.bug.name.desc",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11103&avatarType=issuetype",
        "name": "\u7f3a\u9677",
        "subtask": false,
        "avatarId": 11103
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": null,
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": null,
      "workratio": -1,
      "lastViewed": "2017-11-30T14:54:47.181+0800",
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-31/watchers",
        "watchCount": 1,
        "isWatching": true
      },
      "created": "2017-11-30T12:20:09.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": null,
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T14:54:47.187+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10345",
        "description": "This status is managed internally by JIRA Software",
        "iconUrl": "https://jira.bytedance.com/",
        "name": "Doing",
        "id": "10345",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/4",
          "id": 4,
          "key": "indeterminate",
          "colorName": "yellow",
          "name": "In Progress"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "\u96be\u4ee5\u7f6e\u4fe1\u7684bug",
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "\u96be\u4ee5\u7f6e\u4fe1\u7684bug",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
        "name": "shenweimin",
        "key": "shenweimin",
        "emailAddress": "shenweimin@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
        },
        "displayName": "shenweimin",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
        "name": "shenweimin",
        "key": "shenweimin",
        "emailAddress": "shenweimin@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
        },
        "displayName": "shenweimin",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0j8d3:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": null,
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 0,
        "total": 0,
        "comments": []
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-31/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "changelog": {
    "id": "371294",
    "items": [
      {
        "field": "status",
        "fieldtype": "jira",
        "from": "10102",
        "fromString": "Backlog",
        "to": "10345",
        "toString": "Doing"
      }
    ]
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': 'shenweimin更新了缺陷【难以置信的bug】的状态', 'text': '#### shenweimin更新了缺陷【难以置信的bug】的状态 \n由【Backlog】变为了【Doing】\n[点击查看详情](https://jira.bytedance.com/browse/BT-31)'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 0, 'errmsg': 'ok'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 06:54:47] "POST /webhook/jira?user_id=shenweimin&user_key=shenweimin HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512025027413,
  "webhookEvent": "comment_updated",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/125762/comment/58205",
    "id": "58205",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=pengzipei",
      "name": "pengzipei",
      "key": "pengzipei",
      "emailAddress": "pengzipei@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5f6d\u5b50\u6c9b",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010\u63d0\u6d4b\u529f\u80fd\u3011\u90ed\u6c5f\u6d9b done\r\n\u89c6\u9891Feed-\u63a8\u8350\u7406\u7531&&\u540c\u57cePOI\r\n\u3010\u5206\u652f\u3011\r\nlive_2.9_feed_card_recommend\r\n\u3010\u7ec6\u8282\u63cf\u8ff0&\u98ce\u9669\u63d0\u793a\u3011\r\n\u63a8\u8350\u7406\u7531\uff1a\r\n\u89c6\u9891Feed\u4e0bMedia\u5b57\u6bb5\u4e2dRecommendReason\u5b57\u6bb5\uff0ctype\u4e3a1\u65f6\u4e3a\u540c\u57ce\u5185\u5bb9\uff0c\u6b64\u65f6\u5728feed\u5361\u7247\u5de6\u4e0a\u89d2\u5c55\u793a\u540c\u57ce\u7684icon\u53cacity\u5b57\u6bb5\uff1b\u4e3a2\u65f6\u5728feed\u5361\u7247\u5de6\u4e0a\u89d2\u5c55\u793a\u597d\u53cbicon\u53ca \u597d\u53cbAB\uff0cA\u4e3a friend_name\u5b57\u6bb5\uff08\u53ef\u80fd\u4e3a\u7a7a\uff09\uff0cB\u4e3areason\u5b57\u6bb5\r\n\r\n\u540c\u57cePOI\r\n\u540c\u57cefeed\u4e0bmedia\u5b57\u6bb5\u4e2dposition\u5b57\u6bb5\u5b58\u5728\u65f6\u5c55\u793a\u548c\u63a8\u8350\u7406\u7531\u7c7b\u4f3c\u7684UI\r\n\r\n\u5f53\u5b57\u6570\u8fbe\u5230\u4e00\u5b9a\u9650\u5236\u5c06\u8d85\u51fa\u5c4f\u5e55\u65f6\uff08\u5ba2\u6237\u7aefUI\u5224\u65ad\uff09\uff0c\u622a\u65ad\u5b57\u7b26\u4e32\u7528...\u4ee3\u66ff\u5c55\u793a\u3002\u5982\u679c\u662f\u63a8\u8350\u7406\u7531\uff0c\u53ea\u622a\u65adfriend_name\u5b57\u6bb5",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=guojiangtao",
      "name": "guojiangtao",
      "key": "guojiangtao",
      "emailAddress": "guojiangtao@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11141",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11141",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11141",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11141"
      },
      "displayName": "guojiangtao",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-28T21:47:42.000+0800",
    "updated": "2017-11-30T14:57:07.413+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 06:57:07] "POST /webhook/jira?user_id=guojiangtao&user_key=guojiangtao HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512025028986,
  "webhookEvent": "worklog_created",
  "worklog": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/119246/worklog/13838",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=lvshuangquan",
      "name": "lvshuangquan",
      "key": "lvshuangquan",
      "emailAddress": "lvshuangquan@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11146",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11146",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11146",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11146"
      },
      "displayName": "\u5415\u53cc\u5168",
      "active": true,
      "timeZone": "PRC"
    },
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=lvshuangquan",
      "name": "lvshuangquan",
      "key": "lvshuangquan",
      "emailAddress": "lvshuangquan@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11146",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11146",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11146",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11146"
      },
      "displayName": "\u5415\u53cc\u5168",
      "active": true,
      "timeZone": "PRC"
    },
    "comment": "\u56e0ADX\u4e0eBPM\u540e\u53f0\u6709\u591a\u5904\u4e0d\u540c\uff0cPM\u53caRD\u5728\u6700\u521d\u672a\u9884\u6599\u5230\u8fd9\u4e9b\uff0c\u5728\u5f00\u53d1\u4e2d\u9047\u5230\u540e\u591a\u6b21\u8ba8\u8bba\u53ca\u8fd4\u5de5\u3002\u672c\u5468\u5b8c\u6210\u6700\u7ec8\u65b9\u6848\u786e\u5b9a\u53caQA checklist\u786e\u5b9a\u3002BPM\u76f8\u5173\u4ee3\u7801\u5df2\u4e0a\u7ebf\uff0cADX \u5728QA\u6d4b\u8bd5\u4e2d\u3002",
    "created": "2017-11-30T14:57:08.986+0800",
    "updated": "2017-11-30T14:57:08.986+0800",
    "started": "2017-11-26T02:55:00.000+0800",
    "timeSpent": "2d",
    "timeSpentSeconds": 57600,
    "id": "13838",
    "issueId": "119246"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 06:57:09] "POST /webhook/jira?user_id=lvshuangquan&user_key=lvshuangquan HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512025054000,
  "webhookEvent": "worklog_updated",
  "worklog": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/119246/worklog/13838",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=lvshuangquan",
      "name": "lvshuangquan",
      "key": "lvshuangquan",
      "emailAddress": "lvshuangquan@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11146",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11146",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11146",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11146"
      },
      "displayName": "\u5415\u53cc\u5168",
      "active": true,
      "timeZone": "PRC"
    },
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=lvshuangquan",
      "name": "lvshuangquan",
      "key": "lvshuangquan",
      "emailAddress": "lvshuangquan@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11146",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11146",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11146",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11146"
      },
      "displayName": "\u5415\u53cc\u5168",
      "active": true,
      "timeZone": "PRC"
    },
    "comment": "\u56e0ADX\u4e0eBPM\u540e\u53f0\u6709\u591a\u5904\u4e0d\u540c\uff0cPM\u53caRD\u5728\u6700\u521d\u672a\u9884\u6599\u5230\u8fd9\u4e9b\uff0c\u5728\u5f00\u53d1\u4e2d\u9047\u5230\u540e\u591a\u6b21\u8ba8\u8bba\u53ca\u8fd4\u5de5\u3002\u672c\u5468\u5b8c\u6210\u6700\u7ec8\u65b9\u6848\u786e\u5b9a\u53caQA checklist\u786e\u5b9a\u3002BPM\u76f8\u5173\u4ee3\u7801\u5df2\u4e0a\u7ebf\uff0cADX \u5728QA\u6d4b\u8bd5\u4e2d\u3002",
    "created": "2017-11-30T14:57:08.000+0800",
    "updated": "2017-11-30T14:57:34.000+0800",
    "started": "2017-11-26T02:55:00.000+0800",
    "timeSpent": "2d",
    "timeSpentSeconds": 57600,
    "id": "13838",
    "issueId": "119246"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 06:57:34] "POST /webhook/jira?user_id=lvshuangquan&user_key=lvshuangquan HTTP/1.0" 200 -
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 06:57:51] "GET /webhook/jenkins%E8%BF%99%E4%B8%AAurl%E5%A1%AB%E5%88%B0http://jenkins.yogiman.cn:8080/job/eventhub/job/master/configure%E9%87%8C%E9%9D%A2 HTTP/1.0" 404 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512025078982,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127154/comment/58507",
    "id": "58507",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=wuyang",
      "name": "wuyang",
      "key": "wuyang",
      "emailAddress": "wuyang@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5434\u6d0b",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010\u63d0\u6d4b\u529f\u80fd\u3011 \r\n\u8fde\u9ea6\u4f18\u5316 \r\n\u3010\u63d0\u6d4b\u5206\u652f\u3011 \r\norigin/dev_interact_optimize \r\n\u3010\u7ec6\u8282\u63cf\u8ff0 & \u98ce\u9669\u63d0\u793a\u3011 \r\n1. \u65b0\u65e7\u7248\u672c\u8fde\u9ea6\u517c\u5bb9\u6027\r\n2. \u5404\u79cd\u60c5\u51b5\u4e0b\u8fde\u9ea6UI\u53d8\u5316 ",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=wuyang",
      "name": "wuyang",
      "key": "wuyang",
      "emailAddress": "wuyang@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5434\u6d0b",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T14:57:58.982+0800",
    "updated": "2017-11-30T14:57:58.982+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={'timestamp': 1512025078982, 'webhookEvent': 'comment_created', 'comment': {'self': 'https://jira.bytedance.com/rest/api/2/issue/127154/comment/58507', 'id': '58507', 'author': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=wuyang', 'name': 'wuyang', 'key': 'wuyang', 'emailAddress': 'wuyang@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=10122', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122'}, 'displayName': '吴洋', 'active': True, 'timeZone': 'PRC'}, 'body': '【提测功能】 \r\n连麦优化 \r\n【提测分支】 \r\norigin/dev_interact_optimize \r\n【细节描述 & 风险提示】 \r\n1. 新旧版本连麦兼容性\r\n2. 各种情况下连麦UI变化 ', 'updateAuthor': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=wuyang', 'name': 'wuyang', 'key': 'wuyang', 'emailAddress': 'wuyang@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=10122', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122'}, 'displayName': '吴洋', 'active': True, 'timeZone': 'PRC'}, 'created': '2017-11-30T14:57:58.982+0800', 'updated': '2017-11-30T14:57:58.982+0800'}}
 exception='NoneType' object has no attribute 'get'
 trace=Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

INFO:root:msg: {}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 40035, 'errmsg': '不合法的参数'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 06:57:59] "POST /webhook/jira?user_id=wuyang&user_key=wuyang HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512025091262,
  "webhookEvent": "worklog_created",
  "worklog": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/121143/worklog/13839",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=lvshuangquan",
      "name": "lvshuangquan",
      "key": "lvshuangquan",
      "emailAddress": "lvshuangquan@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11146",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11146",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11146",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11146"
      },
      "displayName": "\u5415\u53cc\u5168",
      "active": true,
      "timeZone": "PRC"
    },
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=lvshuangquan",
      "name": "lvshuangquan",
      "key": "lvshuangquan",
      "emailAddress": "lvshuangquan@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11146",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11146",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11146",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11146"
      },
      "displayName": "\u5415\u53cc\u5168",
      "active": true,
      "timeZone": "PRC"
    },
    "comment": "QA\u6d4b\u8bd5\u4e2d\u3002\u589e\u52a0\u706b\u5c71\u4e13\u5c5ebanner\uff0c\u5df2\u5b8c\u6210\u3002",
    "created": "2017-11-30T14:58:11.262+0800",
    "updated": "2017-11-30T14:58:11.262+0800",
    "started": "2017-11-30T14:57:00.000+0800",
    "timeSpent": "",
    "timeSpentSeconds": 30,
    "id": "13839",
    "issueId": "121143"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 06:58:11] "POST /webhook/jira?user_id=lvshuangquan&user_key=lvshuangquan HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512025104725,
  "webhookEvent": "worklog_created",
  "worklog": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/121146/worklog/13840",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=lvshuangquan",
      "name": "lvshuangquan",
      "key": "lvshuangquan",
      "emailAddress": "lvshuangquan@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11146",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11146",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11146",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11146"
      },
      "displayName": "\u5415\u53cc\u5168",
      "active": true,
      "timeZone": "PRC"
    },
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=lvshuangquan",
      "name": "lvshuangquan",
      "key": "lvshuangquan",
      "emailAddress": "lvshuangquan@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11146",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11146",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11146",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11146"
      },
      "displayName": "\u5415\u53cc\u5168",
      "active": true,
      "timeZone": "PRC"
    },
    "comment": "QA\u6d4b\u8bd5\u4e2d\u3002\u589e\u52a0\u6296\u97f3\u4e13\u5c5ebanner\uff0c\u5df2\u5b8c\u6210\u3002",
    "created": "2017-11-30T14:58:24.725+0800",
    "updated": "2017-11-30T14:58:24.725+0800",
    "started": "2017-11-30T14:58:00.000+0800",
    "timeSpent": "4h",
    "timeSpentSeconds": 14400,
    "id": "13840",
    "issueId": "121146"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 06:58:24] "POST /webhook/jira?user_id=lvshuangquan&user_key=lvshuangquan HTTP/1.0" 200 -
INFO:root:
[jenkins
<^>
{
  "name": "eventhub-pipeline",
  "display_name": "eventhub-pipeline",
  "url": "job/eventhub-pipeline/",
  "build": {
    "number": 1,
    "queue_id": 16,
    "timestamp": 1512025508579,
    "phase": "QUEUED",
    "url": "job/eventhub-pipeline/1/",
    "scm": {},
    "log": "",
    "artifacts": {}
  }
}
<^>
jenkins]

INFO:root:Incredible Exception: data={'name': 'eventhub-pipeline', 'display_name': 'eventhub-pipeline', 'url': 'job/eventhub-pipeline/', 'build': {'number': 1, 'queue_id': 16, 'timestamp': 1512025508579, 'phase': 'QUEUED', 'url': 'job/eventhub-pipeline/1/', 'scm': {}, 'log': '', 'artifacts': {}}}
 exception=local variable 'title' referenced before assignment
 trace=Traceback (most recent call last):
  File "/mnt/jenkins.py", line 22, in transform_data
    title, text = _pack_msg(repo, url, phase, status)
  File "/mnt/jenkins.py", line 50, in _pack_msg
    return title, text
UnboundLocalError: local variable 'title' referenced before assignment

INFO:root:msg: {}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=49679eab1c1d2c16af000de2f61e2803a9071cb38b92e16b05c8ba18f007ccaa HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 40035, 'errmsg': '不合法的参数'}
INFO:root:jenkins dose: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 07:05:08] "POST /webhook/jenkins HTTP/1.0" 200 -
INFO:root:
[jenkins
<^>
{
  "name": "eventhub-pipeline",
  "display_name": "eventhub-pipeline",
  "url": "job/eventhub-pipeline/",
  "build": {
    "number": 1,
    "queue_id": 16,
    "timestamp": 1512025508581,
    "phase": "STARTED",
    "url": "job/eventhub-pipeline/1/",
    "scm": {},
    "log": "",
    "artifacts": {}
  }
}
<^>
jenkins]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '开始构建 eventhub-pipeline', 'text': '#### 开始构建 eventhub-pipeline \n[点击查看详情](None)'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=49679eab1c1d2c16af000de2f61e2803a9071cb38b92e16b05c8ba18f007ccaa HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 0, 'errmsg': 'ok'}
INFO:root:jenkins dose: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 07:05:08] "POST /webhook/jenkins HTTP/1.0" 200 -
INFO:root:
[jenkins
<^>
{
  "name": "eventhub-pipeline",
  "display_name": "eventhub-pipeline",
  "url": "job/eventhub-pipeline/",
  "build": {
    "number": 1,
    "queue_id": 16,
    "timestamp": 1512025508581,
    "phase": "COMPLETED",
    "status": "SUCCESS",
    "url": "job/eventhub-pipeline/1/",
    "scm": {},
    "log": "",
    "artifacts": {}
  }
}
<^>
jenkins]

INFO:root:Incredible Exception: data={'name': 'eventhub-pipeline', 'display_name': 'eventhub-pipeline', 'url': 'job/eventhub-pipeline/', 'build': {'number': 1, 'queue_id': 16, 'timestamp': 1512025508581, 'phase': 'COMPLETED', 'status': 'SUCCESS', 'url': 'job/eventhub-pipeline/1/', 'scm': {}, 'log': '', 'artifacts': {}}}
 exception=local variable 'title' referenced before assignment
 trace=Traceback (most recent call last):
  File "/mnt/jenkins.py", line 22, in transform_data
    title, text = _pack_msg(repo, url, phase, status)
  File "/mnt/jenkins.py", line 50, in _pack_msg
    return title, text
UnboundLocalError: local variable 'title' referenced before assignment

INFO:root:msg: {}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=49679eab1c1d2c16af000de2f61e2803a9071cb38b92e16b05c8ba18f007ccaa HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 40035, 'errmsg': '不合法的参数'}
INFO:root:jenkins dose: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 07:05:09] "POST /webhook/jenkins HTTP/1.0" 200 -
INFO:root:
[jenkins
<^>
{
  "name": "eventhub-pipeline",
  "display_name": "eventhub-pipeline",
  "url": "job/eventhub-pipeline/",
  "build": {
    "number": 1,
    "queue_id": 16,
    "timestamp": 1512025509020,
    "phase": "FINALIZED",
    "status": "SUCCESS",
    "url": "job/eventhub-pipeline/1/",
    "scm": {},
    "log": "",
    "artifacts": {}
  }
}
<^>
jenkins]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '构建成功 eventhub-pipeline', 'text': '#### 构建成功 eventhub-pipeline \n[点击查看详情](None)'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=49679eab1c1d2c16af000de2f61e2803a9071cb38b92e16b05c8ba18f007ccaa HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 0, 'errmsg': 'ok'}
INFO:root:jenkins dose: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 07:05:09] "POST /webhook/jenkins HTTP/1.0" 200 -
INFO:root:
[jenkins
<^>
{
  "name": "eventhub-pipeline",
  "display_name": "eventhub-pipeline",
  "url": "job/eventhub-pipeline/",
  "build": {
    "number": 2,
    "queue_id": 17,
    "timestamp": 1512025547971,
    "phase": "QUEUED",
    "url": "job/eventhub-pipeline/2/",
    "scm": {},
    "log": "",
    "artifacts": {}
  }
}
<^>
jenkins]

INFO:root:Incredible Exception: data={'name': 'eventhub-pipeline', 'display_name': 'eventhub-pipeline', 'url': 'job/eventhub-pipeline/', 'build': {'number': 2, 'queue_id': 17, 'timestamp': 1512025547971, 'phase': 'QUEUED', 'url': 'job/eventhub-pipeline/2/', 'scm': {}, 'log': '', 'artifacts': {}}}
 exception=local variable 'title' referenced before assignment
 trace=Traceback (most recent call last):
  File "/mnt/jenkins.py", line 22, in transform_data
    title, text = _pack_msg(repo, url, phase, status)
  File "/mnt/jenkins.py", line 50, in _pack_msg
    return title, text
UnboundLocalError: local variable 'title' referenced before assignment

INFO:root:msg: {}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=49679eab1c1d2c16af000de2f61e2803a9071cb38b92e16b05c8ba18f007ccaa HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 40035, 'errmsg': '不合法的参数'}
INFO:root:jenkins dose: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 07:05:48] "POST /webhook/jenkins HTTP/1.0" 200 -
INFO:root:
[jenkins
<^>
{
  "name": "eventhub-pipeline",
  "display_name": "eventhub-pipeline",
  "url": "job/eventhub-pipeline/",
  "build": {
    "number": 2,
    "queue_id": 17,
    "timestamp": 1512025547970,
    "phase": "STARTED",
    "url": "job/eventhub-pipeline/2/",
    "scm": {},
    "log": "",
    "artifacts": {}
  }
}
<^>
jenkins]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '开始构建 eventhub-pipeline', 'text': '#### 开始构建 eventhub-pipeline \n[点击查看详情](None)'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=49679eab1c1d2c16af000de2f61e2803a9071cb38b92e16b05c8ba18f007ccaa HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 0, 'errmsg': 'ok'}
INFO:root:jenkins dose: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 07:05:48] "POST /webhook/jenkins HTTP/1.0" 200 -
INFO:root:
[jenkins
<^>
{
  "name": "eventhub-pipeline",
  "display_name": "eventhub-pipeline",
  "url": "job/eventhub-pipeline/",
  "build": {
    "number": 2,
    "queue_id": 17,
    "timestamp": 1512025547970,
    "phase": "COMPLETED",
    "status": "FAILURE",
    "url": "job/eventhub-pipeline/2/",
    "scm": {},
    "log": "",
    "artifacts": {}
  }
}
<^>
jenkins]

INFO:root:Incredible Exception: data={'name': 'eventhub-pipeline', 'display_name': 'eventhub-pipeline', 'url': 'job/eventhub-pipeline/', 'build': {'number': 2, 'queue_id': 17, 'timestamp': 1512025547970, 'phase': 'COMPLETED', 'status': 'FAILURE', 'url': 'job/eventhub-pipeline/2/', 'scm': {}, 'log': '', 'artifacts': {}}}
 exception=local variable 'title' referenced before assignment
 trace=Traceback (most recent call last):
  File "/mnt/jenkins.py", line 22, in transform_data
    title, text = _pack_msg(repo, url, phase, status)
  File "/mnt/jenkins.py", line 50, in _pack_msg
    return title, text
UnboundLocalError: local variable 'title' referenced before assignment

INFO:root:msg: {}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=49679eab1c1d2c16af000de2f61e2803a9071cb38b92e16b05c8ba18f007ccaa HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 40035, 'errmsg': '不合法的参数'}
INFO:root:jenkins dose: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 07:05:48] "POST /webhook/jenkins HTTP/1.0" 200 -
INFO:root:
[jenkins
<^>
{
  "name": "eventhub-pipeline",
  "display_name": "eventhub-pipeline",
  "url": "job/eventhub-pipeline/",
  "build": {
    "number": 2,
    "queue_id": 17,
    "timestamp": 1512025548347,
    "phase": "FINALIZED",
    "status": "FAILURE",
    "url": "job/eventhub-pipeline/2/",
    "scm": {},
    "log": "",
    "artifacts": {}
  }
}
<^>
jenkins]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '构建失败 eventhub-pipeline', 'text': '#### 构建失败 eventhub-pipeline \n[点击查看详情](None)'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=49679eab1c1d2c16af000de2f61e2803a9071cb38b92e16b05c8ba18f007ccaa HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 0, 'errmsg': 'ok'}
INFO:root:jenkins dose: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 07:05:48] "POST /webhook/jenkins HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512026063587,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127714/comment/58509",
    "id": "58509",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=xiejianmin",
      "name": "xiejianmin",
      "key": "xiejianmin",
      "emailAddress": "xiejianmin@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u8c22\u5251\u654f",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u670d\u52a1\u5df2\u7ecf\u6062\u590d\u3002",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=xiejianmin",
      "name": "xiejianmin",
      "key": "xiejianmin",
      "emailAddress": "xiejianmin@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u8c22\u5251\u654f",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T15:14:23.587+0800",
    "updated": "2017-11-30T15:14:23.587+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={'timestamp': 1512026063587, 'webhookEvent': 'comment_created', 'comment': {'self': 'https://jira.bytedance.com/rest/api/2/issue/127714/comment/58509', 'id': '58509', 'author': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=xiejianmin', 'name': 'xiejianmin', 'key': 'xiejianmin', 'emailAddress': 'xiejianmin@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=10122', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122'}, 'displayName': '谢剑敏', 'active': True, 'timeZone': 'PRC'}, 'body': '服务已经恢复。', 'updateAuthor': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=xiejianmin', 'name': 'xiejianmin', 'key': 'xiejianmin', 'emailAddress': 'xiejianmin@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=10122', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122'}, 'displayName': '谢剑敏', 'active': True, 'timeZone': 'PRC'}, 'created': '2017-11-30T15:14:23.587+0800', 'updated': '2017-11-30T15:14:23.587+0800'}}
 exception='NoneType' object has no attribute 'get'
 trace=Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

INFO:root:msg: {}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 40035, 'errmsg': '不合法的参数'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 07:14:23] "POST /webhook/jira?user_id=xiejianmin&user_key=xiejianmin HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512026081769,
  "webhookEvent": "comment_deleted",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127732/comment/58381",
    "id": "58381",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=xiejianmin",
      "name": "xiejianmin",
      "key": "xiejianmin",
      "emailAddress": "xiejianmin@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u8c22\u5251\u654f",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u521b\u610f\u641c\u7d22\u63a5\u53e3\u8fd4\u56de\u9519\u8bef\uff0c\u7b97\u6cd5\u4fa7\u4f9d\u8d56\u7684\u4e0b\u6e38\u670d\u52a1\u6709\u95ee\u9898\uff0c\u6b63\u5728\u4fee\u590d",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=xiejianmin",
      "name": "xiejianmin",
      "key": "xiejianmin",
      "emailAddress": "xiejianmin@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u8c22\u5251\u654f",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-29T17:33:32.000+0800",
    "updated": "2017-11-29T17:33:32.000+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 07:14:41] "POST /webhook/jira?user_id=xiejianmin&user_key=xiejianmin HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512026103737,
  "webhookEvent": "comment_deleted",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127732/comment/58408",
    "id": "58408",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=xiejianmin",
      "name": "xiejianmin",
      "key": "xiejianmin",
      "emailAddress": "xiejianmin@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u8c22\u5251\u654f",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u7b97\u6cd5\u4fa7\u6240\u5728\u7684\u673a\u5668\u90e8\u7f72\u4e86\u5176\u5b83\u670d\u52a1\uff0c\u5bfc\u81f4\u8ba1\u7b97\u8d44\u6e90\u4e0d\u8db3\uff0c\u54cd\u5e94\u65f6\u95f4\u53d8\u957f\u3002\u73b0\u5728\u6ca1\u6709\u597d\u7684\u8fc1\u79fb\u65b9\u6848",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=xiejianmin",
      "name": "xiejianmin",
      "key": "xiejianmin",
      "emailAddress": "xiejianmin@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u8c22\u5251\u654f",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-29T19:53:08.000+0800",
    "updated": "2017-11-29T19:53:08.000+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 07:15:03] "POST /webhook/jira?user_id=xiejianmin&user_key=xiejianmin HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512026106998,
  "webhookEvent": "comment_deleted",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127732/comment/58477",
    "id": "58477",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=xiejianmin",
      "name": "xiejianmin",
      "key": "xiejianmin",
      "emailAddress": "xiejianmin@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u8c22\u5251\u654f",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u670d\u52a1\u5df2\u7ecf\u6062\u590d\u3002",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=xiejianmin",
      "name": "xiejianmin",
      "key": "xiejianmin",
      "emailAddress": "xiejianmin@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u8c22\u5251\u654f",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T12:06:27.000+0800",
    "updated": "2017-11-30T12:06:27.000+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 07:15:07] "POST /webhook/jira?user_id=xiejianmin&user_key=xiejianmin HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512026827832,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/128062/comment/58514",
    "id": "58514",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=xietianzhen",
      "name": "xietianzhen",
      "key": "xietianzhen",
      "emailAddress": "xietianzhen@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "xietianzhen",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u6628\u5929\u4e0a\u7ebf\u7684\u5bcc\u6587\u672c\u5904\u7406\u5bf9\u8bc6\u522b\u7684\u94fe\u63a5\u6ca1\u6709\u52a0\u4e0ahttp\u534f\u8bae\u5934\u5bfc\u81f4",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=xietianzhen",
      "name": "xietianzhen",
      "key": "xietianzhen",
      "emailAddress": "xietianzhen@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "xietianzhen",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T15:27:07.832+0800",
    "updated": "2017-11-30T15:27:07.832+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={'timestamp': 1512026827832, 'webhookEvent': 'comment_created', 'comment': {'self': 'https://jira.bytedance.com/rest/api/2/issue/128062/comment/58514', 'id': '58514', 'author': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=xietianzhen', 'name': 'xietianzhen', 'key': 'xietianzhen', 'emailAddress': 'xietianzhen@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=10122', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122'}, 'displayName': 'xietianzhen', 'active': True, 'timeZone': 'PRC'}, 'body': '昨天上线的富文本处理对识别的链接没有加上http协议头导致', 'updateAuthor': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=xietianzhen', 'name': 'xietianzhen', 'key': 'xietianzhen', 'emailAddress': 'xietianzhen@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=10122', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122'}, 'displayName': 'xietianzhen', 'active': True, 'timeZone': 'PRC'}, 'created': '2017-11-30T15:27:07.832+0800', 'updated': '2017-11-30T15:27:07.832+0800'}}
 exception='NoneType' object has no attribute 'get'
 trace=Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

INFO:root:msg: {}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 40035, 'errmsg': '不合法的参数'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 07:27:08] "POST /webhook/jira?user_id=xietianzhen&user_key=xietianzhen HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512027542108,
  "webhookEvent": "comment_updated",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/120289/comment/54942",
    "id": "54942",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=dingxinghua",
      "name": "dingxinghua",
      "key": "dingxinghua",
      "emailAddress": "dingxinghua@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=dingxinghua&avatarId=11503",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=dingxinghua&avatarId=11503",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=dingxinghua&avatarId=11503",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=dingxinghua&avatarId=11503"
      },
      "displayName": "\u4e01\u5174\u534e",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u8fd9\u4e2a10\u4e2a\u6216\u8005\u66f4\u591a\u5bf9\u56de\u6d41\u9875\u672c\u8eab\u65e0\u672c\u8d28\u5f71\u54cd\uff0c\u4e3a\u4e86\u8ddf\u5176\u4ed6\u56de\u6d41\u9875\u7684\u63a8\u8350\u5185\u5bb9\u4fdd\u6301\u4e00\u81f4\uff08\u5de5\u7a0b\u4e0a\u590d\u7528\uff09\uff0c\u4e0d\u505a\u4fee\u6539\u3002\r\n\r\n\u8ddf\u4ea7\u54c1\u786e\u8ba4\u8fc7",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=dingxinghua",
      "name": "dingxinghua",
      "key": "dingxinghua",
      "emailAddress": "dingxinghua@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=dingxinghua&avatarId=11503",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=dingxinghua&avatarId=11503",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=dingxinghua&avatarId=11503",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=dingxinghua&avatarId=11503"
      },
      "displayName": "\u4e01\u5174\u534e",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-07T17:16:00.000+0800",
    "updated": "2017-11-30T15:39:02.108+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 07:39:02] "POST /webhook/jira?user_id=dingxinghua&user_key=dingxinghua HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512027570268,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127742/comment/58515",
    "id": "58515",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=hongqinghua",
      "name": "hongqinghua",
      "key": "hongqinghua",
      "emailAddress": "hongqinghua@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=hongqinghua&avatarId=11516",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=hongqinghua&avatarId=11516",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=hongqinghua&avatarId=11516",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=hongqinghua&avatarId=11516"
      },
      "displayName": "\u6d2a\u6e05\u534e",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u4fee\u590drightPan\u95ee\u9898",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=hongqinghua",
      "name": "hongqinghua",
      "key": "hongqinghua",
      "emailAddress": "hongqinghua@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=hongqinghua&avatarId=11516",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=hongqinghua&avatarId=11516",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=hongqinghua&avatarId=11516",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=hongqinghua&avatarId=11516"
      },
      "displayName": "\u6d2a\u6e05\u534e",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T15:39:30.268+0800",
    "updated": "2017-11-30T15:39:30.268+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={'timestamp': 1512027570268, 'webhookEvent': 'comment_created', 'comment': {'self': 'https://jira.bytedance.com/rest/api/2/issue/127742/comment/58515', 'id': '58515', 'author': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=hongqinghua', 'name': 'hongqinghua', 'key': 'hongqinghua', 'emailAddress': 'hongqinghua@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?ownerId=hongqinghua&avatarId=11516', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&ownerId=hongqinghua&avatarId=11516', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=hongqinghua&avatarId=11516', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=hongqinghua&avatarId=11516'}, 'displayName': '洪清华', 'active': True, 'timeZone': 'PRC'}, 'body': '修复rightPan问题', 'updateAuthor': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=hongqinghua', 'name': 'hongqinghua', 'key': 'hongqinghua', 'emailAddress': 'hongqinghua@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?ownerId=hongqinghua&avatarId=11516', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&ownerId=hongqinghua&avatarId=11516', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=hongqinghua&avatarId=11516', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=hongqinghua&avatarId=11516'}, 'displayName': '洪清华', 'active': True, 'timeZone': 'PRC'}, 'created': '2017-11-30T15:39:30.268+0800', 'updated': '2017-11-30T15:39:30.268+0800'}}
 exception='NoneType' object has no attribute 'get'
 trace=Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

INFO:root:msg: {}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 40035, 'errmsg': '不合法的参数'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 07:39:30] "POST /webhook/jira?user_id=hongqinghua&user_key=hongqinghua HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512027573014,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/119510/comment/58516",
    "id": "58516",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=dingxinghua",
      "name": "dingxinghua",
      "key": "dingxinghua",
      "emailAddress": "dingxinghua@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=dingxinghua&avatarId=11503",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=dingxinghua&avatarId=11503",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=dingxinghua&avatarId=11503",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=dingxinghua&avatarId=11503"
      },
      "displayName": "\u4e01\u5174\u534e",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "https://jira.bytedance.com/browse/NHDZ-7250?filter=-1&jql=assignee%20in%20(currentUser())%20order%20by%20updated%20DESC\r\n\r\n\u8fd9\u4e2a\u95ee\u9898\u4e4b\u524d\u89e3\u91ca\u8fc7",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=dingxinghua",
      "name": "dingxinghua",
      "key": "dingxinghua",
      "emailAddress": "dingxinghua@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=dingxinghua&avatarId=11503",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=dingxinghua&avatarId=11503",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=dingxinghua&avatarId=11503",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=dingxinghua&avatarId=11503"
      },
      "displayName": "\u4e01\u5174\u534e",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T15:39:33.014+0800",
    "updated": "2017-11-30T15:39:33.014+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={'timestamp': 1512027573014, 'webhookEvent': 'comment_created', 'comment': {'self': 'https://jira.bytedance.com/rest/api/2/issue/119510/comment/58516', 'id': '58516', 'author': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=dingxinghua', 'name': 'dingxinghua', 'key': 'dingxinghua', 'emailAddress': 'dingxinghua@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?ownerId=dingxinghua&avatarId=11503', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&ownerId=dingxinghua&avatarId=11503', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=dingxinghua&avatarId=11503', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=dingxinghua&avatarId=11503'}, 'displayName': '丁兴华', 'active': True, 'timeZone': 'PRC'}, 'body': 'https://jira.bytedance.com/browse/NHDZ-7250?filter=-1&jql=assignee%20in%20(currentUser())%20order%20by%20updated%20DESC\r\n\r\n这个问题之前解释过', 'updateAuthor': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=dingxinghua', 'name': 'dingxinghua', 'key': 'dingxinghua', 'emailAddress': 'dingxinghua@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?ownerId=dingxinghua&avatarId=11503', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&ownerId=dingxinghua&avatarId=11503', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=dingxinghua&avatarId=11503', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=dingxinghua&avatarId=11503'}, 'displayName': '丁兴华', 'active': True, 'timeZone': 'PRC'}, 'created': '2017-11-30T15:39:33.014+0800', 'updated': '2017-11-30T15:39:33.014+0800'}}
 exception='NoneType' object has no attribute 'get'
 trace=Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

INFO:root:msg: {}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 40035, 'errmsg': '不合法的参数'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 07:39:33] "POST /webhook/jira?user_id=dingxinghua&user_key=dingxinghua HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512027609868,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/119525/comment/58517",
    "id": "58517",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=dingxinghua",
      "name": "dingxinghua",
      "key": "dingxinghua",
      "emailAddress": "dingxinghua@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=dingxinghua&avatarId=11503",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=dingxinghua&avatarId=11503",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=dingxinghua&avatarId=11503",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=dingxinghua&avatarId=11503"
      },
      "displayName": "\u4e01\u5174\u534e",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u70b9\u51fb\u4ec0\u4e48\u4e0d\u4f1a\u8df3\u8f6c\u4e0b\u8f7d\uff1f\u6ca1\u770b\u61c2",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=dingxinghua",
      "name": "dingxinghua",
      "key": "dingxinghua",
      "emailAddress": "dingxinghua@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=dingxinghua&avatarId=11503",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=dingxinghua&avatarId=11503",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=dingxinghua&avatarId=11503",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=dingxinghua&avatarId=11503"
      },
      "displayName": "\u4e01\u5174\u534e",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T15:40:09.868+0800",
    "updated": "2017-11-30T15:40:09.868+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={'timestamp': 1512027609868, 'webhookEvent': 'comment_created', 'comment': {'self': 'https://jira.bytedance.com/rest/api/2/issue/119525/comment/58517', 'id': '58517', 'author': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=dingxinghua', 'name': 'dingxinghua', 'key': 'dingxinghua', 'emailAddress': 'dingxinghua@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?ownerId=dingxinghua&avatarId=11503', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&ownerId=dingxinghua&avatarId=11503', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=dingxinghua&avatarId=11503', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=dingxinghua&avatarId=11503'}, 'displayName': '丁兴华', 'active': True, 'timeZone': 'PRC'}, 'body': '点击什么不会跳转下载？没看懂', 'updateAuthor': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=dingxinghua', 'name': 'dingxinghua', 'key': 'dingxinghua', 'emailAddress': 'dingxinghua@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?ownerId=dingxinghua&avatarId=11503', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&ownerId=dingxinghua&avatarId=11503', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=dingxinghua&avatarId=11503', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=dingxinghua&avatarId=11503'}, 'displayName': '丁兴华', 'active': True, 'timeZone': 'PRC'}, 'created': '2017-11-30T15:40:09.868+0800', 'updated': '2017-11-30T15:40:09.868+0800'}}
 exception='NoneType' object has no attribute 'get'
 trace=Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

INFO:root:msg: {}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 40035, 'errmsg': '不合法的参数'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 07:40:10] "POST /webhook/jira?user_id=dingxinghua&user_key=dingxinghua HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512028033932,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/126242/comment/58519",
    "id": "58519",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=zhouyongjia",
      "name": "zhouyongjia",
      "key": "zhouyongjia",
      "emailAddress": "zhouyongjia@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5468\u6c38\u4f73",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u5df2\u6539\uff0c\u8fd8\u5dee\u63d0\u793a\u6587\u6848",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=zhouyongjia",
      "name": "zhouyongjia",
      "key": "zhouyongjia",
      "emailAddress": "zhouyongjia@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5468\u6c38\u4f73",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T15:47:13.932+0800",
    "updated": "2017-11-30T15:47:13.932+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={'timestamp': 1512028033932, 'webhookEvent': 'comment_created', 'comment': {'self': 'https://jira.bytedance.com/rest/api/2/issue/126242/comment/58519', 'id': '58519', 'author': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=zhouyongjia', 'name': 'zhouyongjia', 'key': 'zhouyongjia', 'emailAddress': 'zhouyongjia@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=10122', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122'}, 'displayName': '周永佳', 'active': True, 'timeZone': 'PRC'}, 'body': '已改，还差提示文案', 'updateAuthor': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=zhouyongjia', 'name': 'zhouyongjia', 'key': 'zhouyongjia', 'emailAddress': 'zhouyongjia@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=10122', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122'}, 'displayName': '周永佳', 'active': True, 'timeZone': 'PRC'}, 'created': '2017-11-30T15:47:13.932+0800', 'updated': '2017-11-30T15:47:13.932+0800'}}
 exception='NoneType' object has no attribute 'get'
 trace=Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

INFO:root:msg: {}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 40035, 'errmsg': '不合法的参数'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 07:47:14] "POST /webhook/jira?user_id=zhouyongjia&user_key=zhouyongjia HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512028034618,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127106/comment/58520",
    "id": "58520",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=weijianli",
      "name": "weijianli",
      "key": "weijianli",
      "emailAddress": "weijianli@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11146",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11146",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11146",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11146"
      },
      "displayName": "\u9b4f\u5efa\u7acb",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u5df2\u540c\u6b65\u5230\u6d4b\u8bd5\u73af\u5883",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=weijianli",
      "name": "weijianli",
      "key": "weijianli",
      "emailAddress": "weijianli@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11146",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11146",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11146",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11146"
      },
      "displayName": "\u9b4f\u5efa\u7acb",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T15:47:14.618+0800",
    "updated": "2017-11-30T15:47:14.618+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={'timestamp': 1512028034618, 'webhookEvent': 'comment_created', 'comment': {'self': 'https://jira.bytedance.com/rest/api/2/issue/127106/comment/58520', 'id': '58520', 'author': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=weijianli', 'name': 'weijianli', 'key': 'weijianli', 'emailAddress': 'weijianli@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=11146', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11146', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11146', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11146'}, 'displayName': '魏建立', 'active': True, 'timeZone': 'PRC'}, 'body': '已同步到测试环境', 'updateAuthor': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=weijianli', 'name': 'weijianli', 'key': 'weijianli', 'emailAddress': 'weijianli@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=11146', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11146', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11146', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11146'}, 'displayName': '魏建立', 'active': True, 'timeZone': 'PRC'}, 'created': '2017-11-30T15:47:14.618+0800', 'updated': '2017-11-30T15:47:14.618+0800'}}
 exception='NoneType' object has no attribute 'get'
 trace=Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

INFO:root:msg: {}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 40035, 'errmsg': '不合法的参数'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 07:47:14] "POST /webhook/jira?user_id=weijianli&user_key=weijianli HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512028049860,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/128007/comment/58521",
    "id": "58521",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=cuidanyang",
      "name": "cuidanyang",
      "key": "cuidanyang",
      "emailAddress": "cuidanyang@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5d14\u4e39\u9633",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u5df2\u4fee\u590d",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=cuidanyang",
      "name": "cuidanyang",
      "key": "cuidanyang",
      "emailAddress": "cuidanyang@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5d14\u4e39\u9633",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T15:47:29.860+0800",
    "updated": "2017-11-30T15:47:29.860+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={'timestamp': 1512028049860, 'webhookEvent': 'comment_created', 'comment': {'self': 'https://jira.bytedance.com/rest/api/2/issue/128007/comment/58521', 'id': '58521', 'author': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=cuidanyang', 'name': 'cuidanyang', 'key': 'cuidanyang', 'emailAddress': 'cuidanyang@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=10122', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122'}, 'displayName': '崔丹阳', 'active': True, 'timeZone': 'PRC'}, 'body': '已修复', 'updateAuthor': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=cuidanyang', 'name': 'cuidanyang', 'key': 'cuidanyang', 'emailAddress': 'cuidanyang@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=10122', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122'}, 'displayName': '崔丹阳', 'active': True, 'timeZone': 'PRC'}, 'created': '2017-11-30T15:47:29.860+0800', 'updated': '2017-11-30T15:47:29.860+0800'}}
 exception='NoneType' object has no attribute 'get'
 trace=Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

INFO:root:msg: {}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 40035, 'errmsg': '不合法的参数'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 07:47:29] "POST /webhook/jira?user_id=cuidanyang&user_key=cuidanyang HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512028078954,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127135/comment/58522",
    "id": "58522",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=weijianli",
      "name": "weijianli",
      "key": "weijianli",
      "emailAddress": "weijianli@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11146",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11146",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11146",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11146"
      },
      "displayName": "\u9b4f\u5efa\u7acb",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u8be6\u60c5\u9875\u5df2\u5904\u7406\uff0c \u5df2\u540c\u6b65\u5230\u6d4b\u8bd5\u73af\u5883",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=weijianli",
      "name": "weijianli",
      "key": "weijianli",
      "emailAddress": "weijianli@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11146",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11146",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11146",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11146"
      },
      "displayName": "\u9b4f\u5efa\u7acb",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T15:47:58.954+0800",
    "updated": "2017-11-30T15:47:58.954+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={'timestamp': 1512028078954, 'webhookEvent': 'comment_created', 'comment': {'self': 'https://jira.bytedance.com/rest/api/2/issue/127135/comment/58522', 'id': '58522', 'author': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=weijianli', 'name': 'weijianli', 'key': 'weijianli', 'emailAddress': 'weijianli@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=11146', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11146', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11146', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11146'}, 'displayName': '魏建立', 'active': True, 'timeZone': 'PRC'}, 'body': '详情页已处理， 已同步到测试环境', 'updateAuthor': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=weijianli', 'name': 'weijianli', 'key': 'weijianli', 'emailAddress': 'weijianli@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=11146', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11146', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11146', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11146'}, 'displayName': '魏建立', 'active': True, 'timeZone': 'PRC'}, 'created': '2017-11-30T15:47:58.954+0800', 'updated': '2017-11-30T15:47:58.954+0800'}}
 exception='NoneType' object has no attribute 'get'
 trace=Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

INFO:root:msg: {}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 40035, 'errmsg': '不合法的参数'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 07:47:59] "POST /webhook/jira?user_id=weijianli&user_key=weijianli HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512028138574,
  "webhookEvent": "comment_updated",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127135/comment/58522",
    "id": "58522",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=weijianli",
      "name": "weijianli",
      "key": "weijianli",
      "emailAddress": "weijianli@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11146",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11146",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11146",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11146"
      },
      "displayName": "\u9b4f\u5efa\u7acb",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u8be6\u60c5\u9875\u5df2\u5904\u7406\uff0c \u5df2\u540c\u6b65\u5230\u6d4b\u8bd5\u73af\u5883\uff0c\u4e0d\u5c55\u793a\u65f6\u95f4\uff0c\u4e0d\u5c55\u793a\u76f8\u5173\u80a1\u7968",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=weijianli",
      "name": "weijianli",
      "key": "weijianli",
      "emailAddress": "weijianli@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11146",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11146",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11146",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11146"
      },
      "displayName": "\u9b4f\u5efa\u7acb",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T15:47:58.000+0800",
    "updated": "2017-11-30T15:48:58.574+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 07:48:58] "POST /webhook/jira?user_id=weijianli&user_key=weijianli HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512028226981,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127148/comment/58523",
    "id": "58523",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=weijianli",
      "name": "weijianli",
      "key": "weijianli",
      "emailAddress": "weijianli@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11146",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11146",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11146",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11146"
      },
      "displayName": "\u9b4f\u5efa\u7acb",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u5df2\u540c\u6b65\u5230\u6d4b\u8bd5\u73af\u5883",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=weijianli",
      "name": "weijianli",
      "key": "weijianli",
      "emailAddress": "weijianli@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11146",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11146",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11146",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11146"
      },
      "displayName": "\u9b4f\u5efa\u7acb",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T15:50:26.981+0800",
    "updated": "2017-11-30T15:50:26.981+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={'timestamp': 1512028226981, 'webhookEvent': 'comment_created', 'comment': {'self': 'https://jira.bytedance.com/rest/api/2/issue/127148/comment/58523', 'id': '58523', 'author': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=weijianli', 'name': 'weijianli', 'key': 'weijianli', 'emailAddress': 'weijianli@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=11146', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11146', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11146', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11146'}, 'displayName': '魏建立', 'active': True, 'timeZone': 'PRC'}, 'body': '已同步到测试环境', 'updateAuthor': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=weijianli', 'name': 'weijianli', 'key': 'weijianli', 'emailAddress': 'weijianli@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=11146', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11146', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11146', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11146'}, 'displayName': '魏建立', 'active': True, 'timeZone': 'PRC'}, 'created': '2017-11-30T15:50:26.981+0800', 'updated': '2017-11-30T15:50:26.981+0800'}}
 exception='NoneType' object has no attribute 'get'
 trace=Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

INFO:root:msg: {}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 40035, 'errmsg': '不合法的参数'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 07:50:27] "POST /webhook/jira?user_id=weijianli&user_key=weijianli HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512028370247,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/128115/comment/58525",
    "id": "58525",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=lvshuangxi",
      "name": "lvshuangxi",
      "key": "lvshuangxi",
      "emailAddress": "lvshuangxi@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "lvshuangxi",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u524d\u7aef\u6d4b\u8bd5\u7528\u7684",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=lvshuangxi",
      "name": "lvshuangxi",
      "key": "lvshuangxi",
      "emailAddress": "lvshuangxi@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "lvshuangxi",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T15:52:50.247+0800",
    "updated": "2017-11-30T15:52:50.247+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={'timestamp': 1512028370247, 'webhookEvent': 'comment_created', 'comment': {'self': 'https://jira.bytedance.com/rest/api/2/issue/128115/comment/58525', 'id': '58525', 'author': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=lvshuangxi', 'name': 'lvshuangxi', 'key': 'lvshuangxi', 'emailAddress': 'lvshuangxi@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=10122', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122'}, 'displayName': 'lvshuangxi', 'active': True, 'timeZone': 'PRC'}, 'body': '前端测试用的', 'updateAuthor': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=lvshuangxi', 'name': 'lvshuangxi', 'key': 'lvshuangxi', 'emailAddress': 'lvshuangxi@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=10122', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122'}, 'displayName': 'lvshuangxi', 'active': True, 'timeZone': 'PRC'}, 'created': '2017-11-30T15:52:50.247+0800', 'updated': '2017-11-30T15:52:50.247+0800'}}
 exception='NoneType' object has no attribute 'get'
 trace=Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

INFO:root:msg: {}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 40035, 'errmsg': '不合法的参数'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 07:52:50] "POST /webhook/jira?user_id=lvshuangxi&user_key=lvshuangxi HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512028388888,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127135/comment/58526",
    "id": "58526",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=zhangchaoyang",
      "name": "zhangchaoyang",
      "key": "zhangchaoyang",
      "emailAddress": "zhangchaoyang@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "zhangchaoyang",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u6211\u5728\u8fd4\u56de\u7ed3\u679c\u7ed9\u524d\u7aef\u7684\u65f6\u5019\u4f1a\u8c03\u4e00\u6b21\u6587\u7ae0\u670d\u52a1\uff0c\u786e\u4fdd\u6587\u7ae0\u6587\u7ae0\u6ca1\u6709\u4e0b\u7ebf\u624d\u4f1a\u8fd4\u56de\u7ed9\u524d\u7aef",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=zhangchaoyang",
      "name": "zhangchaoyang",
      "key": "zhangchaoyang",
      "emailAddress": "zhangchaoyang@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "zhangchaoyang",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T15:53:08.888+0800",
    "updated": "2017-11-30T15:53:08.888+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={'timestamp': 1512028388888, 'webhookEvent': 'comment_created', 'comment': {'self': 'https://jira.bytedance.com/rest/api/2/issue/127135/comment/58526', 'id': '58526', 'author': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=zhangchaoyang', 'name': 'zhangchaoyang', 'key': 'zhangchaoyang', 'emailAddress': 'zhangchaoyang@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=10122', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122'}, 'displayName': 'zhangchaoyang', 'active': True, 'timeZone': 'PRC'}, 'body': '我在返回结果给前端的时候会调一次文章服务，确保文章文章没有下线才会返回给前端', 'updateAuthor': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=zhangchaoyang', 'name': 'zhangchaoyang', 'key': 'zhangchaoyang', 'emailAddress': 'zhangchaoyang@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=10122', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122'}, 'displayName': 'zhangchaoyang', 'active': True, 'timeZone': 'PRC'}, 'created': '2017-11-30T15:53:08.888+0800', 'updated': '2017-11-30T15:53:08.888+0800'}}
 exception='NoneType' object has no attribute 'get'
 trace=Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

INFO:root:msg: {}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 40035, 'errmsg': '不合法的参数'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 07:53:08] "POST /webhook/jira?user_id=zhangchaoyang&user_key=zhangchaoyang HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512028395178,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/128122/comment/58527",
    "id": "58527",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=cuidanyang",
      "name": "cuidanyang",
      "key": "cuidanyang",
      "emailAddress": "cuidanyang@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5d14\u4e39\u9633",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u65b0\u5e73\u53f0\u5df2\u4e0a\u7ebf",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=cuidanyang",
      "name": "cuidanyang",
      "key": "cuidanyang",
      "emailAddress": "cuidanyang@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5d14\u4e39\u9633",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T15:53:15.178+0800",
    "updated": "2017-11-30T15:53:15.178+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={'timestamp': 1512028395178, 'webhookEvent': 'comment_created', 'comment': {'self': 'https://jira.bytedance.com/rest/api/2/issue/128122/comment/58527', 'id': '58527', 'author': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=cuidanyang', 'name': 'cuidanyang', 'key': 'cuidanyang', 'emailAddress': 'cuidanyang@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=10122', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122'}, 'displayName': '崔丹阳', 'active': True, 'timeZone': 'PRC'}, 'body': '新平台已上线', 'updateAuthor': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=cuidanyang', 'name': 'cuidanyang', 'key': 'cuidanyang', 'emailAddress': 'cuidanyang@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=10122', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122'}, 'displayName': '崔丹阳', 'active': True, 'timeZone': 'PRC'}, 'created': '2017-11-30T15:53:15.178+0800', 'updated': '2017-11-30T15:53:15.178+0800'}}
 exception='NoneType' object has no attribute 'get'
 trace=Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

INFO:root:msg: {}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 40035, 'errmsg': '不合法的参数'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 07:53:15] "POST /webhook/jira?user_id=cuidanyang&user_key=cuidanyang HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512028437108,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/125762/comment/58528",
    "id": "58528",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=jiatongbin",
      "name": "jiatongbin",
      "key": "jiatongbin",
      "emailAddress": "jiatongbin@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u8d3e\u540c\u5f6c",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010\u63d0\u6d4b\u529f\u80fd\u3011\r\n\u5185\u6d4b\u9700\u6c42\r\n\u3010\u5206\u652f\u3011\r\n2.9.0_feedback\r\n\r\n\u3010\u7ec6\u8282\u63cf\u8ff0 &\u98ce\u9669\u63cf\u8ff0\u3011\r\n1 local_test \u9ed8\u8ba4\u4e0d\u51fa\uff0c\u5728\u8bbe\u7f6e\u9875\u9762\u6709\u5f00\u5173\r\n2 outer_test_*\u6e20\u9053\u51fa\r\n3 \u70b9\u51fb\u76f4\u63a5\u8fdb\u5165\u53cd\u9988\u9875\u9762",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=jiatongbin",
      "name": "jiatongbin",
      "key": "jiatongbin",
      "emailAddress": "jiatongbin@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u8d3e\u540c\u5f6c",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T15:53:57.108+0800",
    "updated": "2017-11-30T15:53:57.108+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={'timestamp': 1512028437108, 'webhookEvent': 'comment_created', 'comment': {'self': 'https://jira.bytedance.com/rest/api/2/issue/125762/comment/58528', 'id': '58528', 'author': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=jiatongbin', 'name': 'jiatongbin', 'key': 'jiatongbin', 'emailAddress': 'jiatongbin@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=10122', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122'}, 'displayName': '贾同彬', 'active': True, 'timeZone': 'PRC'}, 'body': '【提测功能】\r\n内测需求\r\n【分支】\r\n2.9.0_feedback\r\n\r\n【细节描述 &风险描述】\r\n1 local_test 默认不出，在设置页面有开关\r\n2 outer_test_*渠道出\r\n3 点击直接进入反馈页面', 'updateAuthor': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=jiatongbin', 'name': 'jiatongbin', 'key': 'jiatongbin', 'emailAddress': 'jiatongbin@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=10122', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122'}, 'displayName': '贾同彬', 'active': True, 'timeZone': 'PRC'}, 'created': '2017-11-30T15:53:57.108+0800', 'updated': '2017-11-30T15:53:57.108+0800'}}
 exception='NoneType' object has no attribute 'get'
 trace=Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

INFO:root:msg: {}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 40035, 'errmsg': '不合法的参数'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 07:53:57] "POST /webhook/jira?user_id=jiatongbin&user_key=jiatongbin HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512028502295,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/126023/comment/58529",
    "id": "58529",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=wenyang.1024",
      "name": "wenyang.1024",
      "key": "wenyang.1024",
      "emailAddress": "wenyang.1024@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "wenyang.1024",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u65b0\u5efa\u5e7f\u544a\u7684\u9875\u9762\u662f\u6ca1\u6709ad_id\u7684\uff0c\u65e0\u6cd5\u6d4b\u8bd5suggest_bid\u3002\u6807\u6746\u5efa\u8bae\u51fa\u4ef7\u7684\u903b\u8f91\u4ee3\u7801\u5df2\u7ecf\u5b8c\u6210\uff0c\u6b63\u5728\u7b49\u5f85pm\u7684\u51b3\u7b56\u3002",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=wenyang.1024",
      "name": "wenyang.1024",
      "key": "wenyang.1024",
      "emailAddress": "wenyang.1024@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "wenyang.1024",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T15:55:02.295+0800",
    "updated": "2017-11-30T15:55:02.295+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={'timestamp': 1512028502295, 'webhookEvent': 'comment_created', 'comment': {'self': 'https://jira.bytedance.com/rest/api/2/issue/126023/comment/58529', 'id': '58529', 'author': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=wenyang.1024', 'name': 'wenyang.1024', 'key': 'wenyang.1024', 'emailAddress': 'wenyang.1024@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=10122', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122'}, 'displayName': 'wenyang.1024', 'active': True, 'timeZone': 'PRC'}, 'body': '新建广告的页面是没有ad_id的，无法测试suggest_bid。标杆建议出价的逻辑代码已经完成，正在等待pm的决策。', 'updateAuthor': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=wenyang.1024', 'name': 'wenyang.1024', 'key': 'wenyang.1024', 'emailAddress': 'wenyang.1024@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=10122', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122'}, 'displayName': 'wenyang.1024', 'active': True, 'timeZone': 'PRC'}, 'created': '2017-11-30T15:55:02.295+0800', 'updated': '2017-11-30T15:55:02.295+0800'}}
 exception='NoneType' object has no attribute 'get'
 trace=Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

INFO:root:msg: {}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 40035, 'errmsg': '不合法的参数'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 07:55:02] "POST /webhook/jira?user_id=wenyang.1024&user_key=wenyang.1024 HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512028759661,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/126025/comment/58530",
    "id": "58530",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=wenyang.1024",
      "name": "wenyang.1024",
      "key": "wenyang.1024",
      "emailAddress": "wenyang.1024@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "wenyang.1024",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u6b63\u5728\u68b3\u7406\u8d28\u91cf\u5ea6\u7684\u903b\u8f91\uff0c\u4e0b\u4e00\u4e2aversion\u5c06\u52a0\u5165cvr\u8bc4\u5206\u6807\u51c6\uff0c\u603b\u7684\u8d28\u91cf\u5ea6\u8bc4\u5206\u5c06\u8fed\u4ee3\u4e3aweb\u3001ctr\u3001cvr\u7684\u4e09\u8005\u6743\u8861score\u3002",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=wenyang.1024",
      "name": "wenyang.1024",
      "key": "wenyang.1024",
      "emailAddress": "wenyang.1024@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "wenyang.1024",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T15:59:19.661+0800",
    "updated": "2017-11-30T15:59:19.661+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={'timestamp': 1512028759661, 'webhookEvent': 'comment_created', 'comment': {'self': 'https://jira.bytedance.com/rest/api/2/issue/126025/comment/58530', 'id': '58530', 'author': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=wenyang.1024', 'name': 'wenyang.1024', 'key': 'wenyang.1024', 'emailAddress': 'wenyang.1024@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=10122', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122'}, 'displayName': 'wenyang.1024', 'active': True, 'timeZone': 'PRC'}, 'body': '正在梳理质量度的逻辑，下一个version将加入cvr评分标准，总的质量度评分将迭代为web、ctr、cvr的三者权衡score。', 'updateAuthor': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=wenyang.1024', 'name': 'wenyang.1024', 'key': 'wenyang.1024', 'emailAddress': 'wenyang.1024@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=10122', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122'}, 'displayName': 'wenyang.1024', 'active': True, 'timeZone': 'PRC'}, 'created': '2017-11-30T15:59:19.661+0800', 'updated': '2017-11-30T15:59:19.661+0800'}}
 exception='NoneType' object has no attribute 'get'
 trace=Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

INFO:root:msg: {}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 40035, 'errmsg': '不合法的参数'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 07:59:19] "POST /webhook/jira?user_id=wenyang.1024&user_key=wenyang.1024 HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512028880570,
  "webhookEvent": "comment_updated",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/125764/comment/58414",
    "id": "58414",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=liudongdong",
      "name": "liudongdong",
      "key": "liudongdong",
      "emailAddress": "liudongdong@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=liudongdong&avatarId=11324",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=liudongdong&avatarId=11324",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=liudongdong&avatarId=11324",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=liudongdong&avatarId=11324"
      },
      "displayName": "\u5218\u4e1c\u4e1c",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010\u63d0\u6d4b\u529f\u80fd\u3011 \r\n1. \u89c6\u9891Feed\uff0ccell\u5361\u7247AB\r\n2. Feed\uff0ccell\u5c01\u9762\u7b97\u8272\r\n3. \u540c\u57ceFeed\uff0c\u663e\u793a\u5730\u7406\u4f4d\u7f6ePOI\u540d\u79f0\r\n\r\n\u3010\u5206\u652f\u3011 \r\nfeature/2.9.0_feed_dd\r\n\r\n\u3010\u7ec6\u8282\u63cf\u8ff0&\u98ce\u9669\u63d0\u793a\u3011 \u90ed\u6c5f\u6d9b  doing\r\n1. \u89c6\u9891Feed\uff0ccell\u5361\u7247AB\r\n    \u53ea\u5728\u89c6\u9891Feed\u751f\u6548\uff0c\u5305\u542b\uff1a\u5e7f\u544a&\u89c6\u9891\r\n\r\n    \u89c6\u9891\uff1a\u89c6\u9891item\u589e\u52a0\u5b57\u6bb5cell_style\uff0c\u8868\u793a\u6837\u5f0fAB\r\n    \u5e7f\u544a\uff1a\u89c6\u9891item\u589e\u52a0\u5b57\u6bb5cell_style\uff0c\u8868\u793a\u6837\u5f0fAB\r\n    cell_style\u6574\u578b\u503c\uff1a0\u4ee3\u8868\u7ebf\u4e0a\u6837\u5f0f\u30011\u4ee3\u8868zeplin\u7a3f\u5b50\"feed_AB_01_01\"\u6837\u5f0f\u30012\u4ee3\u8868zeplin\u7a3f\u5b50\"feed_AB_01_02\"\u6837\u5f0f\u30013\u4ee3\u8868zeplin\u7a3f\u5b50\"feed_AB_02_01\"\u6837\u5f0f\r\n\r\n2. Feed\uff0ccell\u5c01\u9762\u7b97\u8272\r\n    \u5728\u89c6\u9891Feed\u3001\u540c\u57ceFeed\u3001\u5173\u6ce8Feed\u3001\u4e2a\u4ebaprofile\u3001\u4ed6\u4ebaprofile\u751f\u6548\uff0c\u5305\u542b\uff1a\u89c6\u9891\u3001\u5e7f\u544a\u3001\u6d3b\u52a8\u3001\u76f4\u64ad\r\n    \u989c\u8272\u503c\u7531\u540e\u53f0\u8ba1\u7b97\u8fd4\u56de\u63a7\u5236\r\n\r\n    \u89c6\u9891\uff1a\u89c6\u9891item\u589e\u52a0\u5b57\u6bb5video.cover.avg_color\u8868\u793a\u989c\u8272\u503c\r\n    \u5e7f\u544a\uff1a\u989c\u8272\u503c\u672c\u5730\u5199\u6b7b\"CCCCCC\"\r\n    \u6d3b\u52a8\uff1a\u6d3b\u52a8item\u589e\u52a0\u5b57\u6bb5avg_color\u8868\u793a\u989c\u8272\u503c\r\n    \u76f4\u64ad\uff1a\u76f4\u64aditem\u589e\u52a0cover.avg_color\u8868\u793a\u989c\u8272\u503c\r\n\r\n3. \u540c\u57ceFeed\uff0c\u663e\u793a\u5730\u7406\u4f4d\u7f6ePOI\u540d\u79f0 \u90ed\u6c5f\u6d9b  doing\r\n    \u53ea\u5728\u540c\u57ceFeed\u751f\u6548\uff0c\u5305\u542b\uff1a\u89c6\u9891\r\n    \u89c6\u9891item\u589e\u52a0\u5b57\u6bb5\uff1aposition\uff0c\u8868\u793a\u5730\u7406\u4f4d\u7f6e\u4fe1\u606f\r\n\r\n4. \u63a5\u53e3\u6682\u65f6\u672a\u4e0a\u7ebf\uff0c\u8bf7\u54a8\u8be2 @\u6768\u6d9b \r\n    https://code.byted.org/hotsoon/idl/merge_requests/312/diffs",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=guojiangtao",
      "name": "guojiangtao",
      "key": "guojiangtao",
      "emailAddress": "guojiangtao@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11141",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11141",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11141",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11141"
      },
      "displayName": "guojiangtao",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-29T20:49:34.000+0800",
    "updated": "2017-11-30T16:01:20.570+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 08:01:20] "POST /webhook/jira?user_id=guojiangtao&user_key=guojiangtao HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512028909655,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/122788/comment/58531",
    "id": "58531",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=dudapeng",
      "name": "dudapeng",
      "key": "dudapeng",
      "emailAddress": "dudapeng@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u675c\u5927\u9e4f",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "webview\u7684\u5e95\u8272\u9732\u51fa\u6765\u4e86\uff0c\u9875\u9762\u9ad8\u5ea6\u4e0d\u591f\u4e86",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=dudapeng",
      "name": "dudapeng",
      "key": "dudapeng",
      "emailAddress": "dudapeng@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u675c\u5927\u9e4f",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T16:01:49.655+0800",
    "updated": "2017-11-30T16:01:49.655+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={'timestamp': 1512028909655, 'webhookEvent': 'comment_created', 'comment': {'self': 'https://jira.bytedance.com/rest/api/2/issue/122788/comment/58531', 'id': '58531', 'author': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=dudapeng', 'name': 'dudapeng', 'key': 'dudapeng', 'emailAddress': 'dudapeng@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=10122', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122'}, 'displayName': '杜大鹏', 'active': True, 'timeZone': 'PRC'}, 'body': 'webview的底色露出来了，页面高度不够了', 'updateAuthor': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=dudapeng', 'name': 'dudapeng', 'key': 'dudapeng', 'emailAddress': 'dudapeng@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=10122', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122'}, 'displayName': '杜大鹏', 'active': True, 'timeZone': 'PRC'}, 'created': '2017-11-30T16:01:49.655+0800', 'updated': '2017-11-30T16:01:49.655+0800'}}
 exception='NoneType' object has no attribute 'get'
 trace=Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

INFO:root:msg: {}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 40035, 'errmsg': '不合法的参数'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 08:01:49] "POST /webhook/jira?user_id=dudapeng&user_key=dudapeng HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512029001977,
  "webhookEvent": "comment_updated",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/125762/comment/58214",
    "id": "58214",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=pengzipei",
      "name": "pengzipei",
      "key": "pengzipei",
      "emailAddress": "pengzipei@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5f6d\u5b50\u6c9b",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010\u63d0\u6d4b\u529f\u80fd\u3011\u90ed\u6c5f\u6d9b done\r\n\u89c6\u9891Feed-Feed\u5361\u7247\u6539\u7248\r\n\u3010\u5206\u652f\u3011\r\nlive_2.9_feed_card_update\r\n\u3010\u7ec6\u8282\u63cf\u8ff0&\u98ce\u9669\u63d0\u793a\u3011\r\n\u89c6\u9891Feed\u4e0b\uff0cfeed\u548c\u5e7f\u544acard\u67093\u79cd\u6837\u5f0f\uff0c\u5206\u522b\u662f\r\n1\u3010\u5c0f\u6807\u9898+\u5c0f\u5934\u50cf\u3011\r\n2\u3010\u5927\u6807\u9898+\u5c0f\u5934\u50cf\u3011\r\n3\u3010\u5927\u6807\u9898+\u5927\u5934\u50cf\u3011\uff0c\u8bc4\u8bba\u662f\u5426\u5c55\u793a\u7531\u540e\u7aef\u63a7\u5236\r\n\u5b57\u6bb5\u662fmedia\u4e0b\u7684cell_style",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=guojiangtao",
      "name": "guojiangtao",
      "key": "guojiangtao",
      "emailAddress": "guojiangtao@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11141",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11141",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11141",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11141"
      },
      "displayName": "guojiangtao",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-28T22:30:30.000+0800",
    "updated": "2017-11-30T16:03:21.977+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 08:03:22] "POST /webhook/jira?user_id=guojiangtao&user_key=guojiangtao HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512029031614,
  "webhookEvent": "comment_updated",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/125762/comment/58214",
    "id": "58214",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=pengzipei",
      "name": "pengzipei",
      "key": "pengzipei",
      "emailAddress": "pengzipei@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5f6d\u5b50\u6c9b",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010\u63d0\u6d4b\u529f\u80fd\u3011\u90ed\u6c5f\u6d9b done \u5e7f\u544a\u6837\u5f0f\u6ca1\u53d8\r\n\u89c6\u9891Feed-Feed\u5361\u7247\u6539\u7248\r\n\u3010\u5206\u652f\u3011\r\nlive_2.9_feed_card_update\r\n\u3010\u7ec6\u8282\u63cf\u8ff0&\u98ce\u9669\u63d0\u793a\u3011\r\n\u89c6\u9891Feed\u4e0b\uff0cfeed\u548c\u5e7f\u544acard\u67093\u79cd\u6837\u5f0f\uff0c\u5206\u522b\u662f\r\n1\u3010\u5c0f\u6807\u9898+\u5c0f\u5934\u50cf\u3011\r\n2\u3010\u5927\u6807\u9898+\u5c0f\u5934\u50cf\u3011\r\n3\u3010\u5927\u6807\u9898+\u5927\u5934\u50cf\u3011\uff0c\u8bc4\u8bba\u662f\u5426\u5c55\u793a\u7531\u540e\u7aef\u63a7\u5236\r\n\u5b57\u6bb5\u662fmedia\u4e0b\u7684cell_style",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=guojiangtao",
      "name": "guojiangtao",
      "key": "guojiangtao",
      "emailAddress": "guojiangtao@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11141",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11141",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11141",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11141"
      },
      "displayName": "guojiangtao",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-28T22:30:30.000+0800",
    "updated": "2017-11-30T16:03:51.614+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 08:03:51] "POST /webhook/jira?user_id=guojiangtao&user_key=guojiangtao HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512029113946,
  "webhookEvent": "comment_updated",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/125762/comment/58422",
    "id": "58422",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=pengzipei",
      "name": "pengzipei",
      "key": "pengzipei",
      "emailAddress": "pengzipei@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5f6d\u5b50\u6c9b",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010\u63d0\u6d4b\u529f\u80fd\u3011@\u5434\u8fce\u5bbe\r\n\u89c6\u9891Feed-\u5c01\u9762\u6539\u8272\r\n\u3010\u5206\u652f\u3011\r\nlive_2.9_feed_cover_color\r\n\u3010\u7ec6\u8282\u63cf\u8ff0\u3011\r\n\u5361\u7247\uff1a\u89c6\u9891\u3001\u5e7f\u544a\u3001\u6d3b\u52a8\u3001\u76f4\u64ad\u90fd\u9700\u8981\u8ba1\u7b97\u8272\u503c\r\n\u573a\u666f\uff1a\u89c6\u9891Feed\u3001\u5173\u6ce8Feed\u3001\u540c\u57ceFeed\u3001\u4e2a\u4ebaprofile\u3001\u4ed6\u4ebaprofile\uff1b\u76f4\u64adfeed\u4e0d\u4e0a\u7ebf\r\n\u5e7f\u544a\u5361\u7247\u53ca\u5176\u4ed6\u5361\u7247avgColor\u4e0d\u5b58\u5728\u7684\u65f6\u5019\uff0c\u56fa\u5b9a\u4e3a\u989c\u8272\uff1a\u7070\u8272 CCCCCC",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=guojiangtao",
      "name": "guojiangtao",
      "key": "guojiangtao",
      "emailAddress": "guojiangtao@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11141",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11141",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11141",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11141"
      },
      "displayName": "guojiangtao",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-29T21:43:05.000+0800",
    "updated": "2017-11-30T16:05:13.946+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 08:05:14] "POST /webhook/jira?user_id=guojiangtao&user_key=guojiangtao HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512029153798,
  "webhookEvent": "comment_updated",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/125764/comment/58414",
    "id": "58414",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=liudongdong",
      "name": "liudongdong",
      "key": "liudongdong",
      "emailAddress": "liudongdong@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=liudongdong&avatarId=11324",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=liudongdong&avatarId=11324",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=liudongdong&avatarId=11324",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=liudongdong&avatarId=11324"
      },
      "displayName": "\u5218\u4e1c\u4e1c",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010\u63d0\u6d4b\u529f\u80fd\u3011 \r\n1. \u89c6\u9891Feed\uff0ccell\u5361\u7247AB\r\n2. Feed\uff0ccell\u5c01\u9762\u7b97\u8272\r\n3. \u540c\u57ceFeed\uff0c\u663e\u793a\u5730\u7406\u4f4d\u7f6ePOI\u540d\u79f0\r\n\r\n\u3010\u5206\u652f\u3011 \r\nfeature/2.9.0_feed_dd\r\n\r\n\u3010\u7ec6\u8282\u63cf\u8ff0&\u98ce\u9669\u63d0\u793a\u3011 \r\n1. \u89c6\u9891Feed\uff0ccell\u5361\u7247AB\r\n    \u53ea\u5728\u89c6\u9891Feed\u751f\u6548\uff0c\u5305\u542b\uff1a\u5e7f\u544a&\u89c6\u9891\r\n\r\n    \u89c6\u9891\uff1a\u89c6\u9891item\u589e\u52a0\u5b57\u6bb5cell_style\uff0c\u8868\u793a\u6837\u5f0fAB\r\n    \u5e7f\u544a\uff1a\u89c6\u9891item\u589e\u52a0\u5b57\u6bb5cell_style\uff0c\u8868\u793a\u6837\u5f0fAB\r\n    cell_style\u6574\u578b\u503c\uff1a0\u4ee3\u8868\u7ebf\u4e0a\u6837\u5f0f\u30011\u4ee3\u8868zeplin\u7a3f\u5b50\"feed_AB_01_01\"\u6837\u5f0f\u30012\u4ee3\u8868zeplin\u7a3f\u5b50\"feed_AB_01_02\"\u6837\u5f0f\u30013\u4ee3\u8868zeplin\u7a3f\u5b50\"feed_AB_02_01\"\u6837\u5f0f\r\n\r\n2. Feed\uff0ccell\u5c01\u9762\u7b97\u8272\r\n    \u5728\u89c6\u9891Feed\u3001\u540c\u57ceFeed\u3001\u5173\u6ce8Feed\u3001\u4e2a\u4ebaprofile\u3001\u4ed6\u4ebaprofile\u751f\u6548\uff0c\u5305\u542b\uff1a\u89c6\u9891\u3001\u5e7f\u544a\u3001\u6d3b\u52a8\u3001\u76f4\u64ad\r\n    \u989c\u8272\u503c\u7531\u540e\u53f0\u8ba1\u7b97\u8fd4\u56de\u63a7\u5236\r\n\r\n    \u89c6\u9891\uff1a\u89c6\u9891item\u589e\u52a0\u5b57\u6bb5video.cover.avg_color\u8868\u793a\u989c\u8272\u503c\r\n    \u5e7f\u544a\uff1a\u989c\u8272\u503c\u672c\u5730\u5199\u6b7b\"CCCCCC\"\r\n    \u6d3b\u52a8\uff1a\u6d3b\u52a8item\u589e\u52a0\u5b57\u6bb5avg_color\u8868\u793a\u989c\u8272\u503c\r\n    \u76f4\u64ad\uff1a\u76f4\u64aditem\u589e\u52a0cover.avg_color\u8868\u793a\u989c\u8272\u503c\r\n\r\n3. \u540c\u57ceFeed\uff0c\u663e\u793a\u5730\u7406\u4f4d\u7f6ePOI\u540d\u79f0\r\n    \u53ea\u5728\u540c\u57ceFeed\u751f\u6548\uff0c\u5305\u542b\uff1a\u89c6\u9891\r\n    \u89c6\u9891item\u589e\u52a0\u5b57\u6bb5\uff1aposition\uff0c\u8868\u793a\u5730\u7406\u4f4d\u7f6e\u4fe1\u606f\r\n\r\n4. \u63a5\u53e3\u6682\u65f6\u672a\u4e0a\u7ebf\uff0c\u8bf7\u54a8\u8be2 @\u6768\u6d9b \r\n    https://code.byted.org/hotsoon/idl/merge_requests/312/diffs",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=guojiangtao",
      "name": "guojiangtao",
      "key": "guojiangtao",
      "emailAddress": "guojiangtao@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11141",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11141",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11141",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11141"
      },
      "displayName": "guojiangtao",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-29T20:49:34.000+0800",
    "updated": "2017-11-30T16:05:53.798+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 08:05:53] "POST /webhook/jira?user_id=guojiangtao&user_key=guojiangtao HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512029221747,
  "webhookEvent": "comment_updated",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/125764/comment/58414",
    "id": "58414",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=liudongdong",
      "name": "liudongdong",
      "key": "liudongdong",
      "emailAddress": "liudongdong@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=liudongdong&avatarId=11324",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=liudongdong&avatarId=11324",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=liudongdong&avatarId=11324",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=liudongdong&avatarId=11324"
      },
      "displayName": "\u5218\u4e1c\u4e1c",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010\u63d0\u6d4b\u529f\u80fd\u3011 ---@\u5f20\u5b81\r\n1. \u89c6\u9891Feed\uff0ccell\u5361\u7247AB\r\n2. Feed\uff0ccell\u5c01\u9762\u7b97\u8272\r\n3. \u540c\u57ceFeed\uff0c\u663e\u793a\u5730\u7406\u4f4d\u7f6ePOI\u540d\u79f0\r\n\r\n\u3010\u5206\u652f\u3011 \r\nfeature/2.9.0_feed_dd\r\n\r\n\u3010\u7ec6\u8282\u63cf\u8ff0&\u98ce\u9669\u63d0\u793a\u3011 \r\n1. \u89c6\u9891Feed\uff0ccell\u5361\u7247AB\r\n    \u53ea\u5728\u89c6\u9891Feed\u751f\u6548\uff0c\u5305\u542b\uff1a\u5e7f\u544a&\u89c6\u9891\r\n\r\n    \u89c6\u9891\uff1a\u89c6\u9891item\u589e\u52a0\u5b57\u6bb5cell_style\uff0c\u8868\u793a\u6837\u5f0fAB\r\n    \u5e7f\u544a\uff1a\u89c6\u9891item\u589e\u52a0\u5b57\u6bb5cell_style\uff0c\u8868\u793a\u6837\u5f0fAB\r\n    cell_style\u6574\u578b\u503c\uff1a0\u4ee3\u8868\u7ebf\u4e0a\u6837\u5f0f\u30011\u4ee3\u8868zeplin\u7a3f\u5b50\"feed_AB_01_01\"\u6837\u5f0f\u30012\u4ee3\u8868zeplin\u7a3f\u5b50\"feed_AB_01_02\"\u6837\u5f0f\u30013\u4ee3\u8868zeplin\u7a3f\u5b50\"feed_AB_02_01\"\u6837\u5f0f\r\n\r\n2. Feed\uff0ccell\u5c01\u9762\u7b97\u8272\r\n    \u5728\u89c6\u9891Feed\u3001\u540c\u57ceFeed\u3001\u5173\u6ce8Feed\u3001\u4e2a\u4ebaprofile\u3001\u4ed6\u4ebaprofile\u751f\u6548\uff0c\u5305\u542b\uff1a\u89c6\u9891\u3001\u5e7f\u544a\u3001\u6d3b\u52a8\u3001\u76f4\u64ad\r\n    \u989c\u8272\u503c\u7531\u540e\u53f0\u8ba1\u7b97\u8fd4\u56de\u63a7\u5236\r\n\r\n    \u89c6\u9891\uff1a\u89c6\u9891item\u589e\u52a0\u5b57\u6bb5video.cover.avg_color\u8868\u793a\u989c\u8272\u503c\r\n    \u5e7f\u544a\uff1a\u989c\u8272\u503c\u672c\u5730\u5199\u6b7b\"CCCCCC\"\r\n    \u6d3b\u52a8\uff1a\u6d3b\u52a8item\u589e\u52a0\u5b57\u6bb5avg_color\u8868\u793a\u989c\u8272\u503c\r\n    \u76f4\u64ad\uff1a\u76f4\u64aditem\u589e\u52a0cover.avg_color\u8868\u793a\u989c\u8272\u503c\r\n\r\n3. \u540c\u57ceFeed\uff0c\u663e\u793a\u5730\u7406\u4f4d\u7f6ePOI\u540d\u79f0\r\n    \u53ea\u5728\u540c\u57ceFeed\u751f\u6548\uff0c\u5305\u542b\uff1a\u89c6\u9891\r\n    \u89c6\u9891item\u589e\u52a0\u5b57\u6bb5\uff1aposition\uff0c\u8868\u793a\u5730\u7406\u4f4d\u7f6e\u4fe1\u606f\r\n\r\n4. \u63a5\u53e3\u6682\u65f6\u672a\u4e0a\u7ebf\uff0c\u8bf7\u54a8\u8be2 @\u6768\u6d9b \r\n    https://code.byted.org/hotsoon/idl/merge_requests/312/diffs",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=houyuanyuan",
      "name": "houyuanyuan",
      "key": "houyuanyuan",
      "emailAddress": "houyuanyuan@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=houyuanyuan&avatarId=11240",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=houyuanyuan&avatarId=11240",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=houyuanyuan&avatarId=11240",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=houyuanyuan&avatarId=11240"
      },
      "displayName": "\u4faf\u5a9b\u5a9b",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-29T20:49:34.000+0800",
    "updated": "2017-11-30T16:07:01.747+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 08:07:01] "POST /webhook/jira?user_id=houyuanyuan&user_key=houyuanyuan HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512029261451,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/121970/comment/58532",
    "id": "58532",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=xukai.ken",
      "name": "xukai.ken",
      "key": "xukai.ken",
      "emailAddress": "xukai.ken@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5f90\u6977",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "11.30 \u5f00\u53d1\u5b8c\u6210\uff0c\u63d0\u6d4b\u4e2d\uff0c\u672a\u4e0a\u7ebf",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=xukai.ken",
      "name": "xukai.ken",
      "key": "xukai.ken",
      "emailAddress": "xukai.ken@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5f90\u6977",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T16:07:41.451+0800",
    "updated": "2017-11-30T16:07:41.451+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={'timestamp': 1512029261451, 'webhookEvent': 'comment_created', 'comment': {'self': 'https://jira.bytedance.com/rest/api/2/issue/121970/comment/58532', 'id': '58532', 'author': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=xukai.ken', 'name': 'xukai.ken', 'key': 'xukai.ken', 'emailAddress': 'xukai.ken@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=10122', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122'}, 'displayName': '徐楷', 'active': True, 'timeZone': 'PRC'}, 'body': '11.30 开发完成，提测中，未上线', 'updateAuthor': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=xukai.ken', 'name': 'xukai.ken', 'key': 'xukai.ken', 'emailAddress': 'xukai.ken@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=10122', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122'}, 'displayName': '徐楷', 'active': True, 'timeZone': 'PRC'}, 'created': '2017-11-30T16:07:41.451+0800', 'updated': '2017-11-30T16:07:41.451+0800'}}
 exception='NoneType' object has no attribute 'get'
 trace=Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

INFO:root:msg: {}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 40035, 'errmsg': '不合法的参数'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 08:07:41] "POST /webhook/jira?user_id=xukai.ken&user_key=xukai.ken HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512029285681,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/126034/comment/58533",
    "id": "58533",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=cuidanyang",
      "name": "cuidanyang",
      "key": "cuidanyang",
      "emailAddress": "cuidanyang@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5d14\u4e39\u9633",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u6279\u91cf\u4fee\u6539\u529f\u80fd\u5f00\u53d1\u4e2d",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=cuidanyang",
      "name": "cuidanyang",
      "key": "cuidanyang",
      "emailAddress": "cuidanyang@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5d14\u4e39\u9633",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T16:08:05.681+0800",
    "updated": "2017-11-30T16:08:05.681+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={'timestamp': 1512029285681, 'webhookEvent': 'comment_created', 'comment': {'self': 'https://jira.bytedance.com/rest/api/2/issue/126034/comment/58533', 'id': '58533', 'author': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=cuidanyang', 'name': 'cuidanyang', 'key': 'cuidanyang', 'emailAddress': 'cuidanyang@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=10122', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122'}, 'displayName': '崔丹阳', 'active': True, 'timeZone': 'PRC'}, 'body': '批量修改功能开发中', 'updateAuthor': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=cuidanyang', 'name': 'cuidanyang', 'key': 'cuidanyang', 'emailAddress': 'cuidanyang@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=10122', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122'}, 'displayName': '崔丹阳', 'active': True, 'timeZone': 'PRC'}, 'created': '2017-11-30T16:08:05.681+0800', 'updated': '2017-11-30T16:08:05.681+0800'}}
 exception='NoneType' object has no attribute 'get'
 trace=Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

INFO:root:msg: {}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 40035, 'errmsg': '不合法的参数'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 08:08:05] "POST /webhook/jira?user_id=cuidanyang&user_key=cuidanyang HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512029315528,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/126032/comment/58534",
    "id": "58534",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=cuidanyang",
      "name": "cuidanyang",
      "key": "cuidanyang",
      "emailAddress": "cuidanyang@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5d14\u4e39\u9633",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u5f00\u53d1\u5b8c\u6210\uff0cPM\u9a8c\u6536\u4e2d",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=cuidanyang",
      "name": "cuidanyang",
      "key": "cuidanyang",
      "emailAddress": "cuidanyang@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5d14\u4e39\u9633",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T16:08:35.528+0800",
    "updated": "2017-11-30T16:08:35.528+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={'timestamp': 1512029315528, 'webhookEvent': 'comment_created', 'comment': {'self': 'https://jira.bytedance.com/rest/api/2/issue/126032/comment/58534', 'id': '58534', 'author': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=cuidanyang', 'name': 'cuidanyang', 'key': 'cuidanyang', 'emailAddress': 'cuidanyang@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=10122', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122'}, 'displayName': '崔丹阳', 'active': True, 'timeZone': 'PRC'}, 'body': '开发完成，PM验收中', 'updateAuthor': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=cuidanyang', 'name': 'cuidanyang', 'key': 'cuidanyang', 'emailAddress': 'cuidanyang@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=10122', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122'}, 'displayName': '崔丹阳', 'active': True, 'timeZone': 'PRC'}, 'created': '2017-11-30T16:08:35.528+0800', 'updated': '2017-11-30T16:08:35.528+0800'}}
 exception='NoneType' object has no attribute 'get'
 trace=Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

INFO:root:msg: {}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 40035, 'errmsg': '不合法的参数'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 08:08:35] "POST /webhook/jira?user_id=cuidanyang&user_key=cuidanyang HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512029329982,
  "webhookEvent": "comment_updated",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/125762/comment/58448",
    "id": "58448",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=wangzhongjie",
      "name": "wangzhongjie",
      "key": "wangzhongjie",
      "emailAddress": "wangzhongjie@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "wangzhongjie",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010\u63d0\u6d4b\u529f\u80fd\u3011 \u90ed\u6c5f\u6d9b doing\r\n\u7ea2\u5305\u4f18\u5316\r\n\u3010\u5206\u652f\u3011\r\nlive_2.9.0_redpacket\r\n\u3010\u7ec6\u8282\u63cf\u8ff0&\u98ce\u9669\u63d0\u793a\u3011\r\n1\u3001\u7ea2\u5305\u9886\u53d6\u4ea4\u4e92\u589e\u52a0\u5206\u4eab\uff1aABCD\u56db\u79cd\u7b56\u7565\r\n2\u3001\u7ea2\u5305\u51fa\u73b0\u65f6\u4e0d\u51fa\u5de6\u6ed1\u8fdbprofile\u9875\u7684\u65b0\u624b\u5f15\u5bfc\uff1a\u65b0\u624b\u5f15\u5bfc\u5148\u51fa\u73b0\u4e0d\u51fa\u7ea2\u5305\uff0c\u7ea2\u5305\u51fa\u73b0\uff0c\u4e0d\u51fa\u65b0\u624b\u5f15\u5bfc\r\n3\u3001\u542f\u52a84\u79cd\u5f15\u5bfcab\uff1a\u53bb\u6389\u4e86\u5176\u4ed6\u4e24\u79cd\u5f15\u5bfc\uff0c\uff081\uff09\u9996\u6b21\u542f\u52a8\u65f6\uff0cfeed\u6389\u7ea2\u5305\uff082\uff09\u5176\u4ed6\u60c5\u51b5\u5747\u5c55\u793a\u201c\u62cd\u89c6\u9891\u9886\u7ea2\u5305\u201d\u7684\u6c14\u6ce1\u5f15\u5bfc\r\n4\u3001\u70b9\u51fb\u975e\u7ea2\u5305\u533a\u57df\u652f\u6301\u6d88\u9664\u7ea2\u5305\uff1a\u8fd9\u4e2a\u53ea\u9488\u5bf9\u672a\u5f00\u5305\u7684\u7ea2\u5305\uff0c\u5176\u4ed6\u7684\u7ea2\u5305\u4f1a\u5f39\u786e\u8ba4\u5f39\u7a97\r\n5\u3001\u672a\u767b\u5f55\u6001\u5f53\u65e5\u7ea2\u5305\u5c55\u73b0\u6b21\u6570\u670d\u52a1\u7aef\u53ef\u63a7\uff1a\uff081\uff09\u5f53\u65e5\u6700\u5927\u6b21\u6570\u8ba1\u6570\uff082\uff09\u6839\u636e\u5929\u6570\u5224\u65ad\u662f\u5426\u8fd8\u80fd\u5c55\u793a\r\n6\u3001\u57cb\u70b9\u6b63\u5728\u5f00\u53d1\uff0c\u7a0d\u540e\u8865\u4e0a\r\n\r\n",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=guojiangtao",
      "name": "guojiangtao",
      "key": "guojiangtao",
      "emailAddress": "guojiangtao@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11141",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11141",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11141",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11141"
      },
      "displayName": "guojiangtao",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T10:57:18.000+0800",
    "updated": "2017-11-30T16:08:49.982+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 08:08:50] "POST /webhook/jira?user_id=guojiangtao&user_key=guojiangtao HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512029342946,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
    "name": "shenweimin",
    "key": "shenweimin",
    "emailAddress": "shenweimin@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
    },
    "displayName": "shenweimin",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "113624",
    "self": "https://jira.bytedance.com/rest/api/2/issue/113624",
    "key": "BT-3",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10001",
        "id": "10001",
        "description": "gh.issue.story.desc",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11115&avatarType=issuetype",
        "name": "Story",
        "subtask": false,
        "avatarId": 11115
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": null,
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": null,
      "workratio": -1,
      "lastViewed": "2017-11-30T16:09:02.941+0800",
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-3/watchers",
        "watchCount": 2,
        "isWatching": true
      },
      "created": "2017-10-11T16:13:53.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": null,
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T16:09:02.946+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10345",
        "description": "This status is managed internally by JIRA Software",
        "iconUrl": "https://jira.bytedance.com/",
        "name": "Doing",
        "id": "10345",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/4",
          "id": 4,
          "key": "indeterminate",
          "colorName": "yellow",
          "name": "In Progress"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "\u963f\u6253\u53d1\u90a3\u8def\u4e0a\u770b\u5230\u4f60\u75af\u4e86\uff1b\u5361\u4e0a\u7684\u53d1\u65af\u8482\u82ac",
      "timetracking": {},
      "customfield_10005": null,
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "\u6d4b\u8bd5\u4e00\u4e2a\u5de5\u4f5c\u6d41",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [
        {
          "id": "113854",
          "key": "BT-8",
          "self": "https://jira.bytedance.com/rest/api/2/issue/113854",
          "fields": {
            "summary": "123123123123",
            "status": {
              "self": "https://jira.bytedance.com/rest/api/2/status/10317",
              "description": "This status is managed internally by JIRA Software",
              "iconUrl": "https://jira.bytedance.com/",
              "name": "hold",
              "id": "10317",
              "statusCategory": {
                "self": "https://jira.bytedance.com/rest/api/2/statuscategory/4",
                "id": 4,
                "key": "indeterminate",
                "colorName": "yellow",
                "name": "In Progress"
              }
            },
            "priority": {
              "self": "https://jira.bytedance.com/rest/api/2/priority/3",
              "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
              "name": "\u91cd\u8981",
              "id": "3"
            },
            "issuetype": {
              "self": "https://jira.bytedance.com/rest/api/2/issuetype/10103",
              "id": "10103",
              "description": "\u95ee\u9898\u7684\u5b50\u4efb\u52a1",
              "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11116&avatarType=issuetype",
              "name": "\u5b50\u4efb\u52a1",
              "subtask": true,
              "avatarId": 11116
            }
          }
        }
      ],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|hzzzer:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": null,
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 1,
        "total": 1,
        "comments": [
          {
            "self": "https://jira.bytedance.com/rest/api/2/issue/113624/comment/58535",
            "id": "58535",
            "author": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
              "name": "shenweimin",
              "key": "shenweimin",
              "emailAddress": "shenweimin@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
              },
              "displayName": "shenweimin",
              "active": true,
              "timeZone": "PRC"
            },
            "body": "shenweimin comment====",
            "updateAuthor": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
              "name": "shenweimin",
              "key": "shenweimin",
              "emailAddress": "shenweimin@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
              },
              "displayName": "shenweimin",
              "active": true,
              "timeZone": "PRC"
            },
            "created": "2017-11-30T16:09:02.000+0800",
            "updated": "2017-11-30T16:09:02.000+0800"
          }
        ]
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-3/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/113624/comment/58535",
    "id": "58535",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
      "name": "shenweimin",
      "key": "shenweimin",
      "emailAddress": "shenweimin@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "shenweimin",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "shenweimin comment====",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
      "name": "shenweimin",
      "key": "shenweimin",
      "emailAddress": "shenweimin@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "shenweimin",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T16:09:02.945+0800",
    "updated": "2017-11-30T16:09:02.945+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': 'shenweimin 在Story 【测试一个工作流】中添加了一条新评论', 'text': '#### shenweimin 在Story 【测试一个工作流】中添加了一条新评论 \n[点击查看详情](https://jira.bytedance.com/browse/BT-3)'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 0, 'errmsg': 'ok'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 08:09:03] "POST /webhook/jira?user_id=shenweimin&user_key=shenweimin HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512029342945,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/113624/comment/58535",
    "id": "58535",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
      "name": "shenweimin",
      "key": "shenweimin",
      "emailAddress": "shenweimin@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "shenweimin",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "shenweimin comment====",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
      "name": "shenweimin",
      "key": "shenweimin",
      "emailAddress": "shenweimin@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "shenweimin",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T16:09:02.945+0800",
    "updated": "2017-11-30T16:09:02.945+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={'timestamp': 1512029342945, 'webhookEvent': 'comment_created', 'comment': {'self': 'https://jira.bytedance.com/rest/api/2/issue/113624/comment/58535', 'id': '58535', 'author': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=shenweimin', 'name': 'shenweimin', 'key': 'shenweimin', 'emailAddress': 'shenweimin@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=10122', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122'}, 'displayName': 'shenweimin', 'active': True, 'timeZone': 'PRC'}, 'body': 'shenweimin comment====', 'updateAuthor': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=shenweimin', 'name': 'shenweimin', 'key': 'shenweimin', 'emailAddress': 'shenweimin@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=10122', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122'}, 'displayName': 'shenweimin', 'active': True, 'timeZone': 'PRC'}, 'created': '2017-11-30T16:09:02.945+0800', 'updated': '2017-11-30T16:09:02.945+0800'}}
 exception='NoneType' object has no attribute 'get'
 trace=Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

INFO:root:msg: {}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 40035, 'errmsg': '不合法的参数'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 08:09:03] "POST /webhook/jira?user_id=shenweimin&user_key=shenweimin HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512029343455,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/126065/comment/58536",
    "id": "58536",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=xukai.ken",
      "name": "xukai.ken",
      "key": "xukai.ken",
      "emailAddress": "xukai.ken@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5f90\u6977",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "11.30 \u5f00\u53d1\u5b8c\u6210\uff0c\u6d4b\u8bd5\u4e2d\uff0c\u5f85\u4e0a\u7ebf\uff1b",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=xukai.ken",
      "name": "xukai.ken",
      "key": "xukai.ken",
      "emailAddress": "xukai.ken@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5f90\u6977",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T16:09:03.455+0800",
    "updated": "2017-11-30T16:09:03.455+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={'timestamp': 1512029343455, 'webhookEvent': 'comment_created', 'comment': {'self': 'https://jira.bytedance.com/rest/api/2/issue/126065/comment/58536', 'id': '58536', 'author': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=xukai.ken', 'name': 'xukai.ken', 'key': 'xukai.ken', 'emailAddress': 'xukai.ken@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=10122', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122'}, 'displayName': '徐楷', 'active': True, 'timeZone': 'PRC'}, 'body': '11.30 开发完成，测试中，待上线；', 'updateAuthor': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=xukai.ken', 'name': 'xukai.ken', 'key': 'xukai.ken', 'emailAddress': 'xukai.ken@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=10122', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122'}, 'displayName': '徐楷', 'active': True, 'timeZone': 'PRC'}, 'created': '2017-11-30T16:09:03.455+0800', 'updated': '2017-11-30T16:09:03.455+0800'}}
 exception='NoneType' object has no attribute 'get'
 trace=Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

INFO:root:msg: {}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 40035, 'errmsg': '不合法的参数'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 08:09:03] "POST /webhook/jira?user_id=xukai.ken&user_key=xukai.ken HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512029526007,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/125764/comment/58537",
    "id": "58537",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=pangcheng",
      "name": "pangcheng",
      "key": "pangcheng",
      "emailAddress": "pangcheng@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11135",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11135",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11135",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11135"
      },
      "displayName": "\u5e9e\u94d6",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010\u63d0\u6d4b\u529f\u80fd\u3011 \r\n\u8d26\u53f7\u63a5\u53e3\u53c2\u6570\u6df7\u6dc6\r\n\u3010\u5206\u652f\u3011 \r\nfeature/2.9.0_account_mix\r\n\u3010\u7ec6\u8282\u63cf\u8ff0&\u98ce\u9669\u63d0\u793a\u3011 \r\n1\u3001\u9700\u8981\u6d4b\u8bd5\u8d26\u53f7\u76f8\u5173\u7684\u63a5\u53e3\u8fd4\u56de\u6b63\u786e\uff0ccharls\u6293\u5305\u68c0\u67e5\u76f8\u5173\u53c2\u6570\uff0c\u6df7\u6dc6\u7684\u53c2\u6570\u5305\u62ec\uff1a\u624b\u673a\u53f7\u3001\u5bc6\u7801\u3001\u77ed\u4fe1\u9a8c\u8bc1\u7801\u3001\u9a8c\u8bc1\u7801\u7c7b\u578b\u3002\r\n2\u3001\u63a5\u53e3\u5982\u4e0b\uff1a\u53d1\u9001\u9a8c\u8bc1\u7801(/user/mobile/send_code/v2/)\u3001\u9884\u6ce8\u518c(/user/mobile/pre_register/)\u3001\u767b\u5f55\uff08/user/mobile/login/v2/\uff09\u3001\u91cd\u7f6e\u5bc6\u7801\uff08/user/mobile/reset_password/\uff09\u3001\u6539\u5bc6\u7801\uff08/user/mobile/change_password/\uff09\u3001\u7ed1\u5b9a\u624b\u673a\u53f7\uff08/user/mobile/bind_mobile/v2\uff09\u3001\u66f4\u6362\u624b\u673a\u53f7\uff08/user/mobile/change_mobile/\uff09\u3001",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=pangcheng",
      "name": "pangcheng",
      "key": "pangcheng",
      "emailAddress": "pangcheng@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11135",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11135",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11135",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11135"
      },
      "displayName": "\u5e9e\u94d6",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T16:12:06.007+0800",
    "updated": "2017-11-30T16:12:06.007+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={'timestamp': 1512029526007, 'webhookEvent': 'comment_created', 'comment': {'self': 'https://jira.bytedance.com/rest/api/2/issue/125764/comment/58537', 'id': '58537', 'author': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=pangcheng', 'name': 'pangcheng', 'key': 'pangcheng', 'emailAddress': 'pangcheng@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=11135', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11135', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11135', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11135'}, 'displayName': '庞铖', 'active': True, 'timeZone': 'PRC'}, 'body': '【提测功能】 \r\n账号接口参数混淆\r\n【分支】 \r\nfeature/2.9.0_account_mix\r\n【细节描述&风险提示】 \r\n1、需要测试账号相关的接口返回正确，charls抓包检查相关参数，混淆的参数包括：手机号、密码、短信验证码、验证码类型。\r\n2、接口如下：发送验证码(/user/mobile/send_code/v2/)、预注册(/user/mobile/pre_register/)、登录（/user/mobile/login/v2/）、重置密码（/user/mobile/reset_password/）、改密码（/user/mobile/change_password/）、绑定手机号（/user/mobile/bind_mobile/v2）、更换手机号（/user/mobile/change_mobile/）、', 'updateAuthor': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=pangcheng', 'name': 'pangcheng', 'key': 'pangcheng', 'emailAddress': 'pangcheng@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=11135', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11135', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11135', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11135'}, 'displayName': '庞铖', 'active': True, 'timeZone': 'PRC'}, 'created': '2017-11-30T16:12:06.007+0800', 'updated': '2017-11-30T16:12:06.007+0800'}}
 exception='NoneType' object has no attribute 'get'
 trace=Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

INFO:root:msg: {}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 40035, 'errmsg': '不合法的参数'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 08:12:06] "POST /webhook/jira?user_id=pangcheng&user_key=pangcheng HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512029894750,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/126347/comment/58538",
    "id": "58538",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=xukai.ken",
      "name": "xukai.ken",
      "key": "xukai.ken",
      "emailAddress": "xukai.ken@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5f90\u6977",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "11:30 \u672c\u5468\u80fd\u5b8c\u6210",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=xukai.ken",
      "name": "xukai.ken",
      "key": "xukai.ken",
      "emailAddress": "xukai.ken@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5f90\u6977",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T16:18:14.750+0800",
    "updated": "2017-11-30T16:18:14.750+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={'timestamp': 1512029894750, 'webhookEvent': 'comment_created', 'comment': {'self': 'https://jira.bytedance.com/rest/api/2/issue/126347/comment/58538', 'id': '58538', 'author': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=xukai.ken', 'name': 'xukai.ken', 'key': 'xukai.ken', 'emailAddress': 'xukai.ken@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=10122', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122'}, 'displayName': '徐楷', 'active': True, 'timeZone': 'PRC'}, 'body': '11:30 本周能完成', 'updateAuthor': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=xukai.ken', 'name': 'xukai.ken', 'key': 'xukai.ken', 'emailAddress': 'xukai.ken@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=10122', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122'}, 'displayName': '徐楷', 'active': True, 'timeZone': 'PRC'}, 'created': '2017-11-30T16:18:14.750+0800', 'updated': '2017-11-30T16:18:14.750+0800'}}
 exception='NoneType' object has no attribute 'get'
 trace=Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

INFO:root:msg: {}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 40035, 'errmsg': '不合法的参数'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 08:18:14] "POST /webhook/jira?user_id=xukai.ken&user_key=xukai.ken HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512029911169,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/126345/comment/58540",
    "id": "58540",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=xukai.ken",
      "name": "xukai.ken",
      "key": "xukai.ken",
      "emailAddress": "xukai.ken@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5f90\u6977",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "11:30  \u672c\u5468\u80fd\u5b8c\u6210",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=xukai.ken",
      "name": "xukai.ken",
      "key": "xukai.ken",
      "emailAddress": "xukai.ken@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5f90\u6977",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T16:18:31.169+0800",
    "updated": "2017-11-30T16:18:31.169+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={'timestamp': 1512029911169, 'webhookEvent': 'comment_created', 'comment': {'self': 'https://jira.bytedance.com/rest/api/2/issue/126345/comment/58540', 'id': '58540', 'author': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=xukai.ken', 'name': 'xukai.ken', 'key': 'xukai.ken', 'emailAddress': 'xukai.ken@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=10122', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122'}, 'displayName': '徐楷', 'active': True, 'timeZone': 'PRC'}, 'body': '11:30  本周能完成', 'updateAuthor': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=xukai.ken', 'name': 'xukai.ken', 'key': 'xukai.ken', 'emailAddress': 'xukai.ken@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=10122', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122'}, 'displayName': '徐楷', 'active': True, 'timeZone': 'PRC'}, 'created': '2017-11-30T16:18:31.169+0800', 'updated': '2017-11-30T16:18:31.169+0800'}}
 exception='NoneType' object has no attribute 'get'
 trace=Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

INFO:root:msg: {}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 40035, 'errmsg': '不合法的参数'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 08:18:31] "POST /webhook/jira?user_id=xukai.ken&user_key=xukai.ken HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512029949465,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/123926/comment/58541",
    "id": "58541",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=zhangxiaoxue.02",
      "name": "zhangxiaoxue.02",
      "key": "zhangxiaoxue.02",
      "emailAddress": "zhangxiaoxue.02@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11141",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11141",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11141",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11141"
      },
      "displayName": "\u5f20\u5c0f\u96ea",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u8be5\u95ee\u9898\u5df2\u5728\u6700\u65b0\u5305\u4fee\u590d\uff0c\u5173\u95ed\u8be5bug\u3002",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=zhangxiaoxue.02",
      "name": "zhangxiaoxue.02",
      "key": "zhangxiaoxue.02",
      "emailAddress": "zhangxiaoxue.02@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11141",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11141",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11141",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11141"
      },
      "displayName": "\u5f20\u5c0f\u96ea",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T16:19:09.465+0800",
    "updated": "2017-11-30T16:19:09.465+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={'timestamp': 1512029949465, 'webhookEvent': 'comment_created', 'comment': {'self': 'https://jira.bytedance.com/rest/api/2/issue/123926/comment/58541', 'id': '58541', 'author': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=zhangxiaoxue.02', 'name': 'zhangxiaoxue.02', 'key': 'zhangxiaoxue.02', 'emailAddress': 'zhangxiaoxue.02@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=11141', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11141', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11141', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11141'}, 'displayName': '张小雪', 'active': True, 'timeZone': 'PRC'}, 'body': '该问题已在最新包修复，关闭该bug。', 'updateAuthor': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=zhangxiaoxue.02', 'name': 'zhangxiaoxue.02', 'key': 'zhangxiaoxue.02', 'emailAddress': 'zhangxiaoxue.02@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=11141', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11141', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11141', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11141'}, 'displayName': '张小雪', 'active': True, 'timeZone': 'PRC'}, 'created': '2017-11-30T16:19:09.465+0800', 'updated': '2017-11-30T16:19:09.465+0800'}}
 exception='NoneType' object has no attribute 'get'
 trace=Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

INFO:root:msg: {}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 40035, 'errmsg': '不合法的参数'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 08:19:09] "POST /webhook/jira?user_id=zhangxiaoxue.02&user_key=zhangxiaoxue.02 HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512029964348,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/128146/comment/58542",
    "id": "58542",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=lihuan.05",
      "name": "lihuan.05",
      "key": "lihuan.05",
      "emailAddress": "lihuan.05@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "lihuan.05",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u9648\u6b23\u5728\u8ddf\u8fdb\u7535\u53f0\u76f4\u64ad\u5206\u4eab\u56de\u6d41\u9875\u9700\u6c42\u3002",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=lihuan.05",
      "name": "lihuan.05",
      "key": "lihuan.05",
      "emailAddress": "lihuan.05@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "lihuan.05",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T16:19:24.348+0800",
    "updated": "2017-11-30T16:19:24.348+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={'timestamp': 1512029964348, 'webhookEvent': 'comment_created', 'comment': {'self': 'https://jira.bytedance.com/rest/api/2/issue/128146/comment/58542', 'id': '58542', 'author': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=lihuan.05', 'name': 'lihuan.05', 'key': 'lihuan.05', 'emailAddress': 'lihuan.05@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=10122', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122'}, 'displayName': 'lihuan.05', 'active': True, 'timeZone': 'PRC'}, 'body': '陈欣在跟进电台直播分享回流页需求。', 'updateAuthor': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=lihuan.05', 'name': 'lihuan.05', 'key': 'lihuan.05', 'emailAddress': 'lihuan.05@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=10122', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122'}, 'displayName': 'lihuan.05', 'active': True, 'timeZone': 'PRC'}, 'created': '2017-11-30T16:19:24.348+0800', 'updated': '2017-11-30T16:19:24.348+0800'}}
 exception='NoneType' object has no attribute 'get'
 trace=Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

INFO:root:msg: {}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 40035, 'errmsg': '不合法的参数'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 08:19:24] "POST /webhook/jira?user_id=lihuan.05&user_key=lihuan.05 HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512030095272,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/128119/comment/58543",
    "id": "58543",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=weizili",
      "name": "weizili",
      "key": "weizili",
      "emailAddress": "weizili@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "weizili",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u786e\u8ba4",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=weizili",
      "name": "weizili",
      "key": "weizili",
      "emailAddress": "weizili@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "weizili",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T16:21:35.272+0800",
    "updated": "2017-11-30T16:21:35.272+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={'timestamp': 1512030095272, 'webhookEvent': 'comment_created', 'comment': {'self': 'https://jira.bytedance.com/rest/api/2/issue/128119/comment/58543', 'id': '58543', 'author': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=weizili', 'name': 'weizili', 'key': 'weizili', 'emailAddress': 'weizili@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=10122', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122'}, 'displayName': 'weizili', 'active': True, 'timeZone': 'PRC'}, 'body': '确认', 'updateAuthor': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=weizili', 'name': 'weizili', 'key': 'weizili', 'emailAddress': 'weizili@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=10122', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122'}, 'displayName': 'weizili', 'active': True, 'timeZone': 'PRC'}, 'created': '2017-11-30T16:21:35.272+0800', 'updated': '2017-11-30T16:21:35.272+0800'}}
 exception='NoneType' object has no attribute 'get'
 trace=Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

INFO:root:msg: {}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 40035, 'errmsg': '不合法的参数'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 08:21:35] "POST /webhook/jira?user_id=weizili&user_key=weizili HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512030175969,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/125408/comment/58544",
    "id": "58544",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=xukai.ken",
      "name": "xukai.ken",
      "key": "xukai.ken",
      "emailAddress": "xukai.ken@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5f90\u6977",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u6570\u636e\u7aef\u672a\u652f\u6301\uff0c\u53c8\u4e0b\u7ebf",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=xukai.ken",
      "name": "xukai.ken",
      "key": "xukai.ken",
      "emailAddress": "xukai.ken@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5f90\u6977",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T16:22:55.969+0800",
    "updated": "2017-11-30T16:22:55.969+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={'timestamp': 1512030175969, 'webhookEvent': 'comment_created', 'comment': {'self': 'https://jira.bytedance.com/rest/api/2/issue/125408/comment/58544', 'id': '58544', 'author': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=xukai.ken', 'name': 'xukai.ken', 'key': 'xukai.ken', 'emailAddress': 'xukai.ken@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=10122', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122'}, 'displayName': '徐楷', 'active': True, 'timeZone': 'PRC'}, 'body': '数据端未支持，又下线', 'updateAuthor': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=xukai.ken', 'name': 'xukai.ken', 'key': 'xukai.ken', 'emailAddress': 'xukai.ken@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=10122', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122'}, 'displayName': '徐楷', 'active': True, 'timeZone': 'PRC'}, 'created': '2017-11-30T16:22:55.969+0800', 'updated': '2017-11-30T16:22:55.969+0800'}}
 exception='NoneType' object has no attribute 'get'
 trace=Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

INFO:root:msg: {}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 40035, 'errmsg': '不合法的参数'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 08:22:56] "POST /webhook/jira?user_id=xukai.ken&user_key=xukai.ken HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512030832011,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/128028/comment/58549",
    "id": "58549",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=liudingyu",
      "name": "liudingyu",
      "key": "liudingyu",
      "emailAddress": "liudingyu@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11146",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11146",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11146",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11146"
      },
      "displayName": "\u5218\u4e01\u745c",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u6740\u6389\u8fdb\u573a\u8fd9\u79cd\u573a\u666f\uff0capp\u72b6\u6001\u4e0d\u4f1a\u4fdd\u5b58\uff0c\u6240\u4ee5\u4f1a\u51fa\u73b0\u8fd9\u79cd\u95ee\u9898\uff0c\u4e0d\u662fbug",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=liudingyu",
      "name": "liudingyu",
      "key": "liudingyu",
      "emailAddress": "liudingyu@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11146",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11146",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11146",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11146"
      },
      "displayName": "\u5218\u4e01\u745c",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T16:33:52.011+0800",
    "updated": "2017-11-30T16:33:52.011+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={'timestamp': 1512030832011, 'webhookEvent': 'comment_created', 'comment': {'self': 'https://jira.bytedance.com/rest/api/2/issue/128028/comment/58549', 'id': '58549', 'author': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=liudingyu', 'name': 'liudingyu', 'key': 'liudingyu', 'emailAddress': 'liudingyu@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=11146', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11146', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11146', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11146'}, 'displayName': '刘丁瑜', 'active': True, 'timeZone': 'PRC'}, 'body': '杀掉进场这种场景，app状态不会保存，所以会出现这种问题，不是bug', 'updateAuthor': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=liudingyu', 'name': 'liudingyu', 'key': 'liudingyu', 'emailAddress': 'liudingyu@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=11146', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11146', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11146', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11146'}, 'displayName': '刘丁瑜', 'active': True, 'timeZone': 'PRC'}, 'created': '2017-11-30T16:33:52.011+0800', 'updated': '2017-11-30T16:33:52.011+0800'}}
 exception='NoneType' object has no attribute 'get'
 trace=Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

INFO:root:msg: {}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 40035, 'errmsg': '不合法的参数'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 08:33:52] "POST /webhook/jira?user_id=liudingyu&user_key=liudingyu HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512030952165,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/128152/comment/58550",
    "id": "58550",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=tangcui",
      "name": "tangcui",
      "key": "tangcui",
      "emailAddress": "tangcui@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=tangcui&avatarId=11607",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=tangcui&avatarId=11607",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=tangcui&avatarId=11607",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=tangcui&avatarId=11607"
      },
      "displayName": "\u5510\u7fe0",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u9879\u76ee\u73b0\u72b6\u8fdb\u5ea6\uff1a\r\n\u76f4\u64ad\u4fa7\u5f00\u91cf20%\uff0c \u603b\u521b\u5efa\u5e7f\u544a\u4e3b:11264, \u8ba1\u5212\u657019574\r\n\r\n\u4e3b\u8981\u8ddf\u8fdb\u95ee\u9898\uff1a\r\n1. redis  \u5f02\u6b65\u9501\u65f6\u95f4\u592a\u957f\u5bfc\u81f4\uff0c\u63d0\u4ea4\u9519\u8bef\u7387\u592a\u591a https://review.byted.org/#/c/406080/\r\n2. billing \u6570\u636e\u4e3b\u4ece\u5ef6\u8fdf\uff0c\u5bfc\u81f4\u5f00\u6237\u6210\u529f\u4f46\u662f\u5145\u503c\u5931\u8d25 TODO\uff1arecharge save\u65f6 \u5f53\u83b7\u53d6\u4ece\u5e93\u5931\u8d25\uff0c\u91cd\u65b0\u83b7\u53d6\u4e00\u6b21\u4e3b\u5e93\uff0c\u4f9d\u8d56\u674e\u6751\u4fee\u6539\u4ee3\u7801\r\n3. update_budget \u63a5\u53e3\u66f4\u65b0\u5931\u8d25\uff0c\u4e3b\u8981\u539f\u56e0\u662f\u76f4\u64ad\u4fa7\u5728\u76f4\u64ad\u7ed3\u675f\u6ca1\u6709\u505a\u5230\u5f88\u597d\u7684cover  \u76ee\u524d\u9010\u6b65\u5728\u4fee\u590d\u8fd9\u4e2a\u95ee\u9898 api code \u8fd4\u56de\u7801 60006 \u8868\u793a\u5bf9\u5df2\u7ed3\u7b97\u7684\u5e7f\u544a\u8ba1\u5212\u5145\u503c\r\n4. bmp_site\u6269\u5bb9\u4e00\u53f0\u65b0\u673a\u5668",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=tangcui",
      "name": "tangcui",
      "key": "tangcui",
      "emailAddress": "tangcui@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=tangcui&avatarId=11607",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=tangcui&avatarId=11607",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=tangcui&avatarId=11607",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=tangcui&avatarId=11607"
      },
      "displayName": "\u5510\u7fe0",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T16:35:52.165+0800",
    "updated": "2017-11-30T16:35:52.165+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={'timestamp': 1512030952165, 'webhookEvent': 'comment_created', 'comment': {'self': 'https://jira.bytedance.com/rest/api/2/issue/128152/comment/58550', 'id': '58550', 'author': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=tangcui', 'name': 'tangcui', 'key': 'tangcui', 'emailAddress': 'tangcui@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?ownerId=tangcui&avatarId=11607', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&ownerId=tangcui&avatarId=11607', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=tangcui&avatarId=11607', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=tangcui&avatarId=11607'}, 'displayName': '唐翠', 'active': True, 'timeZone': 'PRC'}, 'body': '项目现状进度：\r\n直播侧开量20%， 总创建广告主:11264, 计划数19574\r\n\r\n主要跟进问题：\r\n1. redis  异步锁时间太长导致，提交错误率太多 https://review.byted.org/#/c/406080/\r\n2. billing 数据主从延迟，导致开户成功但是充值失败 TODO：recharge save时 当获取从库失败，重新获取一次主库，依赖李村修改代码\r\n3. update_budget 接口更新失败，主要原因是直播侧在直播结束没有做到很好的cover  目前逐步在修复这个问题 api code 返回码 60006 表示对已结算的广告计划充值\r\n4. bmp_site扩容一台新机器', 'updateAuthor': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=tangcui', 'name': 'tangcui', 'key': 'tangcui', 'emailAddress': 'tangcui@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?ownerId=tangcui&avatarId=11607', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&ownerId=tangcui&avatarId=11607', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=tangcui&avatarId=11607', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=tangcui&avatarId=11607'}, 'displayName': '唐翠', 'active': True, 'timeZone': 'PRC'}, 'created': '2017-11-30T16:35:52.165+0800', 'updated': '2017-11-30T16:35:52.165+0800'}}
 exception='NoneType' object has no attribute 'get'
 trace=Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

INFO:root:msg: {}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 40035, 'errmsg': '不合法的参数'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 08:35:52] "POST /webhook/jira?user_id=tangcui&user_key=tangcui HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512031362121,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/128132/comment/58552",
    "id": "58552",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=zhangqing.harvey",
      "name": "zhangqing.harvey",
      "key": "zhangqing.harvey",
      "emailAddress": "zhangqing.harvey@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11136",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11136",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11136",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11136"
      },
      "displayName": "\u5f20\u5e86",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u8fd9\u4e2a\u95ee\u9898\u662f\u9057\u7559\u95ee\u9898\uff0c\u5df2\u77e5\uff0c\u5f20\u7fd4\u770b\u4e00\u4e0b",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=zhangqing.harvey",
      "name": "zhangqing.harvey",
      "key": "zhangqing.harvey",
      "emailAddress": "zhangqing.harvey@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11136",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11136",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11136",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11136"
      },
      "displayName": "\u5f20\u5e86",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T16:42:42.121+0800",
    "updated": "2017-11-30T16:42:42.121+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={'timestamp': 1512031362121, 'webhookEvent': 'comment_created', 'comment': {'self': 'https://jira.bytedance.com/rest/api/2/issue/128132/comment/58552', 'id': '58552', 'author': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=zhangqing.harvey', 'name': 'zhangqing.harvey', 'key': 'zhangqing.harvey', 'emailAddress': 'zhangqing.harvey@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=11136', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11136', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11136', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11136'}, 'displayName': '张庆', 'active': True, 'timeZone': 'PRC'}, 'body': '这个问题是遗留问题，已知，张翔看一下', 'updateAuthor': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=zhangqing.harvey', 'name': 'zhangqing.harvey', 'key': 'zhangqing.harvey', 'emailAddress': 'zhangqing.harvey@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=11136', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11136', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11136', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11136'}, 'displayName': '张庆', 'active': True, 'timeZone': 'PRC'}, 'created': '2017-11-30T16:42:42.121+0800', 'updated': '2017-11-30T16:42:42.121+0800'}}
 exception='NoneType' object has no attribute 'get'
 trace=Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

INFO:root:msg: {}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 40035, 'errmsg': '不合法的参数'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 08:42:42] "POST /webhook/jira?user_id=zhangqing.harvey&user_key=zhangqing.harvey HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512031402614,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/128138/comment/58553",
    "id": "58553",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=zhangqing.harvey",
      "name": "zhangqing.harvey",
      "key": "zhangqing.harvey",
      "emailAddress": "zhangqing.harvey@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11136",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11136",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11136",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11136"
      },
      "displayName": "\u5f20\u5e86",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u8fd9\u4e2a\u89c6\u9891\u76f4\u63a5\u70b9\u64ad\u653e\u5f00\u59cb\u64ad\u7684\u65f6\u5019\u8fdb\u5ea6\u6761\u6b63\u5e38\u5417\uff1f\u53ef\u80fd\u662f\u5173\u952e\u5e27\u7f3a\u5931",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=zhangqing.harvey",
      "name": "zhangqing.harvey",
      "key": "zhangqing.harvey",
      "emailAddress": "zhangqing.harvey@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=11136",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11136",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11136",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11136"
      },
      "displayName": "\u5f20\u5e86",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T16:43:22.614+0800",
    "updated": "2017-11-30T16:43:22.614+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={'timestamp': 1512031402614, 'webhookEvent': 'comment_created', 'comment': {'self': 'https://jira.bytedance.com/rest/api/2/issue/128138/comment/58553', 'id': '58553', 'author': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=zhangqing.harvey', 'name': 'zhangqing.harvey', 'key': 'zhangqing.harvey', 'emailAddress': 'zhangqing.harvey@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=11136', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11136', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11136', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11136'}, 'displayName': '张庆', 'active': True, 'timeZone': 'PRC'}, 'body': '这个视频直接点播放开始播的时候进度条正常吗？可能是关键帧缺失', 'updateAuthor': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=zhangqing.harvey', 'name': 'zhangqing.harvey', 'key': 'zhangqing.harvey', 'emailAddress': 'zhangqing.harvey@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=11136', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=11136', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=11136', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=11136'}, 'displayName': '张庆', 'active': True, 'timeZone': 'PRC'}, 'created': '2017-11-30T16:43:22.614+0800', 'updated': '2017-11-30T16:43:22.614+0800'}}
 exception='NoneType' object has no attribute 'get'
 trace=Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

INFO:root:msg: {}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 40035, 'errmsg': '不合法的参数'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 08:43:22] "POST /webhook/jira?user_id=zhangqing.harvey&user_key=zhangqing.harvey HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512031510784,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127536/comment/58555",
    "id": "58555",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=zhouyongjia",
      "name": "zhouyongjia",
      "key": "zhouyongjia",
      "emailAddress": "zhouyongjia@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5468\u6c38\u4f73",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u4e0a\u4f20\u56fe\u7247\u670d\u52a1\u672c\u8eab\u6bd4\u8f83\u6162\uff0c\u8fd9\u4e2a\u9700\u8981\u540e\u7eed\u4f18\u5316\u3002\u800c\u4e14\u524d\u4e24\u5929\u7684\u7f51\u7edc\u4e5f\u4e0d\u597d\uff0c\u5bfc\u81f4\u4e0a\u4f20\u51fa\u73b0\u95ee\u9898\u3002",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=zhouyongjia",
      "name": "zhouyongjia",
      "key": "zhouyongjia",
      "emailAddress": "zhouyongjia@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "\u5468\u6c38\u4f73",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T16:45:10.784+0800",
    "updated": "2017-11-30T16:45:10.784+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={'timestamp': 1512031510784, 'webhookEvent': 'comment_created', 'comment': {'self': 'https://jira.bytedance.com/rest/api/2/issue/127536/comment/58555', 'id': '58555', 'author': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=zhouyongjia', 'name': 'zhouyongjia', 'key': 'zhouyongjia', 'emailAddress': 'zhouyongjia@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=10122', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122'}, 'displayName': '周永佳', 'active': True, 'timeZone': 'PRC'}, 'body': '上传图片服务本身比较慢，这个需要后续优化。而且前两天的网络也不好，导致上传出现问题。', 'updateAuthor': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=zhouyongjia', 'name': 'zhouyongjia', 'key': 'zhouyongjia', 'emailAddress': 'zhouyongjia@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=10122', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122'}, 'displayName': '周永佳', 'active': True, 'timeZone': 'PRC'}, 'created': '2017-11-30T16:45:10.784+0800', 'updated': '2017-11-30T16:45:10.784+0800'}}
 exception='NoneType' object has no attribute 'get'
 trace=Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
    title, text = _assemble_message(data)
  File "/mnt/jira.py", line 143, in _assemble_message
    issue_type = get_issue_type(data)
  File "/mnt/jira.py", line 212, in get_issue_type
    return data.get('issue').get('fields').get('issuetype').get('name')
AttributeError: 'NoneType' object has no attribute 'get'

INFO:root:msg: {}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 40035, 'errmsg': '不合法的参数'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 08:45:10] "POST /webhook/jira?user_id=zhouyongjia&user_key=zhouyongjia HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512031608743,
  "webhookEvent": "comment_updated",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127154/comment/58257",
    "id": "58257",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=lipenglin",
      "name": "lipenglin",
      "key": "lipenglin",
      "emailAddress": "lipenglin@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=lipenglin&avatarId=11532",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=lipenglin&avatarId=11532",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=lipenglin&avatarId=11532",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=lipenglin&avatarId=11532"
      },
      "displayName": "\u674e\u670b\u6797",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010\u63d0\u6d4b\u529f\u80fd\u3011 \r\n\u7535\u53f0\u76f4\u64ad\r\n\u3010\u63d0\u6d4b\u5206\u652f\u3011 \r\nlive_290_radio\r\n\u3010\u7ec6\u8282\u63cf\u8ff0 & \u98ce\u9669\u63d0\u793a\u3011 \r\nsetting \u5b57\u6bb5 enable_live_audio  =  true/false\r\n\r\ndoing by tongyao",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=tongyao",
      "name": "tongyao",
      "key": "tongyao",
      "emailAddress": "tongyao@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=tongyao&avatarId=11319",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=tongyao&avatarId=11319",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=tongyao&avatarId=11319",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=tongyao&avatarId=11319"
      },
      "displayName": "\u4edd\u7476",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-29T11:16:00.000+0800",
    "updated": "2017-11-30T16:46:48.743+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 08:46:48] "POST /webhook/jira?user_id=tongyao&user_key=tongyao HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512031645607,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/125764/comment/58557",
    "id": "58557",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=songli.02",
      "name": "songli.02",
      "key": "songli.02",
      "emailAddress": "songli.02@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=songli.02&avatarId=11230",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=songli.02&avatarId=11230",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=songli.02&avatarId=11230",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=songli.02&avatarId=11230"
      },
      "displayName": "\u5b8b\u7acb",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010\u63d0\u6d4b\u529f\u80fd\u3011 \r\n\u9488\u5bf9outer_test_*\u6e20\u9053\u663e\u793aFeed\u53cd\u9988\u5165\u53e3\r\n\u3010\u5206\u652f\u3011 \r\nfeature/2.9_\u5916\u6d4b\u53cd\u9988\u5165\u53e3\r\n\u3010\u7ec6\u8282\u63cf\u8ff0&\u98ce\u9669\u63d0\u793a\u3011 \r\n\u65e0",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=songli.02",
      "name": "songli.02",
      "key": "songli.02",
      "emailAddress": "songli.02@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=songli.02&avatarId=11230",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=songli.02&avatarId=11230",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=songli.02&avatarId=11230",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=songli.02&avatarId=11230"
      },
      "displayName": "\u5b8b\u7acb",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T16:47:25.607+0800",
    "updated": "2017-11-30T16:47:25.607+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={'timestamp': 1512031645607, 'webhookEvent': 'comment_created', 'comment': {'self': 'https://jira.bytedance.com/rest/api/2/issue/125764/comment/58557', 'id': '58557', 'author': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=songli.02', 'name': 'songli.02', 'key': 'songli.02', 'emailAddress': 'songli.02@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?ownerId=songli.02&avatarId=11230', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&ownerId=songli.02&avatarId=11230', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=songli.02&avatarId=11230', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=songli.02&avatarId=11230'}, 'displayName': '宋立', 'active': True, 'timeZone': 'PRC'}, 'body': '【提测功能】 \r\n针对outer_test_*渠道显示Feed反馈入口\r\n【分支】 \r\nfeature/2.9_外测反馈入口\r\n【细节描述&风险提示】 \r\n无', 'updateAuthor': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=songli.02', 'name': 'songli.02', 'key': 'songli.02', 'emailAddress': 'songli.02@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?ownerId=songli.02&avatarId=11230', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&ownerId=songli.02&avatarId=11230', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=songli.02&avatarId=11230', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=songli.02&avatarId=11230'}, 'displayName': '宋立', 'active': True, 'timeZone': 'PRC'}, 'created': '2017-11-30T16:47:25.607+0800', 'updated': '2017-11-30T16:47:25.607+0800'}}
 exception='NoneType' object has no attribute 'get'
 trace=Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
  File "/mnt/jira.py", line 143, in _assemble_message
  File "/mnt/jira.py", line 212, in get_issue_type
AttributeError: 'NoneType' object has no attribute 'get'

INFO:root:msg: {}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 40035, 'errmsg': '不合法的参数'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 08:47:25] "POST /webhook/jira?user_id=songli.02&user_key=songli.02 HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512031906739,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127983/comment/58559",
    "id": "58559",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=xietianzhen",
      "name": "xietianzhen",
      "key": "xietianzhen",
      "emailAddress": "xietianzhen@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "xietianzhen",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u89c6\u9891\u5185\u6838pod\u5e93\u7248\u672c\u4e0d\u5bf9\u5e94\u3002\r\n\u5f71\u54cd\u7248\u672c\uff1aios8\u30019",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=xietianzhen",
      "name": "xietianzhen",
      "key": "xietianzhen",
      "emailAddress": "xietianzhen@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "xietianzhen",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T16:51:46.739+0800",
    "updated": "2017-11-30T16:51:46.739+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={'timestamp': 1512031906739, 'webhookEvent': 'comment_created', 'comment': {'self': 'https://jira.bytedance.com/rest/api/2/issue/127983/comment/58559', 'id': '58559', 'author': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=xietianzhen', 'name': 'xietianzhen', 'key': 'xietianzhen', 'emailAddress': 'xietianzhen@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=10122', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122'}, 'displayName': 'xietianzhen', 'active': True, 'timeZone': 'PRC'}, 'body': '视频内核pod库版本不对应。\r\n影响版本：ios8、9', 'updateAuthor': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=xietianzhen', 'name': 'xietianzhen', 'key': 'xietianzhen', 'emailAddress': 'xietianzhen@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=10122', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122'}, 'displayName': 'xietianzhen', 'active': True, 'timeZone': 'PRC'}, 'created': '2017-11-30T16:51:46.739+0800', 'updated': '2017-11-30T16:51:46.739+0800'}}
 exception='NoneType' object has no attribute 'get'
 trace=Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
  File "/mnt/jira.py", line 143, in _assemble_message
  File "/mnt/jira.py", line 212, in get_issue_type
AttributeError: 'NoneType' object has no attribute 'get'

INFO:root:msg: {}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 40035, 'errmsg': '不合法的参数'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 08:51:46] "POST /webhook/jira?user_id=xietianzhen&user_key=xietianzhen HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512032335612,
  "webhookEvent": "comment_updated",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/125762/comment/58401",
    "id": "58401",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=luozexin",
      "name": "luozexin",
      "key": "luozexin",
      "emailAddress": "luozexin@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "luozexin",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u3010\u63d0\u6d4b\u529f\u80fd\u3011---doing by yuanyuan --done\r\n\u7cbe\u51c6\u9884\u52a0\u8f7d\r\n\u3010\u5206\u652f\u3011\r\nlive_2.9.0_video_multi_cache\r\n\u3010\u7ec6\u8282\u63cf\u8ff0\u3011\r\n\u670d\u52a1\u7aef\u4e0b\u53d1media\uff0c\u589e\u52a0preload_size\u5b57\u6bb5\uff1b\u6bcf\u4e2a\u89c6\u9891\u5355\u72ec\u914d\u7f6e\u9884\u52a0\u8f7d\u5927\u5c0f",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=houyuanyuan",
      "name": "houyuanyuan",
      "key": "houyuanyuan",
      "emailAddress": "houyuanyuan@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=houyuanyuan&avatarId=11240",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=houyuanyuan&avatarId=11240",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=houyuanyuan&avatarId=11240",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=houyuanyuan&avatarId=11240"
      },
      "displayName": "\u4faf\u5a9b\u5a9b",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-29T18:43:05.000+0800",
    "updated": "2017-11-30T16:58:55.612+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 08:58:55] "POST /webhook/jira?user_id=houyuanyuan&user_key=houyuanyuan HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512032695306,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/127971/comment/58564",
    "id": "58564",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=yangzhen",
      "name": "yangzhen",
      "key": "yangzhen",
      "emailAddress": "yangzhen@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=yangzhen&avatarId=11446",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=yangzhen&avatarId=11446",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=yangzhen&avatarId=11446",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=yangzhen&avatarId=11446"
      },
      "displayName": "\u6768\u632f",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "stay_page\u662f\u5728\u6587\u7ae0\u8be6\u60c5\u9875\u9762\u7684\u505c\u7559\u65f6\u957f\uff0c\u5f53\u524d\u6587\u7ae0\uff0c\u786e\u5b9e\u662f\u6765\u81eaclick_notify_alert\uff0c\u7b26\u5408\u9884\u671f\uff1b\r\n",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=yangzhen",
      "name": "yangzhen",
      "key": "yangzhen",
      "emailAddress": "yangzhen@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=yangzhen&avatarId=11446",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=yangzhen&avatarId=11446",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=yangzhen&avatarId=11446",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=yangzhen&avatarId=11446"
      },
      "displayName": "\u6768\u632f",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T17:04:55.306+0800",
    "updated": "2017-11-30T17:04:55.306+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={'timestamp': 1512032695306, 'webhookEvent': 'comment_created', 'comment': {'self': 'https://jira.bytedance.com/rest/api/2/issue/127971/comment/58564', 'id': '58564', 'author': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=yangzhen', 'name': 'yangzhen', 'key': 'yangzhen', 'emailAddress': 'yangzhen@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?ownerId=yangzhen&avatarId=11446', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&ownerId=yangzhen&avatarId=11446', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=yangzhen&avatarId=11446', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=yangzhen&avatarId=11446'}, 'displayName': '杨振', 'active': True, 'timeZone': 'PRC'}, 'body': 'stay_page是在文章详情页面的停留时长，当前文章，确实是来自click_notify_alert，符合预期；\r\n', 'updateAuthor': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=yangzhen', 'name': 'yangzhen', 'key': 'yangzhen', 'emailAddress': 'yangzhen@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?ownerId=yangzhen&avatarId=11446', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&ownerId=yangzhen&avatarId=11446', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=yangzhen&avatarId=11446', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=yangzhen&avatarId=11446'}, 'displayName': '杨振', 'active': True, 'timeZone': 'PRC'}, 'created': '2017-11-30T17:04:55.306+0800', 'updated': '2017-11-30T17:04:55.306+0800'}}
 exception='NoneType' object has no attribute 'get'
 trace=Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
  File "/mnt/jira.py", line 143, in _assemble_message
  File "/mnt/jira.py", line 212, in get_issue_type
AttributeError: 'NoneType' object has no attribute 'get'

INFO:root:msg: {}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 40035, 'errmsg': '不合法的参数'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 09:04:55] "POST /webhook/jira?user_id=yangzhen&user_key=yangzhen HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512032724669,
  "webhookEvent": "comment_deleted",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/126782/comment/58563",
    "id": "58563",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=kouzuyang",
      "name": "kouzuyang",
      "key": "kouzuyang",
      "emailAddress": "kouzuyang@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=kouzuyang&avatarId=11481",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=kouzuyang&avatarId=11481",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=kouzuyang&avatarId=11481",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=kouzuyang&avatarId=11481"
      },
      "displayName": "\u5bc7\u7956\u9633",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u4e0d\u9700\u8981\u4fee\u590d",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=kouzuyang",
      "name": "kouzuyang",
      "key": "kouzuyang",
      "emailAddress": "kouzuyang@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=kouzuyang&avatarId=11481",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=kouzuyang&avatarId=11481",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=kouzuyang&avatarId=11481",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=kouzuyang&avatarId=11481"
      },
      "displayName": "\u5bc7\u7956\u9633",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T17:03:01.000+0800",
    "updated": "2017-11-30T17:03:01.000+0800"
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '', 'text': '####  \n'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 300001, 'errmsg': 'message param title is null '}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 09:05:24] "POST /webhook/jira?user_id=kouzuyang&user_key=kouzuyang HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512032784088,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/125665/comment/58566",
    "id": "58566",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=xiaohongjun",
      "name": "xiaohongjun",
      "key": "xiaohongjun",
      "emailAddress": "xiaohongjun@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "xiaohongjun",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "\u8fd9\u4e2a\u548cchunjian\u8ba8\u8bba\uff0c\u5148\u653e\u4e00\u653e",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=xiaohongjun",
      "name": "xiaohongjun",
      "key": "xiaohongjun",
      "emailAddress": "xiaohongjun@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
      },
      "displayName": "xiaohongjun",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T17:06:24.088+0800",
    "updated": "2017-11-30T17:06:24.088+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={'timestamp': 1512032784088, 'webhookEvent': 'comment_created', 'comment': {'self': 'https://jira.bytedance.com/rest/api/2/issue/125665/comment/58566', 'id': '58566', 'author': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=xiaohongjun', 'name': 'xiaohongjun', 'key': 'xiaohongjun', 'emailAddress': 'xiaohongjun@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=10122', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122'}, 'displayName': 'xiaohongjun', 'active': True, 'timeZone': 'PRC'}, 'body': '这个和chunjian讨论，先放一放', 'updateAuthor': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=xiaohongjun', 'name': 'xiaohongjun', 'key': 'xiaohongjun', 'emailAddress': 'xiaohongjun@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?avatarId=10122', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122'}, 'displayName': 'xiaohongjun', 'active': True, 'timeZone': 'PRC'}, 'created': '2017-11-30T17:06:24.088+0800', 'updated': '2017-11-30T17:06:24.088+0800'}}
 exception='NoneType' object has no attribute 'get'
 trace=Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
  File "/mnt/jira.py", line 143, in _assemble_message
  File "/mnt/jira.py", line 212, in get_issue_type
AttributeError: 'NoneType' object has no attribute 'get'

INFO:root:msg: {}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 40035, 'errmsg': '不合法的参数'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 09:06:24] "POST /webhook/jira?user_id=xiaohongjun&user_key=xiaohongjun HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512032849480,
  "webhookEvent": "comment_created",
  "comment": {
    "self": "https://jira.bytedance.com/rest/api/2/issue/121530/comment/58567",
    "id": "58567",
    "author": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=tangcui",
      "name": "tangcui",
      "key": "tangcui",
      "emailAddress": "tangcui@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=tangcui&avatarId=11607",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=tangcui&avatarId=11607",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=tangcui&avatarId=11607",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=tangcui&avatarId=11607"
      },
      "displayName": "\u5510\u7fe0",
      "active": true,
      "timeZone": "PRC"
    },
    "body": "preonline\u4e86",
    "updateAuthor": {
      "self": "https://jira.bytedance.com/rest/api/2/user?username=tangcui",
      "name": "tangcui",
      "key": "tangcui",
      "emailAddress": "tangcui@bytedance.com",
      "avatarUrls": {
        "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=tangcui&avatarId=11607",
        "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=tangcui&avatarId=11607",
        "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=tangcui&avatarId=11607",
        "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=tangcui&avatarId=11607"
      },
      "displayName": "\u5510\u7fe0",
      "active": true,
      "timeZone": "PRC"
    },
    "created": "2017-11-30T17:07:29.480+0800",
    "updated": "2017-11-30T17:07:29.480+0800"
  }
}
<^>
jira]

INFO:root:Invalid data format: data={'timestamp': 1512032849480, 'webhookEvent': 'comment_created', 'comment': {'self': 'https://jira.bytedance.com/rest/api/2/issue/121530/comment/58567', 'id': '58567', 'author': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=tangcui', 'name': 'tangcui', 'key': 'tangcui', 'emailAddress': 'tangcui@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?ownerId=tangcui&avatarId=11607', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&ownerId=tangcui&avatarId=11607', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=tangcui&avatarId=11607', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=tangcui&avatarId=11607'}, 'displayName': '唐翠', 'active': True, 'timeZone': 'PRC'}, 'body': 'preonline了', 'updateAuthor': {'self': 'https://jira.bytedance.com/rest/api/2/user?username=tangcui', 'name': 'tangcui', 'key': 'tangcui', 'emailAddress': 'tangcui@bytedance.com', 'avatarUrls': {'48x48': 'https://jira.bytedance.com/secure/useravatar?ownerId=tangcui&avatarId=11607', '24x24': 'https://jira.bytedance.com/secure/useravatar?size=small&ownerId=tangcui&avatarId=11607', '16x16': 'https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=tangcui&avatarId=11607', '32x32': 'https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=tangcui&avatarId=11607'}, 'displayName': '唐翠', 'active': True, 'timeZone': 'PRC'}, 'created': '2017-11-30T17:07:29.480+0800', 'updated': '2017-11-30T17:07:29.480+0800'}}
 exception='NoneType' object has no attribute 'get'
 trace=Traceback (most recent call last):
  File "/mnt/jira.py", line 20, in transform_data
  File "/mnt/jira.py", line 143, in _assemble_message
  File "/mnt/jira.py", line 212, in get_issue_type
AttributeError: 'NoneType' object has no attribute 'get'

INFO:root:msg: {}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 40035, 'errmsg': '不合法的参数'}
INFO:root:jira does: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 09:07:29] "POST /webhook/jira?user_id=tangcui&user_key=tangcui HTTP/1.0" 200 -
INFO:werkzeug: * Running on http://0.0.0.0:3002/ (Press CTRL+C to quit)
INFO:root:
[jenkins
<^>
{
  "name": "eventhub",
  "display_name": "eventhub",
  "url": "job/hellogo/",
  "build": {
    "full_url": "http://jenkins.yogiman.cn:8080/job/eventhub/job/master/",
    "number": 11,
    "queue_id": 3,
    "timestamp": 1510889226696,
    "phase": "STARTED",
    "url": "job/hellogo/11/",
    "scm": {
      "url": "http://10.1.80.107:10080/yangluo/hellogo.git",
      "branch": "origin/master",
      "commit": "839c10a3697c8ad0ff1938c9eb4d9ea9e038f86a"
    },
    "log": "",
    "artifacts": {}
  }
}
<^>
jenkins]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': '开始构建 eventhub', 'text': '#### 开始构建 eventhub \n[点击查看详情](http://jenkins.yogiman.cn:8080/job/eventhub/job/master/)'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=49679eab1c1d2c16af000de2f61e2803a9071cb38b92e16b05c8ba18f007ccaa HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 0, 'errmsg': 'ok'}
INFO:root:resp: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 09:40:58] "POST /webhook/jenkins HTTP/1.0" 200 -
INFO:root:
[jira
<^>
{
  "timestamp": 1512034906266,
  "webhookEvent": "jira:issue_updated",
  "user": {
    "self": "https://jira.bytedance.com/rest/api/2/user?username=shenweimin",
    "name": "shenweimin",
    "key": "shenweimin",
    "emailAddress": "shenweimin@bytedance.com",
    "avatarUrls": {
      "48x48": "https://jira.bytedance.com/secure/useravatar?avatarId=10122",
      "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&avatarId=10122",
      "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&avatarId=10122",
      "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&avatarId=10122"
    },
    "displayName": "shenweimin",
    "active": true,
    "timeZone": "PRC"
  },
  "issue": {
    "id": "113608",
    "self": "https://jira.bytedance.com/rest/api/2/issue/113608",
    "key": "BT-1",
    "fields": {
      "issuetype": {
        "self": "https://jira.bytedance.com/rest/api/2/issuetype/10001",
        "id": "10001",
        "description": "gh.issue.story.desc",
        "iconUrl": "https://jira.bytedance.com/secure/viewavatar?size=xsmall&avatarId=11115&avatarType=issuetype",
        "name": "Story",
        "subtask": false,
        "avatarId": 11115
      },
      "timespent": null,
      "project": {
        "self": "https://jira.bytedance.com/rest/api/2/project/11747",
        "id": "11747",
        "key": "BT",
        "name": "beijunlong test",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/projectavatar?pid=11747&avatarId=10400",
          "24x24": "https://jira.bytedance.com/secure/projectavatar?size=small&pid=11747&avatarId=10400",
          "16x16": "https://jira.bytedance.com/secure/projectavatar?size=xsmall&pid=11747&avatarId=10400",
          "32x32": "https://jira.bytedance.com/secure/projectavatar?size=medium&pid=11747&avatarId=10400"
        }
      },
      "fixVersions": [],
      "aggregatetimespent": null,
      "resolution": null,
      "customfield_10500": null,
      "customfield_10105": null,
      "resolutiondate": null,
      "workratio": -1,
      "lastViewed": "2017-11-30T17:41:46.258+0800",
      "watches": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-1/watchers",
        "watchCount": 2,
        "isWatching": false
      },
      "created": "2017-10-11T15:45:13.000+0800",
      "priority": {
        "self": "https://jira.bytedance.com/rest/api/2/priority/3",
        "iconUrl": "https://jira.bytedance.com/images/icons/priorities/major.svg",
        "name": "\u91cd\u8981",
        "id": "3"
      },
      "customfield_10100": null,
      "customfield_10300": null,
      "labels": [],
      "customfield_10301": null,
      "customfield_10413": null,
      "customfield_10416": null,
      "timeestimate": null,
      "aggregatetimeoriginalestimate": null,
      "versions": [],
      "customfield_10417": "2017-10-09T10:40:00.000+0800",
      "issuelinks": [],
      "assignee": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=suchenyu",
        "name": "suchenyu",
        "key": "suchenyu",
        "emailAddress": "suchenyu@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=suchenyu&avatarId=11489",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=suchenyu&avatarId=11489",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=suchenyu&avatarId=11489",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=suchenyu&avatarId=11489"
        },
        "displayName": "\u82cf\u9648\u6631",
        "active": true,
        "timeZone": "PRC"
      },
      "updated": "2017-11-30T17:41:46.265+0800",
      "status": {
        "self": "https://jira.bytedance.com/rest/api/2/status/10345",
        "description": "This status is managed internally by JIRA Software",
        "iconUrl": "https://jira.bytedance.com/",
        "name": "Doing",
        "id": "10345",
        "statusCategory": {
          "self": "https://jira.bytedance.com/rest/api/2/statuscategory/4",
          "id": 4,
          "key": "indeterminate",
          "colorName": "yellow",
          "name": "In Progress"
        }
      },
      "components": [],
      "timeoriginalestimate": null,
      "description": "\u63cf\u8ff0\u63cf\u8ff0",
      "timetracking": {},
      "customfield_10005": [
        "com.atlassian.greenhopper.service.sprint.Sprint@5df13eab[id=546,rapidViewId=335,state=FUTURE,name=\u6d4b\u8bd5\u8fed\u4ee31,startDate=<null>,endDate=<null>,completeDate=<null>,sequence=547]"
      ],
      "customfield_10401": null,
      "customfield_10006": null,
      "customfield_10402": null,
      "customfield_10403": null,
      "attachment": [],
      "customfield_10405": null,
      "aggregatetimeestimate": null,
      "customfield_10407": null,
      "summary": "\u4e3b\u754c\u9762\u6539\u7248~~",
      "creator": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "subtasks": [],
      "reporter": {
        "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
        "name": "beijunlong",
        "key": "beijunlong",
        "emailAddress": "beijunlong@bytedance.com",
        "avatarUrls": {
          "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
          "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
          "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
          "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
        },
        "displayName": "\u8d1d\u4fca\u9f99",
        "active": true,
        "timeZone": "PRC"
      },
      "customfield_10000": null,
      "aggregateprogress": {
        "progress": 0,
        "total": 0
      },
      "customfield_10001": null,
      "customfield_10002": null,
      "customfield_10200": "0|i0hd1h:",
      "customfield_10004": "9223372036854775807",
      "customfield_10400": null,
      "environment": null,
      "duedate": "2017-10-09",
      "progress": {
        "progress": 0,
        "total": 0
      },
      "comment": {
        "startAt": 0,
        "maxResults": 2,
        "total": 2,
        "comments": [
          {
            "self": "https://jira.bytedance.com/rest/api/2/issue/113608/comment/51846",
            "id": "51846",
            "author": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
              "name": "beijunlong",
              "key": "beijunlong",
              "emailAddress": "beijunlong@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
              },
              "displayName": "\u8d1d\u4fca\u9f99",
              "active": true,
              "timeZone": "PRC"
            },
            "body": "21334",
            "updateAuthor": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
              "name": "beijunlong",
              "key": "beijunlong",
              "emailAddress": "beijunlong@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
              },
              "displayName": "\u8d1d\u4fca\u9f99",
              "active": true,
              "timeZone": "PRC"
            },
            "created": "2017-10-11T16:03:55.000+0800",
            "updated": "2017-10-11T16:03:55.000+0800"
          },
          {
            "self": "https://jira.bytedance.com/rest/api/2/issue/113608/comment/58158",
            "id": "58158",
            "author": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
              "name": "beijunlong",
              "key": "beijunlong",
              "emailAddress": "beijunlong@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
              },
              "displayName": "\u8d1d\u4fca\u9f99",
              "active": true,
              "timeZone": "PRC"
            },
            "body": "add a comment in story",
            "updateAuthor": {
              "self": "https://jira.bytedance.com/rest/api/2/user?username=beijunlong",
              "name": "beijunlong",
              "key": "beijunlong",
              "emailAddress": "beijunlong@bytedance.com",
              "avatarUrls": {
                "48x48": "https://jira.bytedance.com/secure/useravatar?ownerId=beijunlong&avatarId=11519",
                "24x24": "https://jira.bytedance.com/secure/useravatar?size=small&ownerId=beijunlong&avatarId=11519",
                "16x16": "https://jira.bytedance.com/secure/useravatar?size=xsmall&ownerId=beijunlong&avatarId=11519",
                "32x32": "https://jira.bytedance.com/secure/useravatar?size=medium&ownerId=beijunlong&avatarId=11519"
              },
              "displayName": "\u8d1d\u4fca\u9f99",
              "active": true,
              "timeZone": "PRC"
            },
            "created": "2017-11-28T20:19:17.000+0800",
            "updated": "2017-11-28T20:19:17.000+0800"
          }
        ]
      },
      "votes": {
        "self": "https://jira.bytedance.com/rest/api/2/issue/BT-1/votes",
        "votes": 0,
        "hasVoted": false
      },
      "worklog": {
        "startAt": 0,
        "maxResults": 20,
        "total": 0,
        "worklogs": []
      }
    }
  },
  "changelog": {
    "id": "372015",
    "items": [
      {
        "field": "status",
        "fieldtype": "jira",
        "from": "10102",
        "fromString": "Backlog",
        "to": "10345",
        "toString": "Doing"
      }
    ]
  }
}
<^>
jira]

INFO:root:msg: {'msgtype': 'markdown', 'markdown': {'title': 'shenweimin更新了Story【主界面改版~~】的状态', 'text': '#### shenweimin更新了Story【主界面改版~~】的状态 \n由【Backlog】变为了【Doing】\n[点击查看详情](https://jira.bytedance.com/browse/BT-1)'}}
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): oapi.dingtalk.com
DEBUG:urllib3.connectionpool:https://oapi.dingtalk.com:443 "POST /robot/send?access_token=4431ce3a5a8ac6d057b34615f254fd5e8df8d5eaa9e9c9303f6751eebd84fb31 HTTP/1.1" 200 None
INFO:root:resp: {'errcode': 0, 'errmsg': 'ok'}
INFO:root:resp: <Response [200]>
INFO:werkzeug:172.17.0.1 - - [30/Nov/2017 09:41:46] "POST /webhook/jira?user_id=shenweimin&user_key=shenweimin HTTP/1.0" 200 -
